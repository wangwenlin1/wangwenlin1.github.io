(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{1164:function(s,a,t){"use strict";t.r(a);var n=t(19),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"命令-mod"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令-mod"}},[s._v("#")]),s._v(" 命令-mod")]),s._v(" "),t("p",[s._v("我个人觉得，一个包管理工具应该有以下功能："),t("br"),s._v("\n基本功能")]),s._v(" "),t("ol",[t("li",[s._v("依赖管理")]),s._v(" "),t("li",[s._v("依赖包版本控制")]),s._v(" "),t("li",[s._v("对应的包管理平台")]),s._v(" "),t("li",[s._v("可以私有化部署")])]),s._v(" "),t("p",[s._v("加分：")]),s._v(" "),t("ol",[t("li",[s._v("代码包是否可以复用")]),s._v(" "),t("li",[s._v("构建，测试,打包")]),s._v(" "),t("li",[s._v("发布上线")])]),s._v(" "),t("p",[s._v("对比上面几点："),t("br"),s._v("\n目前做的最好的也就 maven了，gradle没有使用过，不知道。")]),s._v(" "),t("p",[s._v("今天主角是go mod，先来谈谈没有使用go mod之前的问题。")]),s._v(" "),t("h2",{attrs:{id:"使用go-path问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用go-path问题"}},[s._v("#")]),s._v(" 使用go path问题")]),s._v(" "),t("ol",[t("li",[s._v("代码开发必须在go path src目录下，不然，就有问题。")]),s._v(" "),t("li",[s._v("依赖手动管理")]),s._v(" "),t("li",[s._v("依赖包没有版本可言")])]),s._v(" "),t("p",[s._v("从这个看， go path不算包管理工具")]),s._v(" "),t("h2",{attrs:{id:"govendor"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#govendor"}},[s._v("#")]),s._v(" govendor")]),s._v(" "),t("ol",[t("li",[s._v("解决了包依赖，一个配置文件就管理")]),s._v(" "),t("li",[s._v("依赖包全都下载到项目vendor下，每个项目都把有一份。拉取项目时,开始怀疑人生。")])]),s._v(" "),t("h2",{attrs:{id:"go-mod介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#go-mod介绍"}},[s._v("#")]),s._v(" go mod介绍")]),s._v(" "),t("p",[s._v("go modules 是 golang 1.11 新加的特性。现在1.12 已经发布了，是时候用起来了。Modules官方定义为：")]),s._v(" "),t("blockquote",[t("p",[s._v("模块是相关Go包的集合。modules是源代码交换和版本控制的单元。 go命令直接支持使用modules，包括记录和解析对其他模块的依赖性。modules替换旧的基于GOPATH的方法来指定在给定构建中使用哪些源文件。")])]),s._v(" "),t("h2",{attrs:{id:"如何使用go-mod"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何使用go-mod"}},[s._v("#")]),s._v(" 如何使用go mod")]),s._v(" "),t("p",[s._v("首先，必须升级go到1.11, 目前版本是1.14"),t("br"),s._v("\n下面我以我自己升级演示：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 卸载旧版本，删除对应文件")]),s._v("\n\nbrew uninstall -f go\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 更新一下brew")]),s._v("\n\nbrew update\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 安装go")]),s._v("\n\nbrew "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" go\n")])])]),t("p",[s._v("上面升级完了，使用 "),t("code",[s._v("go version")]),s._v(" 看下版本")]),s._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" version go1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.1")]),s._v(" darwin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("amd64\n")])])]),t("p",[s._v("下面设置go mod和go proxy")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("go "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),s._v(" -w "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GOBIN")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/Users/youdi/go/bin\ngo "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),s._v(" -w "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GO111MODULE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("on\ngo "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),s._v(" -w "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GOPROXY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://goproxy.cn,direct // 使用七牛云的\n")])])]),t("p",[s._v("注意： go env -w会将配置写到 "),t("code",[s._v('GOENV="/Users/youdi/Library/Application Support/go/env"')])]),s._v(" "),t("p",[s._v("下面看下我的配置")]),s._v(" "),t("div",{staticClass:"language-objectivec extra-class"},[t("pre",{pre:!0,attrs:{class:"language-objectivec"}},[t("code",[s._v("GO111MODULE"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"on"')]),s._v("\nGOARCH"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"amd64"')]),s._v("\nGOBIN"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/Users/youdi/go/bin"')]),s._v("\nGOCACHE"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/Users/youdi/Library/Caches/go-build"')]),s._v("\nGOENV"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/Users/youdi/Library/Application Support/go/env"')]),s._v("\nGOEXE"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\nGOFLAGS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\nGOHOSTARCH"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"amd64"')]),s._v("\nGOHOSTOS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"darwin"')]),s._v("\nGOINSECURE"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\nGONOPROXY"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\nGONOSUMDB"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\nGOOS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"darwin"')]),s._v("\nGOPATH"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/Users/youdi/go"')]),s._v("\nGOPRIVATE"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\nGOPROXY"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v('"https'),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//goproxy.cn,direct"')]),s._v("\nGOROOT"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/go"')]),s._v("\nGOSUMDB"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"off"')]),s._v("\nGOTMPDIR"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\nGOTOOLDIR"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/go/pkg/tool/darwin_amd64"')]),s._v("\nGCCGO"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gccgo"')]),s._v("\nAR"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ar"')]),s._v("\nCC"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"clang"')]),s._v("\nCXX"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"clang++"')]),s._v("\nCGO_ENABLED"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v("\nGOMOD"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/dev/null"')]),s._v("\nCGO_CFLAGS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-g -O2"')]),s._v("\nCGO_CPPFLAGS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\nCGO_CXXFLAGS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-g -O2"')]),s._v("\nCGO_FFLAGS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-g -O2"')]),s._v("\nCGO_LDFLAGS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-g -O2"')]),s._v("\nPKG_CONFIG"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pkg-config"')]),s._v("\nGOGCCFLAGS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=/var/folders/8m/v_1j4dgs7rzgqq4p_4_8k_nr0000gn/T/go-build221113671=/tmp/go-build -gno-record-gcc-switches -fno-common"')]),s._v("\n")])])]),t("p",[s._v("我们看一下，我修改的内容")]),s._v(" "),t("p",[s._v("cat /Users/youdi/Library/Application Support/go/env")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GO111MODULE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("on\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GOBIN")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/Users/youdi/go/bin\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GOPROXY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://goproxy.cn,direct\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GOSUMDB")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("off\n")])])]),t("h2",{attrs:{id:"go111module"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#go111module"}},[s._v("#")]),s._v(" GO111MODULE")]),s._v(" "),t("p",[s._v("GO111MODULE 有三个值：off, on和auto（默认值）。")]),s._v(" "),t("p",[s._v("GO111MODULE=off，go命令行将不会支持module功能，寻找依赖包的方式将会沿用旧版本那种通过vendor目录或者GOPATH模式来查找。"),t("br"),s._v("\nGO111MODULE=on，go命令行会使用modules，而一点也不会去GOPATH目录下查找。"),t("br"),s._v("\nGO111MODULE=auto，默认值，go命令行将会根据当前目录来决定是否启用module功能。这种情况下可以分为两种情形：")]),s._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[s._v("当前目录在GOPATH"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("src之外且该目录包含"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mod文件\n当前文件在包含"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mod文件的目录下面。\n")])])]),t("p",[s._v("当modules功能启用时，依赖包的存放位置变更为$GOPATH/pkg，允许同一个package多个版本并存，且多个项目可以共享缓存的 module")]),s._v(" "),t("p",[s._v("我们看下目录：")]),s._v(" "),t("p",[s._v("cd /Users/youdi/go/pkg")]),s._v(" "),t("div",{staticClass:"language-css extra-class"},[t("pre",{pre:!0,attrs:{class:"language-css"}},[t("code",[s._v("├── darwin_amd64 │ ├── github.com │ ├── go.etcd.io │ ├── golang │ ├── golang.org │ ├── gopkg.in │ ├── quickstart │ └── uc.a ├── mod │ ├── cache │ ├── github.com │ ├── golang.org │ ├── google.golang.org │ └── gopkg.in └── sumdb └── sum.golang.org\n")])])]),t("h2",{attrs:{id:"go-mod命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#go-mod命令"}},[s._v("#")]),s._v(" go mod命令")]),s._v(" "),t("p",[s._v("golang 提供了 "),t("code",[s._v("go mod")]),s._v(" 命令来管理包。")]),s._v(" "),t("p",[s._v("go help mod")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("Go mod provides access to operations on modules.\n\nNote that support "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" modules is built into all the go commands,\nnot just "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'go mod'")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" For example, day-to-day adding, removing, upgrading,\nand downgrading of dependencies should be "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v(" using "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'go get'")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\nSee "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'go help modules'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" an overview of module functionality.\n\nUsage:\n\n    go mod "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("command"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("arguments"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nThe commands are:\n\n    download    download modules to "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" cache\n    edit        edit go.mod from tools or scripts\n    graph       print module requirement graph\n    init        initialize new module "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" current directory\n    tidy        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" missing and remove unused modules\n    vendor      "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" vendored copy of dependencies\n    verify      verify dependencies have expected content\n    why         explain why packages or modules are needed\n\nUse "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"go help mod <command>"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" information about a command.\n")])])]),t("p",[s._v("go mod 有以下命令：")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("download")]),s._v(" "),t("td",[s._v("download modules to local cache(下载依赖包)")])]),s._v(" "),t("tr",[t("td",[s._v("edit")]),s._v(" "),t("td",[s._v("edit go.mod from tools or scripts（编辑go.mod)")])]),s._v(" "),t("tr",[t("td",[s._v("graph")]),s._v(" "),t("td",[s._v("print module requirement graph (打印模块依赖图)")])]),s._v(" "),t("tr",[t("td",[s._v("verify")]),s._v(" "),t("td",[s._v("initialize new module in current directory（在当前目录初始化mod）")])]),s._v(" "),t("tr",[t("td",[s._v("tidy")]),s._v(" "),t("td",[s._v("add missing and remove unused modules(拉取缺少的模块，移除不用的模块)")])]),s._v(" "),t("tr",[t("td",[s._v("vendor")]),s._v(" "),t("td",[s._v("make vendored copy of dependencies(将依赖复制到vendor下)")])]),s._v(" "),t("tr",[t("td",[s._v("verify")]),s._v(" "),t("td",[s._v("verify dependencies have expected content (验证依赖是否正确）")])]),s._v(" "),t("tr",[t("td",[s._v("why")]),s._v(" "),t("td",[s._v("explain why packages or modules are needed(解释为什么需要依赖)")])])])]),s._v(" "),t("p",[s._v("比较常用的是 "),t("code",[s._v("init")]),s._v(" , "),t("code",[s._v("tidy")]),s._v(" , "),t("code",[s._v("edit")])]),s._v(" "),t("h2",{attrs:{id:"使用go-mod管理一个新项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用go-mod管理一个新项目"}},[s._v("#")]),s._v(" 使用go mod管理一个新项目")]),s._v(" "),t("h3",{attrs:{id:"_1-初始化项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-初始化项目"}},[s._v("#")]),s._v(" 1. 初始化项目")]),s._v(" "),t("p",[s._v("可以随便找一个目录创建项目，我使用习惯用IDEA进行创建")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" Gone\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" Gone\ngo mod init Gone\n")])])]),t("p",[s._v("查看一下 go.mod文件")]),s._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[s._v("module Gone\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.14")]),s._v("\n")])])]),t("p",[s._v("go.mod文件一旦创建后，它的内容将会被go toolchain全面掌控。go toolchain会在各类命令执行时，比如go get、go build、go mod等修改和维护go.mod文件。")]),s._v(" "),t("p",[s._v("go.mod 提供了module, require、replace和exclude 四个命令")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("module")]),s._v(" 语句指定包的名字（路径）")]),s._v(" "),t("li",[t("code",[s._v("require")]),s._v(" 语句指定的依赖项模块")]),s._v(" "),t("li",[t("code",[s._v("replace")]),s._v(" 语句可以替换依赖项模块")]),s._v(" "),t("li",[t("code",[s._v("exclude")]),s._v(" 语句可以忽略依赖项模块")])]),s._v(" "),t("h3",{attrs:{id:"_2-添加依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-添加依赖"}},[s._v("#")]),s._v(" 2. 添加依赖")]),s._v(" "),t("p",[s._v("创建 main.go文件")]),s._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" main\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"github.com/gin-gonic/gin"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    r "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" gin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Default")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    r"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("GET")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/ping"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("gin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("JSON")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" gin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("H"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"message"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pong"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    r"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Run")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// listen and serve on 0.0.0.0:8080 (for windows "localhost:8080")')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("执行 go run main.go 运行代码会发现 go mod 会自动查找依赖自动下载"),t("br"),s._v("\n再查看 "),t("code",[s._v("go.mod")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("module Gone\n\ngo "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.14")]),s._v("\n\nrequire github.com/gin-gonic/gin v1.6.3\n")])])]),t("p",[s._v("go module 安装 package 的原則是先拉最新的 release tag，若无tag则拉最新的commit")]),s._v(" "),t("p",[s._v("go 会自动生成一个 go.sum 文件来记录 dependency tree")]),s._v(" "),t("p",[t("img",{attrs:{src:"https:////upload-images.jianshu.io/upload_images/1293367-6d16a0d961653490.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp",alt:"img"}})]),s._v(" "),t("p",[s._v("再次执行脚本 go run main.go发现跳过了检查并安装依赖的步骤。")]),s._v(" "),t("p",[s._v("可以使用命令 go list -m -u all 来检查可以升级的package，使用go get -u need-upgrade-package 升级后会将新的依赖版本更新到go.mod * 也可以使用 go get -u 升级所有依赖")]),s._v(" "),t("p",[s._v("去mod包缓存下看看")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("/Users/youdi/go/pkg/mod/github.com/gin-gonic/gin@v1.6.3\n")])])]),t("h2",{attrs:{id:"go-get升级"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#go-get升级"}},[s._v("#")]),s._v(" go get升级")]),s._v(" "),t("ul",[t("li",[s._v("运行 go get -u 将会升级到最新的次要版本或者修订版本(x.y.z, z是修订版本号， y是次要版本号)")]),s._v(" "),t("li",[s._v("运行 go get -u=patch 将会升级到最新的修订版本")]),s._v(" "),t("li",[s._v("运行 go get package@version 将会升级到指定的版本号version")]),s._v(" "),t("li",[s._v("运行go get如果有版本的更改，那么go.mod文件也会更改")])]),s._v(" "),t("h2",{attrs:{id:"使用replace替换无法直接获取的package"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用replace替换无法直接获取的package"}},[s._v("#")]),s._v(" 使用replace替换无法直接获取的package")]),s._v(" "),t("p",[s._v("由于某些已知的原因，并不是所有的package都能成功下载，比如：golang.org下的包。")]),s._v(" "),t("p",[s._v("modules 可以通过在 go.mod 文件中使用 replace 指令替换成github上对应的库，比如：")]),s._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[s._v("replace "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    golang"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("org"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("x"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("crypto v0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20190313024323")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("a1f597ede03a "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" github"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("golang"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("crypto v0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20190313024323")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("a1f597ede03a\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h2",{attrs:{id:"go-mod发布和使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#go-mod发布和使用"}},[s._v("#")]),s._v(" go mod发布和使用")]),s._v(" "),t("p",[s._v("参考Roberto Selbach写的go mod入门文章，文末，我给出链接")]),s._v(" "),t("h2",{attrs:{id:"creating-a-module"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-module"}},[s._v("#")]),s._v(" Creating a Module")]),s._v(" "),t("p",[s._v("如果你设置好go mod了，那你就可以在任何目录下随便创建")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$mkdir")]),s._v(" gomodone\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$cd")]),s._v(" gomodone\n")])])]),t("p",[s._v("在这个目录下创建一个文件 "),t("code",[s._v("say.go")])]),s._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" gomodone\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fmt"')]),s._v(" \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// say Hi to someone")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("SayHi")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" fmt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Sprintf")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hi, %s"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("初始化一个 "),t("code",[s._v("go.mod")]),s._v(" 文件")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ go mod init github.com/jacksonyoudi/gomodone\ngo: creating new go.mod: module github.com/jacksonyoudi/gomodone\n")])])]),t("p",[s._v("查看 go.mod内容如下：")]),s._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[s._v("github"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jacksonyoudi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("gomodone\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.14")]),s._v("\n")])])]),t("p",[s._v("下面我们要将这个module发布到github上，然后在另外一个程序使用")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$git")]),s._v(" init\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$vim")]),s._v(" .gitiiignore\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$git")]),s._v(" commit -am "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"init"')]),s._v("\n// github创建对应的repo\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$git")]),s._v(" remote "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" origin git@github.com:jacksonyoudi/gomodone.git\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$git")]),s._v(" push -u origin master\n")])])]),t("p",[s._v("执行完，上面我们就相当于发布完了。")]),s._v(" "),t("p",[s._v("如果有人需要使用，就可以使用")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("go get github.com/jacksonyoudi/gomodone\n")])])]),t("p",[s._v("这个时候没有加tag，所以，没有版本的控制。默认是v0.0.0后面接上时间和commitid。如下：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("gomodone@v0.0.0-20200517004046-ee882713fd1e\n")])])]),t("p",[s._v("官方不建议这样做，没有进行版本控制管理。")]),s._v(" "),t("h2",{attrs:{id:"module-versioning"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#module-versioning"}},[s._v("#")]),s._v(" module versioning")]),s._v(" "),t("p",[s._v("使用tag，进行版本控制")]),s._v(" "),t("h3",{attrs:{id:"making-a-release"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#making-a-release"}},[s._v("#")]),s._v(" making a release")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" tag v1.0.0\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push --tags\n")])])]),t("p",[s._v("操作完，我们的module就发布了一个v1.0.0的版本了。")]),s._v(" "),t("p",[s._v("推荐在这个状态下，再切出一个分支，用于后续v1.0.0的修复推送, 不要直接在master分支修复")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$git")]),s._v(" checkout -b v1\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$git")]),s._v(" push -u origin v1\n")])])]),t("h2",{attrs:{id:"use-our-module"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#use-our-module"}},[s._v("#")]),s._v(" use our module")]),s._v(" "),t("p",[s._v("上面已经发布了一个v1.0.0的版本，我们可以在另一个项目中使用，创建一个go的项目")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$mkdir")]),s._v(" Gone\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$cd")]),s._v(" Gone\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$vim")]),s._v(" main.go\n")])])]),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" main\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fmt"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"github.com/jacksonyoudi/gomodone"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    fmt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gomodone"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("SayHi")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Roberto"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("代码写好了，我们生成 go mod文件")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("go mod init Gone\n")])])]),t("p",[s._v("上面命令执行完，会生成 go mod文件"),t("br"),s._v("\n看下mod文件：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("module Gone\n\ngo "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.14")]),s._v("\n\nrequire "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    github.com/jacksonyoudi/gomodone v1.0.0\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$go")]),s._v(" mod tidy\ngo: finding module "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" package github.com/jacksonyoudi/gomodone\ngo: found github.com/jacksonyoudi/gomodone "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" github.com/jacksonyoudi/gomodone v1.0.0\n")])])]),t("p",[s._v("同时还生成了go.sum, 其中包含软件包的哈希值，以确保我们具有正确的版本和文件。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("github.com/jacksonyoudi/gomodone v1.0.1 h1:jFd+qZlAB0R3zqrC9kwO8IgPrAdayMUS0rSHMDc/uG8"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\ngithub.com/jacksonyoudi/gomodone v1.0.1/go.mod h1:XWi+BLbuiuC2YM8Qz4yQzTSPtHt3T3hrlNN2pNlyA94"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\ngithub.com/jacksonyoudi/gomodone/v2 v2.0.0 h1:GpzGeXCx/Xv2ueiZJ8hEhFwLu7xjxLBjkOYSmg8Ya/w"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\ngithub.com/jacksonyoudi/gomodone/v2 v2.0.0/go.mod h1:L8uFPSZNHoAhpaePWUfKmGinjufYdw9c2i70xtBorSw"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n")])])]),t("p",[s._v("这个内容是下面的，需要操作执行的结果")]),s._v(" "),t("p",[s._v("go run main.go就可以运行了")]),s._v(" "),t("h2",{attrs:{id:"making-a-bugfix-release"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#making-a-bugfix-release"}},[s._v("#")]),s._v(" Making a bugfix release")]),s._v(" "),t("p",[s._v("假如fix一个bug, 我们在v1版本上进行修复")]),s._v(" "),t("p",[s._v("修改代码如下：")]),s._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// say Hi to someone")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("SayHi")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" fmt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Sprintf")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hi, %s"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" fmt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Sprintf")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hi, %s!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("修复好，我们开始push")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Emphasize our friendliness"')]),s._v(" say.go\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" tag v1.0.1\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push --tags origin v1\n")])])]),t("h3",{attrs:{id:"updating-modules"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#updating-modules"}},[s._v("#")]),s._v(" Updating modules")]),s._v(" "),t("p",[s._v("刚才fix bug，所以要在我们使用项目中更新")]),s._v(" "),t("p",[s._v("这个需要我们手动执行更新module操作")]),s._v(" "),t("p",[s._v("我们通过使用我们的好朋友来做到这一点go get：")]),s._v(" "),t("ul",[t("li",[s._v("运行  "),t("code",[s._v("go get -u")]),s._v(" 以使用最新的  minor  版本或修补程序版本（即它将从1.0.0更新到例如1.0.1，或者，如果可用，则更新为1.1.0）")]),s._v(" "),t("li",[s._v("运行  go get -u=patch 以使用最新的  修补程序  版本（即，将更新为1.0.1但不更新  为1.1.0）")]),s._v(" "),t("li",[s._v("运行go get package@version 以更新到特定版本（例如"),t("a",{attrs:{href:"https://links.jianshu.com/go?to=http%3A%2F%2Fgithub.com%2Fjacksonyoudi%2Fgomodone%40v1.0.1",target:"_blank",rel:"noopener noreferrer"}},[s._v("github.com/jacksonyoudi/gomodone@v1.0.1"),t("OutboundLink")],1),s._v("）")])]),s._v(" "),t("p",[s._v("目前module最新的也是v1.0.1")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("// 更新最新\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$go")]),s._v(" get -u\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$go")]),s._v(" get -u"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("patch\n//指定包，指定版本\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$go")]),s._v(" get github.com/jacksonyoudi/gomodone@v1.0.1\n")])])]),t("p",[s._v("操作完，go.mod文件会修改如下:")]),s._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[s._v("module Gone\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.14")]),s._v("\n\nrequire "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    github"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jacksonyoudi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("gomodone v1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h3",{attrs:{id:"major-versions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#major-versions"}},[s._v("#")]),s._v(" Major versions")]),s._v(" "),t("p",[s._v("根据语义版本语义，主要版本与次要版本  不同。主要版本可能会破坏向后兼容性。从Go模块的角度来看，主要版本是  完全不同的软件包。乍一看这听起来很奇怪，但这是有道理的：两个不兼容的库版本是两个不同的库。"),t("br"),s._v("\n比如下面修改，完全破坏了兼容性。")]),s._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" gomodone\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"errors"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fmt"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Hi returns a friendly greeting")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Hi returns a friendly greeting in language lang")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("SayHi")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" lang "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("error")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("switch")]),s._v(" lang "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"en"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" fmt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Sprintf")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hi, %s!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("nil")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pt"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" fmt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Sprintf")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Oi, %s!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("nil")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"es"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" fmt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Sprintf")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"¡Hola, %s!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("nil")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fr"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" fmt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Sprintf")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Bonjour, %s!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("nil")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" errors"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("New")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"unknown language"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("如上，我们需要不同的大版本，这种情况下")]),s._v(" "),t("p",[s._v("修改 go.mod如下")]),s._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[s._v("module github"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jacksonyoudi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("gomodone"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v2\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.14")]),s._v("\n")])])]),t("p",[s._v("然后，重新tag，push")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit say.go -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Change Hi to allow multilang"')]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout -b v2 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用于v2版本，后续修复v2")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit go.mod -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Bump version to v2"')]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" tag v2.0.0\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push --tags origin v2 \n")])])]),t("h2",{attrs:{id:"updating-to-a-major-version"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#updating-to-a-major-version"}},[s._v("#")]),s._v(" Updating to a major version")]),s._v(" "),t("p",[s._v("即使发布了库的新不兼容版本，现有软件 也不会中断，因为它将继续使用现有版本1.0.1。go get -u 将不会获得版本2.0.0。"),t("br"),s._v("\n如果想使用v2.0.0, 代码改成如下：")]),s._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" main\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fmt"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"github.com/jacksonyoudi/gomodone/v2"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    g"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" err "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" gomodone"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("SayHi")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Roberto"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pt"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" err "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("nil")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("panic")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    fmt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("g"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("执行 go mod tidy")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("go: finding module "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" package github.com/jacksonyoudi/gomodone/v2\ngo: downloading github.com/jacksonyoudi/gomodone/v2 v2.0.0\ngo: found github.com/jacksonyoudi/gomodone/v2 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" github.com/jacksonyoudi/gomodone/v2 v2.0.0\n")])])]),t("p",[s._v("当然，两个版本都可以同时使用, 使用别名"),t("br"),s._v("\n如下：")]),s._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" main\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fmt"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"github.com/jacksonyoudi/gomodone"')]),s._v("\n    mv2 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"github.com/jacksonyoudi/gomodone/v2"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    g"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" err "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" mv2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("SayHi")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Roberto"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pt"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" err "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("nil")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("panic")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    fmt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("g"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    fmt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gomodone"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("SayHi")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Roberto"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("执行一下 "),t("code",[s._v("go mod tidy")])]),s._v(" "),t("h2",{attrs:{id:"vendoring"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vendoring"}},[s._v("#")]),s._v(" Vendoring")]),s._v(" "),t("p",[s._v("默认是忽略vendor的，如果想在项目目录下有vendor可以执行下面命令")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$go")]),s._v(" vendor\n")])])]),t("p",[s._v("当然，如果构建程序的时候，希望使用vendor中的依赖，")]),s._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" build "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("mod vendor\n")])])]),t("h2",{attrs:{id:"idea下开发go"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#idea下开发go"}},[s._v("#")]),s._v(" IDEA下开发GO")]),s._v(" "),t("ol",[t("li",[s._v("创建go项目")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https:////upload-images.jianshu.io/upload_images/1293367-81ebb7e55f2858e8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp",alt:"img"}})]),s._v(" "),t("ol",[t("li",[t("p",[s._v("创建完项目，会自动生成go mod文件")]),s._v(" "),t("p",[s._v("如果需要修改，可以手动修改，加入git等操作")])]),s._v(" "),t("li",[t("p",[s._v("写业务逻辑代码")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https:////upload-images.jianshu.io/upload_images/1293367-059fa1b8f421c9d7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp",alt:"img"}})]),s._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[s._v("解决依赖，更新go.mod")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https:////upload-images.jianshu.io/upload_images/1293367-69ee0eb8eb9024cc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp",alt:"img"}})]),s._v(" "),t("ol",[t("li",[s._v("go build")])])])}),[],!1,null,null,null);a.default=e.exports}}]);
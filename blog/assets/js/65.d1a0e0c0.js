(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{1235:function(t,s,a){"use strict";a.r(s);var n=a(19),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"数据表字段选择与sql执行流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据表字段选择与sql执行流程"}},[t._v("#")]),t._v(" 数据表字段选择与SQL执行流程")]),t._v(" "),n("h3",{attrs:{id:"_0-课程内容"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_0-课程内容"}},[t._v("#")]),t._v(" 0.课程内容")]),t._v(" "),n("ol",[n("li",[t._v("课程回滚")]),t._v(" "),n("li",[t._v("数据表字段选择")]),t._v(" "),n("li",[t._v("SQL执行流程")]),t._v(" "),n("li",[t._v("SQL解析器与优化器")]),t._v(" "),n("li",[t._v("行转列与源码点点的扩展")])]),t._v(" "),n("h3",{attrs:{id:"_1-数据库的字段选择"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-数据库的字段选择"}},[t._v("#")]),t._v(" 1. 数据库的字段选择")]),t._v(" "),n("p",[t._v("在数据表的结构关系确定之后，这个时候就需要去确定相应的数据表的字段类型")]),t._v(" "),n("h4",{attrs:{id:"_1-1-字符串类型字段-char与varchar以及text"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-字符串类型字段-char与varchar以及text"}},[t._v("#")]),t._v(" 1.1 字符串类型字段 char与varchar以及text")]),t._v(" "),n("p",[t._v("char => char(长度) -> 多长"),n("br"),t._v("\nvarchar => 根据规定长度变化")]),t._v(" "),n("p",[t._v("数据库中会保存varchar的长度")]),t._v(" "),n("p",[n("em",[t._v("在gbk与utf8的编码下char与varchar在设置同等长度的时候的对比")])]),t._v(" "),n("p",[t._v("gbk(1个字符,2个字节)")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("值")]),t._v(" "),n("th",[t._v("Char(4)")]),t._v(" "),n("th",[t._v("字节")]),t._v(" "),n("th",[t._v("varchar(4)")]),t._v(" "),n("th",[t._v("字节")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("''")]),t._v(" "),n("td",[t._v("'  '")]),t._v(" "),n("td",[t._v("8个字节")]),t._v(" "),n("td",[t._v("''")]),t._v(" "),n("td",[t._v("1个字节")])]),t._v(" "),n("tr",[n("td",[t._v("'ab'")]),t._v(" "),n("td",[t._v("'ab  '")]),t._v(" "),n("td",[t._v("8个字节")]),t._v(" "),n("td",[t._v("'ab'")]),t._v(" "),n("td",[t._v("5个字节")])]),t._v(" "),n("tr",[n("td",[t._v("'abcd'")]),t._v(" "),n("td",[t._v("'abcd'")]),t._v(" "),n("td",[t._v("8个字节")]),t._v(" "),n("td",[t._v("'abcd'")]),t._v(" "),n("td",[t._v("9个字节")])]),t._v(" "),n("tr",[n("td",[t._v("'abcdefg'")]),t._v(" "),n("td",[t._v("'abcd'")]),t._v(" "),n("td",[t._v("8个字节")]),t._v(" "),n("td",[t._v("'abcd'")]),t._v(" "),n("td",[t._v("9个字节")])])])]),t._v(" "),n("p",[t._v("utf8(1个字符,3个字节)")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("值")]),t._v(" "),n("th",[t._v("Char(4)")]),t._v(" "),n("th",[t._v("字节")]),t._v(" "),n("th",[t._v("varchar(4)")]),t._v(" "),n("th",[t._v("字节")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("''")]),t._v(" "),n("td",[t._v("'  '")]),t._v(" "),n("td",[t._v("12个字节")]),t._v(" "),n("td",[t._v("''")]),t._v(" "),n("td",[t._v("1个字节")])]),t._v(" "),n("tr",[n("td",[t._v("'ab'")]),t._v(" "),n("td",[t._v("'ab  '")]),t._v(" "),n("td",[t._v("12个字节")]),t._v(" "),n("td",[t._v("'ab'")]),t._v(" "),n("td",[t._v("7个字节")])]),t._v(" "),n("tr",[n("td",[t._v("'abcd'")]),t._v(" "),n("td",[t._v("'abcd'")]),t._v(" "),n("td",[t._v("12个字节")]),t._v(" "),n("td",[t._v("'abcd'")]),t._v(" "),n("td",[t._v("13个字节")])]),t._v(" "),n("tr",[n("td",[t._v("'abcdefg'")]),t._v(" "),n("td",[t._v("'abcd'")]),t._v(" "),n("td",[t._v("12个字节")]),t._v(" "),n("td",[t._v("'abcd'")]),t._v(" "),n("td",[t._v("13个字节")])])])]),t._v(" "),n("p",[t._v("vrachar  可变长度"),n("br"),t._v("\nchar     固定长度"),n("br"),t._v("\ntext 可变长度非unicode 不能有默认值 大的数据类型")]),t._v(" "),n("p",[t._v("text 子段与其他字段一起查询")]),t._v(" "),n("p",[t._v("select text from table_name")]),t._v(" "),n("p",[t._v("5.5 varchar 255 text")]),t._v(" "),n("p",[t._v("varchar 存放内容长度 5000  => text")]),t._v(" "),n("p",[t._v("数据索引效率 char > varchar > text")]),t._v(" "),n("p",[t._v("phone => char  bigint => 精确查询 => 对于其他语言数据类型转化")]),t._v(" "),n("p",[t._v("除了 登入之外")]),t._v(" "),n("p",[t._v("134 5754 9587  like '134%'; => 可以使用到索引")]),t._v(" "),n("p",[t._v("ip 102.120.20.1 => 整数类型 => inet_aton => 十进制")]),t._v(" "),n("p",[t._v("123456 密码 dsfasaddfsafasf  => 原密码")]),t._v(" "),n("p",[t._v("md5 hash => 固定长度的加密")]),t._v(" "),n("p",[t._v("password => char")]),t._v(" "),n("p",[t._v("文章content text blob => 小说,图片")]),t._v(" "),n("h4",{attrs:{id:"_1-2-数字类型的字段-tinyint-smallint-int-bigint"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-数字类型的字段-tinyint-smallint-int-bigint"}},[t._v("#")]),t._v(" 1.2 数字类型的字段 tinyint,smallint,int,bigint")]),t._v(" "),n("p",[t._v("unsigned 无序号")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("数据类型")]),t._v(" "),n("th",[t._v("范围")]),t._v(" "),n("th",[t._v("字节")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("bigint")]),t._v(" "),n("td",[t._v("-2^63 (-9,223,372,036,854,775,808) 到 2^63-1 (9,223,372,036,854,775,807)")]),t._v(" "),n("td",[t._v("8 字节")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("0到18446744073709551615")]),t._v(" "),n("td",[t._v("较大整数")])]),t._v(" "),n("tr",[n("td",[t._v("int")]),t._v(" "),n("td",[t._v("-2^31 (-2,147,483,648) 到 2^31-1 (2,147,483,647)")]),t._v(" "),n("td",[t._v("4 个字节")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("0到4294967295")]),t._v(" "),n("td",[t._v("标准整数")])]),t._v(" "),n("tr",[n("td",[t._v("smallint")]),t._v(" "),n("td",[t._v("-2^15 (-32,768) 到 2^15-1 (32,767)")]),t._v(" "),n("td",[t._v("2 字节")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("0到65535")]),t._v(" "),n("td",[t._v("较小整数")])]),t._v(" "),n("tr",[n("td",[t._v("tinyint")]),t._v(" "),n("td",[t._v("-2^7 (-128) 到 2^7 - 1 (127)")]),t._v(" "),n("td",[t._v("1 字节")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("0到255")]),t._v(" "),n("td",[t._v("非常小的整数")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td"),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("float[(m,d)]")]),t._v(" "),n("td",[t._v("±1.175494351e - 38")]),t._v(" "),n("td",[t._v("4字节")])]),t._v(" "),n("tr",[n("td",[t._v("double[(m, d)]")]),t._v(" "),n("td",[t._v("±2.2250738585072014e - 308")]),t._v(" "),n("td",[t._v("8字节")])]),t._v(" "),n("tr",[n("td",[t._v("decimal (m,d)")]),t._v(" "),n("td",[t._v("可变；其值的范围依赖于m 和d")]),t._v(" "),n("td",[t._v("m+2字节")])])])]),t._v(" "),n("div",{staticClass:"language-sql extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("yyy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("tinyint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PRIMARY")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("KEY")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENGINE")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("InnoDB")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARSET")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf8\n\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("desc")]),t._v(" yyy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-------+---------------------+------+-----+---------+-------+")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Field "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Type")]),t._v("                "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("Null")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Key")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Extra "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-------+---------------------+------+-----+---------+-------+")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" id    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("tinyint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("NO")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" PRI "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("       "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-------+---------------------+------+-----+---------+-------+")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("row")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("in")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.00")]),t._v(" sec"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" yyy "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("values")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nQuery OK"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("row")]),t._v(" affected "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.06")]),t._v(" sec"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" yyy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-----+")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" id  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-----+")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-----+")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("row")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("in")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.00")]),t._v(" sec"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" yyy "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("values")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("256")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nERROR "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1264")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("22003")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Out")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" range "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("column")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'id'")]),t._v(" at "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("row")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" yyy "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("values")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nERROR "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1264")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("22003")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Out")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" range "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("column")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'id'")]),t._v(" at "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("row")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" yyy "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("values")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nQuery OK"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("row")]),t._v(" affected "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.09")]),t._v(" sec"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("自动增长 0 步长为 1"),n("br"),t._v("\n主键 :id   => unsigned int")]),t._v(" "),n("p",[t._v("项目比较大 unsigned bigint")]),t._v(" "),n("p",[t._v("年龄 unsigned")]),t._v(" "),n("h4",{attrs:{id:"_1-3-时间类型的字段-date-time-datetime"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-时间类型的字段-date-time-datetime"}},[t._v("#")]),t._v(" 1.3 时间类型的字段 Date,Time,Datetime")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("数据类型")]),t._v(" "),n("th",[t._v("范围")]),t._v(" "),n("th",[t._v("字节")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("date")]),t._v(" "),n("td",[t._v("'0000-00-00'")]),t._v(" "),n("td",[t._v("3字节")])]),t._v(" "),n("tr",[n("td",[t._v("time")]),t._v(" "),n("td",[t._v("'00:00:00'")]),t._v(" "),n("td",[t._v("3字节")])]),t._v(" "),n("tr",[n("td",[t._v("datetime")]),t._v(" "),n("td",[t._v("'0000-00-00 00:00:00'")]),t._v(" "),n("td",[t._v("8字节")])]),t._v(" "),n("tr",[n("td",[t._v("timestamp")]),t._v(" "),n("td",[t._v("'0000-00-00 00:00:00'")]),t._v(" "),n("td",[t._v("4字节")])]),t._v(" "),n("tr",[n("td",[t._v("year")]),t._v(" "),n("td",[t._v("0000")]),t._v(" "),n("td",[t._v("1字节")])])])]),t._v(" "),n("p",[t._v("数据时间超出了mysql规定范围 通常为改为 0 的方式存放"),n("br"),t._v("\ntime截取")]),t._v(" "),n("p",[t._v("DATETIME\t可以允许为null 手动设计的")]),t._v(" "),n("p",[t._v('TIMESTAMP 不允许 默认"0000-00-00 00:00:0" 时间主要是根据时区一起变化')]),t._v(" "),n("p",[t._v("不做配置;更新一条数据的时候该字段也会随之记录更新的时间")]),t._v(" "),n("p",[t._v("常用datetime")]),t._v(" "),n("p",[t._v("时间戳 char int")]),t._v(" "),n("h4",{attrs:{id:"_1-4-一些不适合放在数据库中的数据类型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-一些不适合放在数据库中的数据类型"}},[t._v("#")]),t._v(" 1.4 一些不适合放在数据库中的数据类型")]),t._v(" "),n("ol",[n("li",[t._v("二进制多媒体数据")])]),t._v(" "),n("p",[t._v("将二进制多媒体数据存放在数据库中，一个问题是数据库空间资源耗用非常严重，另一个问题是这些数据的存储很消耗数据库主机的 CPU 资源。这种数据主要包括图片，音频、视频和其他一些相关的二进制文件。这些数据的处理本不是数据的优势，如果我们硬要将他们塞入数据库，肯定会造成数据库的处理资源消耗严重。")]),t._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[t._v("流水队列数据")])]),t._v(" "),n("p",[t._v("我们都知道，数据库为了保证事务的安全性（支持事务的存储引擎）以及可恢复性，都是需要记录所有变更的日志信息的。而流水队列数据的用途就决定了存放这种数据的表中的数据会不断的被 INSERT，UPDATE 和 DELETE，而每一个操作都会生成与之对应的日志信息。在 MySQL 中，如果是支持事务的存储引擎，这个日志的产生量更是要翻倍。而如果我们通过一些成熟的第三方队列软件来实现这个 Queue 数据的处理功能，性能将会成倍的提升。")]),t._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[t._v("超大文本数据")])]),t._v(" "),n("p",[t._v("对于 5.0.3 之前的 MySQL 版本，VARCHAR 类型的数据最长只能存放 255 个字节，如果需要存储更长的文本数据到一个字段，我们就必须使用 TEXT 类型（最大可存放 64KB）的字段，甚至是更大的LONGTEXT 类型（最大 4GB）。而 TEXT 类型数据的处理性能要远比 VARCHAR 类型数据的处理性能低下很多。从 5.0.3 版本开始，VARCHAR 类型的最大长度被调整到 64KB 了，但是当实际数据小于 255Bytes 的时候，实际存储空间和实际的数据长度一样，可一旦长度超过 255 Bytes 之后，所占用的存储空间就是实际数据长度的两倍。")]),t._v(" "),n("p",[t._v("xxx 下载 => 网址")]),t._v(" "),n("p",[t._v("小说 => 根据章节 text => 下载完整版 => 所有内容 txt => 某一个路径下")]),t._v(" "),n("p",[t._v("收费接入 => 根据章节下载")]),t._v(" "),n("p",[t._v("图片:blob")]),t._v(" "),n("h3",{attrs:{id:"_2-sql执行流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-sql执行流程"}},[t._v("#")]),t._v(" 2. SQL执行流程")]),t._v(" "),n("p",[t._v('"select count(*) from  table_name  "=>2313')]),t._v(" "),n("p",[t._v("select name,id from table_name where id =9 and age > 9")]),t._v(" "),n("p",[t._v("查询缓存 => select 语句作为记录 数据")]),t._v(" "),n("p",[t._v("优化器 => where id =9 and age > 9 => 重写然后根据对应规则 去选择最优的执行计划 算法")]),t._v(" "),n("p",[t._v("sql 对于 用户 的访问权限做一个校验 => rbac")]),t._v(" "),n("p",[t._v("存储引擎接口 -> 最优的执行计划去执行sql  => 扫码磁盘")]),t._v(" "),n("p",[t._v("执行sql不是立即就可以获取数据")]),t._v(" "),n("p",[t._v('数据查询出来之后 => "select 语句" key , data 数据value')]),t._v(" "),n("p",[n("img",{attrs:{src:a(735),alt:""}})]),t._v(" "),n("p",[t._v("sql 优化 = 磁盘的io操作次数/优化器执行的时间  不是io操作的速度 (充值)")]),t._v(" "),n("p",[t._v("?? 数据库中的数据变了，缓存中的数据会自动更新么？")]),t._v(" "),n("h3",{attrs:{id:"_3-sql解析器与优化器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-sql解析器与优化器"}},[t._v("#")]),t._v(" 3. SQL解析器与优化器")]),t._v(" "),n("p",[t._v("解析器:两部分 句法扫描器 与 语法规则模块")]),t._v(" "),n("p",[t._v("句法扫描器 => 整个查询语句分解为多个令牌(一些不可以分隔的元素,列名)")]),t._v(" "),n("div",{staticClass:"language-sql extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("count")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("status")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" table_name "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" id "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ? "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("order")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" sort "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("group")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" name\n")])])]),n("p",[t._v("句法扫描器 => 分解令牌 每一个字节流 => 都会分解为令牌")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v("\ncount\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n*\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n,\nstatus\nfrom\ntable_name\nwhere\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("id")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n?\norder\nby\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),t._v("\ngroup\nby\nname\n")])])]),n("p",[t._v("语法规则(sql_yacc.yy)就会根据令牌 sql_lex.h -> 关键字 => 解析树")]),t._v(" "),n("p",[t._v("sql_lex.h")]),t._v(" "),n("p",[t._v("where id =9 and age > 9")]),t._v(" "),n("p",[n("img",{attrs:{src:a(736),alt:""}})]),t._v(" "),n("p",[t._v("优化器:")]),t._v(" "),n("p",[t._v("desc")]),t._v(" "),n("p",[t._v("了解 数据表大体结构")]),t._v(" "),n("p",[t._v("优化器 => 简单内容")]),t._v(" "),n("ol",[n("li",[t._v("选择合适键")]),t._v(" "),n("li",[t._v("针对每个表全局的扫码 结构 有很多记录 数据表过大")])]),t._v(" "),n("p",[t._v("寻找合适执行计划")]),t._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[n("p",[t._v("(如果是join 选择表单连接顺序)")])]),t._v(" "),n("li",[n("p",[t._v("对于where 进行重写,删除不必要的代码,减少不要计算量,尽可能的限制条件 方便查询有效键执行"),n("br"),t._v("\n4.1 (join)删除不需要的连接的数据表")])]),t._v(" "),n("li",[n("p",[t._v("确定键是否可以用在order group")])])]),t._v(" "),n("p",[t._v("5.1 (join)合并大的视图")]),t._v(" "),n("ol",{attrs:{start:"6"}},[n("li",[t._v("执行执行计划")])]),t._v(" "),n("p",[t._v("优化器的算法")]),t._v(" "),n("p",[t._v("存储过程 => 是否经过优化器 => 预编译 =>事先通过 (解析器和优化器编译完的sql语句)")]),t._v(" "),n("h3",{attrs:{id:"_4-行转列与源码点点的扩展"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-行转列与源码点点的扩展"}},[t._v("#")]),t._v(" 4. 行转列与源码点点的扩展")]),t._v(" "),n("h4",{attrs:{id:"_4-1-行转列"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-行转列"}},[t._v("#")]),t._v(" 4.1 行转列")]),t._v(" "),n("div",{staticClass:"language-sql extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("TEST_TB_GRADE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("ID"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("USER_NAME"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("COURSE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("SCORE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("float")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PRIMARY")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("KEY")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("ID"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENGINE")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("InnoDB")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARSET")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf8"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" TEST_TB_GRADE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("USER_NAME"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" COURSE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" SCORE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("values")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"张三"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"数学"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("34")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"张三"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"语文"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("58")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"张三"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"英语"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("58")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"李四"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"数学"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"李四"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"语文"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("87")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"李四"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"英语"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"王五"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"数学"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("76")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"王五"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"语文"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("34")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"王五"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"英语"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("89")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" TEST_TB_GRADE\n\n行转列\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" user_name "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("MAX")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CASE")]),t._v(" course "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHEN")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数学'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("THEN")]),t._v(" score "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ELSE")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("END")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 数学"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("MAX")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CASE")]),t._v(" course "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHEN")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'语文'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("THEN")]),t._v(" score "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ELSE")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("END")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 语文"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("MAX")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CASE")]),t._v(" course "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHEN")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'英语'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("THEN")]),t._v(" score "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ELSE")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("END")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 英语\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" test_tb_grade\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("GROUP")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" USER_NAME"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v("                   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-------------如果")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("when")]),t._v(" sex"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'男'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-------------sex='1'，则返回值'男'")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("when")]),t._v(" sex"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'女'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-------------sex='2'，则返回值'女'")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("                 "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-------------其他的返回'其他’")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("                    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-------------结束")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" sys_user            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--------整体理解： 在sys_user表中如果sex='1'，则返回值'男'如果sex='2'，则返回值'女' 否则返回'其他’")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Max")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("列名"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("，可以用于统计某一列的最大值。\n")])])]),n("h4",{attrs:{id:"_4-2-源码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-源码"}},[t._v("#")]),t._v(" 4.2 源码")]),t._v(" "),n("p",[t._v("table 结构定义数据库表描述符。当表打开了之后服务器就会创建表描述符，并放入到表缓存中以便以后使用。")]),t._v(" "),n("p",[t._v("分析器、优化器、访问控制和查询缓存在执行SQL的过程中常常会使用到表实例。它以各种方式将各种事物胶合在一起")]),t._v(" "),n("p",[t._v("表的结构主要定义在源码sql/table.h中被定义为 struct ST_SCHEMA_TABLE 以及sql/handler.h 中的typedef给出别名表")]),t._v(" "),n("p",[t._v("table类的成员")])])}),[],!1,null,null,null);s.default=r.exports},735:function(t,s,a){t.exports=a.p+"assets/img/markdown-img-paste-20190524221224413.a224ef4b.png"},736:function(t,s,a){t.exports=a.p+"assets/img/markdown-img-paste-20190524223913303.e9d77439.png"}}]);
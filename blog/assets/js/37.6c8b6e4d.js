(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{1244:function(s,t,a){"use strict";a.r(t);var e=a(19),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"视图-存储过程-触发器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#视图-存储过程-触发器"}},[s._v("#")]),s._v(" 视图，存储过程，触发器")]),s._v(" "),e("h4",{attrs:{id:"面试题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#面试题"}},[s._v("#")]),s._v(" 面试题")]),s._v(" "),e("p",[s._v("面试你所要知道的: MySQL存储过程 https://blog.csdn.net/u012190514/article/details/80282161")]),s._v(" "),e("h4",{attrs:{id:"序言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#序言"}},[s._v("#")]),s._v(" 序言")]),s._v(" "),e("p",[s._v("mysql 的CURD的基础内容在这里就跳过，关于select，update，delete，insert的基础使用以及select的复杂查询在本节中将会跳过")]),s._v(" "),e("h4",{attrs:{id:"课程内容"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#课程内容"}},[s._v("#")]),s._v(" 课程内容")]),s._v(" "),e("ol",[e("li",[s._v("视图")]),s._v(" "),e("li",[s._v("存储过程")]),s._v(" "),e("li",[s._v("触发器")])]),s._v(" "),e("h4",{attrs:{id:"数据表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据表"}},[s._v("#")]),s._v(" 数据表")]),s._v(" "),e("p",[s._v("结构")]),s._v(" "),e("p",[e("img",{attrs:{src:a(773),alt:""}})]),s._v(" "),e("p",[s._v("数据"),e("br"),s._v(" "),e("img",{attrs:{src:a(774),alt:""}})]),s._v(" "),e("h2",{attrs:{id:"_1-视图"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-视图"}},[s._v("#")]),s._v(" 1. 视图")]),s._v(" "),e("h4",{attrs:{id:"_1-1-概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-概念"}},[s._v("#")]),s._v(" 1.1 概念")]),s._v(" "),e("ol",[e("li",[s._v("视图是 MySQL 在 5.0.1 版本中加入的功能。它可以理解为一个虚表。")]),s._v(" "),e("li",[s._v("之所以被称为虚表，是因为它只是存储了一个结构，并不存储真实的数据。它的数据是在查询过程中动态生成的。")]),s._v(" "),e("li",[s._v("视图并不是真的优化")])]),s._v(" "),e("h4",{attrs:{id:"_1-2-创建视图"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-创建视图"}},[s._v("#")]),s._v(" 1.2 创建视图")]),s._v(" "),e("p",[s._v("视图 只是存储了一个结构，并不存储真实的数据。")]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 创建视图")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VIEW")]),s._v(" user_view "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("user_name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("email "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),e("h4",{attrs:{id:"_1-3-查看视图"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-查看视图"}},[s._v("#")]),s._v(" 1.3 查看视图")]),s._v(" "),e("p",[s._v("和表一样，我们可以用 desc 视图名; 来查看视图的每一列")]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v(" user_view"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 查看创建的视图语法")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("view")]),s._v(" user_view"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 查询视图内容")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_view"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),e("p",[e("img",{attrs:{src:a(775),alt:""}})]),s._v(" "),e("p",[e("strong",[s._v(">")]),s._v(" 注意：视图查询的数据实则来自与源数据中的内容，而它本质是一个存储了一个结构，并不是存储真实的数据。")]),s._v(" "),e("p",[e("strong",[s._v(">")]),s._v(" 比如：如同PHP中的一个查询方法的封装")]),s._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token php language-php"}},[e("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("<?php")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("db")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("select")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'sql: select id,user_name,email from `user`'")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("?>")])]),s._v("\n")])])]),e("h4",{attrs:{id:"_1-4-视图优点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-视图优点"}},[s._v("#")]),s._v(" 1.4 视图优点")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("第一个显著优点就是它简化了操作。此时我们完全不用关心视图是怎么处理数据的，我们只需要知道如何使用这个结果集即可，视图相当于一个中间层。")])]),s._v(" "),e("li",[e("p",[s._v("第二个显著优点就是它更加安全。比如我们可以让用户有权去访问某个视图，但是不能访问原表，这样就可以起到保护原表中某些数据的作用。")])]),s._v(" "),e("li",[e("p",[s._v("我们之后会接触到管理权限，权限是无法细致到某一个列的，通过视图，则很容易实现。")])]),s._v(" "),e("li",[e("p",[s._v("第三个显著优点就是降低耦合。假如我们以后要修改原表的结构，那么我们可以通过修改视图的定义即可，而不用修改应用程序，对访问者是不会造成影响的，一般来说，这样代价会更小。")])])]),s._v(" "),e("h4",{attrs:{id:"_1-5-视图缺点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-视图缺点"}},[s._v("#")]),s._v(" 1.5 视图缺点")]),s._v(" "),e("ol",{attrs:{start:"5"}},[e("li",[s._v("表结构修改则需要手动修改视图")])]),s._v(" "),e("h4",{attrs:{id:"_1-6-视图iud"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-视图iud"}},[s._v("#")]),s._v(" 1.6 视图IUD")]),s._v(" "),e("p",[s._v("表是可以更新数据的，这里的更新，指的是”增删改”, 但是对于视图来说 "),e("em",[s._v("不一定")]),s._v("。")]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" email "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("00")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_view"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 删除视图")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VIEW")]),s._v(" user_view_2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),e("p",[e("em",[s._v("以下是视图不可更新的情况")])]),s._v(" "),e("ol",[e("li",[s._v("包含聚合函数、distinct、group by、having、union、union all。")]),s._v(" "),e("li",[s._v("常量视图。")]),s._v(" "),e("li",[s._v("select 包含子查询。")]),s._v(" "),e("li",[s._v("包含连接操作。")]),s._v(" "),e("li",[s._v("from 一个不能更新的视图。")]),s._v(" "),e("li",[s._v("where 子句的子查询引用了 from 子句中的表。")])]),s._v(" "),e("p",[s._v("自个测试...")]),s._v(" "),e("p",[e("em",[s._v("更新视图的注意点")]),e("br"),s._v("\n如下数据"),e("br"),s._v(" "),e("img",{attrs:{src:a(776),alt:""}})]),s._v(" "),e("p",[s._v("创建一个新的视图")]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("view")]),s._v(" user_view_2 "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("user_name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("password"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("email"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_view_2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),e("p",[s._v("现在如果给这个视图新增数据 status = 1；")]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" user_view_2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user_name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" password"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" email"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'221'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'12'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'12'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_view_2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),e("p",[s._v("你会发现我们可以向该视图插入数据，它不满足本视图的要求，但是数据可以插入基表了。在前面也有所讲过该操作有点类似于PHP的代码封装的操作。我们把该视图的操作转化为PHP 方法就是如下")]),s._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token php language-php"}},[e("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("<?php")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("select")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$status")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"sql: select id,user_name,password,email,status from `user` where status = 0"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("?>")])]),s._v("\n")])])]),e("p",[s._v("但是有些时候的我们不希望这种情况的发生，如果不满足视图的条件就不插入，就和PHP方法的条件判断一样")]),s._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token php language-php"}},[e("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("<?php")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$status")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'insert'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("?>")])]),s._v("\n")])])]),e("p",[e("em",[s._v("with check option")])]),s._v(" "),e("ol",[e("li",[e("p",[s._v("对于上面的表 t2，我们想：是否可以创建一个视图，它只允许修改满足本视图要求的数据，而对于不满足本视图要求的数据操作， 统统拒绝呢？")])]),s._v(" "),e("li",[e("p",[s._v("答案是肯定的。那就需要 with check option 了，不过该修饰符还有更加深一步的权限机制。")])]),s._v(" "),e("li",[e("p",[s._v("首先我们还是利用上一步的 t2，我们创建一个视图 v3，它的创建")])])]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VIEW")]),s._v(" user_view_2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("view")]),s._v(" user_view_2 "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("user_name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("password"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("email"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("check")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("option")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" user_view_2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user_name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" password"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" email"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'221'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'12'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'12'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),e("p",[s._v("错误信息"),e("br"),s._v(" "),e("code",[s._v("[Err] 1369 - CHECK OPTION failed 'community.user_view_2'")])]),s._v(" "),e("blockquote",[e("p",[s._v("这里可以理解为 with check option 的作用就是多了一个 check 的功能，即检查的功能，也就是说插入的数据必须满足该视图的条件，才允许被操作。")])]),s._v(" "),e("h4",{attrs:{id:"_1-7-视图应用-好处"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-视图应用-好处"}},[s._v("#")]),s._v(" 1.7 视图应用&好处")]),s._v(" "),e("ol",[e("li",[s._v("提高了重用性，就像一个函数 如果要频繁获取user的name和goods的name。就应该使用以下sql语言。示例：")])]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("\n    &nbsp; &nbsp; &nbsp; select a.name as username, b.name as goodsname from user as a, goods as b, ug as c where a.id=c.userid and c.goodsid=b.id;<br>\n")])])]),e("p",[s._v("但有了视图就不一样了，创建视图other。示例")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("\n    &nbsp; &nbsp; &nbsp; create view other as select a.name as username, b.name as goodsname from user as a, goods as b, ug as c where a.id=c.userid and c.goodsid=b.id;<br>\n")])])]),e("p",[s._v("创建好视图后，就可以这样获取user的name和goods的name。示例：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("\n    &nbsp; &nbsp; &nbsp; select * from other;<br>\n")])])]),e("p",[s._v("以上sql语句，就能获取user的name和goods的name了。")]),s._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[e("p",[s._v("对数据库重构，却不影响程序的运行假如因为某种需求，需要将user拆房表usera和表userb，该两张表的结构如下")]),s._v(" "),e("p",[s._v("测试表:usera有id，name，age字段"),e("br"),s._v("\n测试表:userb有id，name，sex字段")])])]),s._v(" "),e("p",[s._v("这时如果php端使用sql语句：select * from user; 那就会提示该表不存在，这时该如何解决呢。解决方案：创建视图。以下sql语句创建视图：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("  create view user as select a.name,a.age,b.sex from usera as a, userb as b where a.name=b.name; 以上假设name都是唯一的。此时php端使用sql语句：select * from user;就不会报错什么的。这就实现了更改数据库结构，不更改脚本程序的功能了。\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[e("p",[s._v("提高了安全性能。可以对不同的用户，设定不同的视图。例如：某用户只能获取user表的name和age数据，不能获取sex数据。则可以这样创建视图。示例如下：")]),s._v(" "),e("p",[s._v("create view other as select a.name, a.age from user as a;")])])]),s._v(" "),e("p",[s._v("这样的话，使用sql语句：select * from other; 最多就只能获取name和age的数据，其他的数据就获取不了了。")]),s._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[s._v("让数据更加清晰想要什么样的数据，就创建什么样的视图。经过以上三条作用的解析，这条作用应该很容易理解了吧")])]),s._v(" "),e("h2",{attrs:{id:"_2-触发器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-触发器"}},[s._v("#")]),s._v(" 2. 触发器")]),s._v(" "),e("ol",[e("li",[s._v("创建触发器：")])]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("触发器  类似于 框架 事件\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("trigger")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("触发器名称"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("触发器的执行时间"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("执行的动作点"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("表名"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for each row")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("函数 或者动作"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n触发器的执行时间 :before"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("after")]),s._v("\n执行的动作点:"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("delete")]),s._v("\n函数:"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n或者动作:"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v("\n")])])]),e("h4",{attrs:{id:"_2-1-案例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-案例"}},[s._v("#")]),s._v(" 2.1 案例：")]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("trigger")]),s._v("\n    login_trigger_before\nbefore "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v("\n    login\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for each row")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" test_trigger "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" count "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" count"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 代码区域")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" login_view "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'uuu'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),e("h2",{attrs:{id:"_3-存储过程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-存储过程"}},[s._v("#")]),s._v(" 3. 存储过程")]),s._v(" "),e("p",[s._v("对数据进行计算，分析汇总的时候，尤其是拿到别的公司数据的时候，进行转换为自己系统需要的数据和格式的时候")]),s._v(" "),e("h4",{attrs:{id:"_3-1-概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-概念"}},[s._v("#")]),s._v(" 3.1 概念")]),s._v(" "),e("p",[s._v("存储过程和函数可以理解为一段 SQL 语句的集合，它们被事先编译好并且存储在数据库中。在 Pascal 语言中，是有”过程”和”函数”的区分的，过程可以理解为没有返回值的函数。不过在 C 家族语言中，则没有过程这个概念， 统一为函数。")]),s._v(" "),e("p",[s._v("创建一个存储过程的语法为：")]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("procedure")]),s._v(" 存储过程名"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("参数列表"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),s._v("\n    存储过程体\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("call")]),s._v(" 存储过程名"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("参数列表"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),e("p",[s._v("如下简单存储过程")]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PROCEDURE")]),s._v(" user_procedure"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PROCEDURE")]),s._v(" user_procedure"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" x "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- in 表示输入")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 执行")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("call")]),s._v(" user_procedure"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),e("p",[e("em",[s._v("参数类型")])]),s._v(" "),e("ol",[e("li",[e("p",[s._v("从上面的过程中我们了解到存储过程有参数类型这种说法，它的类型可以取值有三个：in、out、inout。")])]),s._v(" "),e("li",[e("p",[s._v("其中它们的意义如下：")])])]),s._v(" "),e("p",[s._v("(1) in 表示只是用来输入。")]),s._v(" "),e("p",[s._v("(2) out 表示只是用来输出。")]),s._v(" "),e("p",[s._v("(3) inout 可以用来输入，也可以用作输出。")]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PROCEDURE")]),s._v(" user_procedure_out"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PROCEDURE")]),s._v(" user_procedure_out"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" x "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("out")]),s._v(" y "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" user_name "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" y "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v("\n   "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 执行")]),s._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("call")]),s._v(" user_procedure_out"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@a")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@a")]),s._v("\n")])])]),e("h4",{attrs:{id:"_3-2-存储过程理解"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-存储过程理解"}},[s._v("#")]),s._v(" 3.2 存储过程理解")]),s._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[e("p",[s._v("调用存储过程与直接执行 SQL 语句的效果是相同的，但是存储过程的一个好处是处理逻辑都封装在数据库端。")])]),s._v(" "),e("li",[e("p",[s._v("当我们调用存储过程的时候，我们不需要了解其中的处理逻辑，一旦处理逻辑发生变化，只需要修改存储过程即可，对调用它的程 序完全无影响。")])]),s._v(" "),e("li",[e("p",[s._v("调用存储过程和函数可以简化应用开发人员的很多工作，减少数据在数据库和应用服务器之间的传输，可以提高数据处理的效率")])])]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PROCEDURE")]),s._v(" user_procedure_out"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),e("h4",{attrs:{id:"_3-3-变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-变量"}},[s._v("#")]),s._v(" 3.3 变量")]),s._v(" "),e("ol",{attrs:{start:"6"}},[e("li",[e("p",[s._v("存储过程中是可以使用变量的，我们可以通过 declare 来定义一个局部变量，该变量的作用域只是 begin....end 块中。")])]),s._v(" "),e("li",[e("p",[s._v("变量的定义必须写在符合语句的开头，并且在任何其他语句的前面。我们可以一次声明多个相同类型的变量，我们还可以使用default 来赋予默认值。")])]),s._v(" "),e("li",[e("p",[s._v("定义一个变量的语法为： declare 变量名 1 [,变量名 2...] 变量类型 [default 默认值]")])]),s._v(" "),e("li",[e("p",[s._v("上面的变量类型就是 MySQL 支持的类型，而变量名的取值规则也是一个老生常谈的话题了，就不赘述了。")])]),s._v(" "),e("li",[e("p",[s._v("变量可以直接赋值，还可以通过查询赋值。")])]),s._v(" "),e("li",[e("p",[s._v("直接赋值就是使用 set 来进行赋值，它的语法为： set 变量名 1 = 表达式 1 [,变量名 2=表达式 2...]")])]),s._v(" "),e("li",[e("p",[s._v("也可以通过查询来将结果赋值给变量，它需要要求查询返回的结果只有一行，语法范例："),e("code",[s._v("select 列名列表 into 变量列表 from 表名 其他语句；")])])])]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PROCEDURE")]),s._v(" user_procedure_2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PROCEDURE")]),s._v(" user_procedure_2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" x "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("out")]),s._v(" y "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("declare")]),s._v(" s "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" user_name "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" s "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" y "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" s"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 执行")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("call")]),s._v(" user_procedure_2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@a")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@a")]),s._v("\n")])])]),e("h4",{attrs:{id:"_3-4-存储过程中的数据类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-存储过程中的数据类型"}},[s._v("#")]),s._v(" 3.4 存储过程中的数据类型")]),s._v(" "),e("ol",[e("li",[s._v("数值类型：Int,float,double,decimal")]),s._v(" "),e("li",[s._v("日期类型：timestamp,date,year")]),s._v(" "),e("li",[s._v("字符串：char,varchar,text")])]),s._v(" "),e("p",[s._v("timestamp: 是使用最多的数据类型-》十位数的时间戳 text：一旦用到text类型的时候就可以考虑分表； 如果部分表的话，该字段的查询不会直接放在一起查询，因为多个字段查询中其中如果有text字段的话，就容易遇到慢查询 所以通常的话，如果需要这个值的时候会根据id单独拿这个text字段")]),s._v(" "),e("h4",{attrs:{id:"_3-5-流程控制语句其他语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-流程控制语句其他语法"}},[s._v("#")]),s._v(" 3.5 流程控制语句其他语法")]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" 的语法格式为：\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" 条件表达式 "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" 语句\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("elseif")]),s._v(" 条件表达式 "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" 语句"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" 语句"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" 的语法格式\n首先是第一种写法：\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" 表达式\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("when")]),s._v(" 值 "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" 语句\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("when")]),s._v(" 值 "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" 语句\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" 语句"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v("\n然后是第二种写法：\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("when")]),s._v(" 表达式 "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" 语句\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("when")]),s._v(" 表达式 "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" 语句\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" 语句"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("loop")]),s._v(" 循环 语法格式为：\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("标号:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("loop")]),s._v("\n    循环语句\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("loop")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("标号"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" a"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n 循环语句\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("End")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Repeat")]),s._v("        "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//游标")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SQL")]),s._v("语句"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  UNTIL 条件表达式\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Repeat")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Loop")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SQL")]),s._v("语句\n  所有的条件判断和跳出需要自己实现\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("End")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("loop")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("leave")]),s._v(" 语句用来从标注的流程构造中退出，它通常和 "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v(" 或循环一起使用\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("leave")]),s._v(" 标号"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n声明语句结束符，可以自定义:\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELIMITER")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("符合"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("delimiter")]),s._v(" $$\n\n$$\n")])])]),e("h4",{attrs:{id:"_3-6-游标"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-游标"}},[s._v("#")]),s._v(" 3.6 游标")]),s._v(" "),e("ol",[e("li",[s._v("游标也有的资料上称为光标。")]),s._v(" "),e("li",[s._v("我们可以在存储过程中使用游标来对结果集进行循环的处理。")]),s._v(" "),e("li",[s._v("游标的使用步骤基本分为：声明、打开、取值、关闭。")])]),s._v(" "),e("p",[e("em",[s._v("语法：")])]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" test_cursor "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CURSOR")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" 结果集"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//声明游标")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OPEN")]),s._v(" test_cursor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("                        "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//打开游标")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CLOSE")]),s._v(" test_cursor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("                        "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//关闭游标")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CONTINUE")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("HANDLER")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" FOUND    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//结果集查询不到数据自动跳出")]),s._v("\n")])])]),e("p",[e("em",[s._v("总结：")])]),s._v(" "),e("ol",[e("li",[s._v("游标的声明的语法： declare 游标名称 cursor for 查询语句;")]),s._v(" "),e("li",[s._v("打开光标的语法： open 游标名称;")]),s._v(" "),e("li",[s._v("获取游标数据： fetch 游标名称 into 变量名 1 [,变量名 2 ....]")]),s._v(" "),e("li",[s._v("关闭游标的语法： close 游标名称;")]),s._v(" "),e("li",[s._v("游标的基本使用须知：对某个表按照循环的处理，判断循环结束 的条件是捕获 not found 的条件，当 fetch 光标找不到下一条记录的 时候，就会关闭光标然后退出过程。")]),s._v(" "),e("li",[s._v("可能有过 Pascal 编程经验的朋友们都会知道，声明的顺序也是很 重要的，在 SQL 中，我们使用 declare 定义的顺序是：变量、条件、 游标、应用程序")])]),s._v(" "),e("p",[e("em",[s._v("操作")]),s._v(" 查询出来的数据会放置于临时表中，然后再通过游标去读取数据。")]),s._v(" "),e("p",[e("em",[s._v("案例")])]),s._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("delimiter")]),s._v(" $$\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("procedure")]),s._v(" exchange"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("out")]),s._v(" count "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("declare")]),s._v(" supply_id1 "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("declare")]),s._v(" amount1 "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 游标标识")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("declare")]),s._v(" blag "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 游标")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("declare")]),s._v(" order_cursor "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("cursor")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" supply_id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("amount "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" order_group"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- not found  这个异常进行处理")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("declare")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("continue")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("handler")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" found "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" blag "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" count "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 打开游标")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("open")]),s._v(" order_cursor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 遍历")]),s._v("\n    read_loop: "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LOOP")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fetch")]),s._v(" order_cursor "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" supply_id1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("amount1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" blag "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n            "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("leave")]),s._v(" read_loop"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" supply_id1 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n            "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" count "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" count "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" amount1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("loop")]),s._v(" read_loop"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n$$\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("delimiter")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("call")]),s._v(" exchange"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@count")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@count")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),e("h4",{attrs:{id:"存储过程优点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#存储过程优点"}},[s._v("#")]),s._v(" 存储过程优点")]),s._v(" "),e("ol",[e("li",[s._v("第一点优势就是执行速度快。因为我们的每个 SQL 语句都需要经 过编译，然后再运行，但是存储过程都是直接编译好了之后，直接 运行即可。")]),s._v(" "),e("li",[s._v("第二点优势就是减少网络流量。我们传输一个存储过程比我们传 输大量的 SQL 语句的开销要小得多。")]),s._v(" "),e("li",[s._v("第三点优势就是提高系统安全性。因为存储过程可以使用权限控 制，而且参数化的存储过程可以有效地防止 SQL 注入攻击。保证了 其安全性。")]),s._v(" "),e("li",[s._v("第四点优势就是耦合性降低。当我们的表结构发生了调整或变动 之后，我们可以修改相应的存储过程，我们的应用程序在一定程度 上需要改动的地方就较小了。 44 / 123")]),s._v(" "),e("li",[s._v("第五点优势就是重用性强。因为我们写好一个存储过程之后，再 次调用它只需要一个名称即可，也就是”一次编写，随处调用”,而且 使用存储过程也可以让程序的模块化加强。")])]),s._v(" "),e("h4",{attrs:{id:"_3-7-存储过程的缺点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-存储过程的缺点"}},[s._v("#")]),s._v(" 3.7 存储过程的缺点")]),s._v(" "),e("ol",[e("li",[s._v("第一个缺点就是移植性差。因为存储过程是和数据库绑定的，如 果我们要更换数据库之类的操作，可能很多地方需要改动。")]),s._v(" "),e("li",[s._v("第二个缺点就是修改不方便。因为对于存储过程而言，我们并不 能特别有效的调试，它的一些 bug 可能发现的更晚一些，增加了应 用的危险性。")]),s._v(" "),e("li",[s._v("第三个缺点就是优势不明显和赘余功能。对于小型 web 应用来说， 如果我们使用语句缓存，发现编译 SQL 的开销并不大，但是使用存 储过程却需要检查权限一类的开销，这些赘余功能也会在一定程度 上拖累性能。")])]),s._v(" "),e("h4",{attrs:{id:"_3-8-php中的应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-8-php中的应用"}},[s._v("#")]),s._v(" 3.8 php中的应用")]),s._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token php language-php"}},[e("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("<?php")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("require_once")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'db.php'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// $sql = 'create procedure login_procedure_4 (in id int, out ret varchar(10))")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// begin")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     declare y int default 0;")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     select shop_name into ret from shop where uid = id;")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//     set ret = "ttt";')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   if y = 0 then")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//     set ret = "xxxxx";')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   end if;")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// end';")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// $db->execute($sql);")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// $sql = 'call login_procedure_3(87, @ret)';")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// var_dump($db->call($sql, 'select @ret'));")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// echo '成功';")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 游标")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 声明")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*\ndeclare xxx\n\ndeclare 游标名 cursor for 查询语句 [select xx,xx,x,x from table_name];\nopen 游标名 -- 打开\nfetch 游标名 into xxx,\n\n业务处理\n\nclose 游标名\n */")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$sql")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'\n create procedure login_procedure_5 (in id int, out ret varchar(10))\n begin\n     declare id int default 0;\n  -- 游标标识\n  declare blag int default 1;\n  declare name varchar(10) default 0;\n     declare shop_cursor cursor for select shop_name,uid from shop;\n\n  -- 异常处理 :注意游标在读取数据的时候,不断读取\n  declare continue handler for not found set blag = 0;\n\n  open shop_cursor; -- 打开\n\n  read_loop:loop\n    fetch shop_cursor into name,id;\n    if blag = 0 then\n      leave read_loop;\n    end if;\n\n    if id = 63 then\n      set ret = name;\n    end if;\n  end loop read_loop;\n end'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// $db->execute($sql);")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$sql1")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'call login_procedure_5(87, @ret)'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("var_dump")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$db")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("call")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$sql1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'select @ret'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'成功'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("?>")])]),s._v("\n")])])]),e("h4",{attrs:{id:"_3-9-小结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-9-小结"}},[s._v("#")]),s._v(" 3.9 小结")]),s._v(" "),e("ol",[e("li",[s._v("存储过程和函数的优势是可以将数据的处理放在数据库服务器上 进行，避免将大量的结果集传输给客户端，减少了数据的传输，因 此也减少了宽带和服务器的压力。")]),s._v(" "),e("li",[s._v("但是在数据库服务器上进行大量的运算也会占用服务器的 CPU， 造成数据库服务器的压力。")]),s._v(" "),e("li",[s._v("一般来说是不建议在存储过程中进行大量的复杂的运算的，它们 不是数据库服务器的强项，我们应该把这些操作让应用服务器去处 理。")])]),s._v(" "),e("h4",{attrs:{id:"_3-10-例子"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-10-例子"}},[s._v("#")]),s._v(" 3.10 例子")]),s._v(" "),e("p",[e("img",{attrs:{src:a(777),alt:""}})]),s._v(" "),e("p",[s._v("可以尝试用存储过程实现一下不用在以数据量"),e("br"),s._v(" "),e("img",{attrs:{src:a(778),alt:""}})]),s._v(" "),e("h2",{attrs:{id:"_3-物化视图"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-物化视图"}},[s._v("#")]),s._v(" 3. 物化视图")]),s._v(" "),e("p",[s._v("物化视图是相对于视图而言的，但是两者实际上并没有什么关系就如java/javaScript一样")]),s._v(" "),e("p",[s._v("首先mysql的视图不是一种物化视图，他相当于一个虚拟表，本身并不存储数据，当sql在操作视图时所有数据都是从其他表中查询出来的。者带来的问题是使用视图并不能将常用数据分离出来，优化查询速度，切操作视图的很多命令和普通标一样，这回导致在业务中无法通过sql区分表和视图，是代码变得复杂。")]),s._v(" "),e("p",[s._v("视图是简化设计，清晰编码的东西，他并不是提高性能的，他的存在只会降低性能（如一个视图7个表关联，另一个视图8个表，程序员不知道，觉得很方便，把两个视图关联再做一个视图，那就惨了），他的存在未了在设计上的方便性")]),s._v(" "),e("p",[s._v("物化视图可以帮助加快严重依赖某些聚合结果的查询。 如果插入速度不是问题，则此功能可以帮助减少系统上的读取负载。")]),s._v(" "),e("p",[s._v("物化视图: 触发器, 存储过程, 变量")]),s._v(" "),e("p",[s._v("创建一个实体的表 物化视图 表 记录: 查询的结果,")]),s._v(" "),e("p",[s._v("查询 物化视图 表 ==>聚合结果集")]),s._v(" "),e("p",[s._v("数据: 实时性一致性 触发器 INSERT UPDATE DELTE 物化视图")]),s._v(" "),e("p",[s._v("定时 对存储过程")]),s._v(" "),e("p",[s._v("存储过程的应用: OA, ERP 对数据进行计算, 分析汇总,")])])}),[],!1,null,null,null);t.default=n.exports},773:function(s,t,a){s.exports=a.p+"assets/img/2021-05-14-16-46-24.d8dae70d.png"},774:function(s,t,a){s.exports=a.p+"assets/img/2021-05-14-16-46-31.53ad7d1e.png"},775:function(s,t){s.exports="data:image/png;base64,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"},776:function(s,t,a){s.exports=a.p+"assets/img/2021-05-14-16-46-54.19adc297.png"},777:function(s,t,a){s.exports=a.p+"assets/img/2021-05-14-16-47-35.47b2ec21.png"},778:function(s,t,a){s.exports=a.p+"assets/img/2021-05-14-16-47-42.7051988d.png"}}]);
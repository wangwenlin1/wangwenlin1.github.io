(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{1241:function(s,t,a){"use strict";a.r(t);var r=a(19),e=Object(r.a)({},(function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[r("h1",{attrs:{id:"sql优化案例实践"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#sql优化案例实践"}},[s._v("#")]),s._v(" SQL优化案例实践")]),s._v(" "),r("p",[s._v("MySQL5.7 中文文档 https://www.docs4dev.com/docs/zh/mysql/5.7/reference/group-by-handling.html")]),s._v(" "),r("p",[r("img",{attrs:{src:a(754),alt:""}})]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[s._v("  根据数据表的一些建立的规则稍加调整一下数据表中的字段\n\n  单表\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("customers1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 身份证")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 姓名")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 城市名")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 性别：M（男），G（女）")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gender"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("tinyint")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 出生日期")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("birthdate"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("date")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 手机号")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mobile"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 照片")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("photo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 月薪")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("monthsalary"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("decimal")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 年奖金额")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("decimal")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CHARSET")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8\n  分表\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("customers"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gender"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("tinyint")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("birthdate"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("date")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mobile"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("photo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CHARSET")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8\n\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("salary"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("monthsalary"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("decimal")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("decimal")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CHARSET")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8\n\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("force")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("PRI"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("强制使用主键"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ignore")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("PRI"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("禁止使用主键"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),r("h3",{attrs:{id:"_1-没有主键的表的问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-没有主键的表的问题"}},[s._v("#")]),s._v(" 1. 没有主键的表的问题")]),s._v(" "),r("p",[s._v("没有主键索引的情况：https://www.jianshu.com/p/6c70402993eb"),r("br"),s._v("\n大家可以看看这个链接吧,相对来说更加的详细")]),s._v(" "),r("h3",{attrs:{id:"_2-列出没有手机号码-或者没有照片-或者没有年奖金的客户姓名"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-列出没有手机号码-或者没有照片-或者没有年奖金的客户姓名"}},[s._v("#")]),s._v(" 2. 列出没有手机号码，或者没有照片，或者没有年奖金的客户姓名")]),s._v(" "),r("p",[s._v("对于数据表调整，把一些允许为空的字段修改为 0 或其他特殊字符代替，这里我们把一些字段改为默认值为0表示null：解释")]),s._v(" "),r("p",[s._v("尽量避免NULL很多表都包含可为NULL（空值）的列，即使应用程序并不需要保存NULL也是如此，这是因为可为NULL是列的默认属性。通常情况下最好指定列为NOTNULL，除非真的需要存储NULL值。")]),s._v(" "),r("p",[s._v("如果查询中包含可为NULL的列，对MySQL来说更难优化，因为可为NULL的列使得索引、索引统计和值比较都更复杂。可为NULL的列会使用更多的存储空间，在MySQL里也需要特殊处理。当可为NULL的列被索引时，每个索引记录需要一个额外的字节，在MyISAM里甚至还可能导致固定大小的索引（例如只有一个整数列的索引）变成可变大小的索引。")]),s._v(" "),r("p",[s._v("通常把可为NULL的列改为NOT NULL带来的性能提升比较小，所以（调优时）没有必要首先在现有schema中查找并修改掉这种情况，除非确定这会导致问题。但是，如果计划在列上建索引，就应该尽量避免设计成可为NULL的列。")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" yearbonus  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" yearbonus  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("is")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" mobile "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" mobile "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("is")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" photo  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" wher e photo  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("is")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("photo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("mobile"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("yearbonus "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" photo "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v(" mobile "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v(" yearbonus "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),r("p",[s._v("如上便是我们所需要执行的SQL语句，也就是说实际上我们所进行的优化就是针对于or的请下的优化")]),s._v(" "),r("p",[s._v("通过explain分析一下上面的SQL")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[s._v("mysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("photo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("mobile"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("yearbonus "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" photo "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v(" mobile "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v(" yearbonus "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+------------+------------+------+---------------+------+---------+------+---------+----------+-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+------------+------------+------+---------------+------+---------+------+---------+----------+-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1310946")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("27.10")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+------------+------------+------+---------------+------+---------+------+---------+----------+-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.04")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" table_name\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------------+------------+-----------------------------+--------------+-------------+-----------+-------------+------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Table")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Non_unique "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Key_name                    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Seq_in_index "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Column_name "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Collation "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Cardinality "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Index_type "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------------+------------+-----------------------------+--------------+-------------+-----------+-------------+------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v("                     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id          "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1310881")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_gender_city_monthsalary "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" gender      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("           "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_gender_city_monthsalary "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" city        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_gender_city_monthsalary "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" monthsalary "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1310946")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------------+------------+-----------------------------+--------------+-------------+-----------+-------------+------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),r("p",[s._v("分别对于上面三个条件定义单独的索引")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_photo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("photo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_mobile"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mobile"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nmysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customers1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------------+------------+-----------------------------+--------------+-------------+-----------+-------------+------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Table")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Non_unique "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Key_name                    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Seq_in_index "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Column_name "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Collation "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Cardinality "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Index_type "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------------+------------+-----------------------------+--------------+-------------+-----------+-------------+------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v("                     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id          "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1310881")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_gender_city_monthsalary "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" gender      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("           "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_gender_city_monthsalary "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" city        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_gender_city_monthsalary "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" monthsalary "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1310946")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_photo                   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" photo       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("           "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_mobile                  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" mobile      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("697873")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_yearbonus               "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" yearbonus   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("        "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("9996")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------------+------------+-----------------------------+--------------+-------------+-----------+-------------+------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n然后再通过分析\nmysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("photo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("mobile"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("yearbonus "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" photo "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v(" mobile "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v(" yearbonus "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" \\G"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n           id: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  select_type: "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(": customers1\n   partitions: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n         "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v("\npossible_keys: idx_photo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("idx_mobile"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("idx_yearbonus\n          "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n      key_len: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n          ref: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n         "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1310946")]),s._v("\n     filtered: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("27.10")]),s._v("\n        Extra: "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("warnings")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),r("p",[s._v("发现并没有使用到所以定一点的索引，主要是因为出现多个索引做联合操作是（多个OR条件），对结果的合并、排序等操作需要费大量的CPU和内存资源，特别是当其中的某些索引的选择性不高，需要返回合并大量数据时，查询成本更高。所以这种情况下还不如走全表扫描。")]),s._v(" "),r("p",[s._v("官方对于OR的解释 https://dev.mysql.com/doc/refman/5.7/en/index-merge-optimization.html")]),s._v(" "),r("p",[s._v("可以通过union all / union 进行优化，union all 主要是将两个select语句的结果作为一个整体显示出来")]),s._v(" "),r("p",[s._v("union和union all的区别是,union会自动压缩多个结果集合中的重复结果，而union all则将所有的结果全部显示出来，不管是不是重复。")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[s._v("通过"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v("分析\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" name "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" photo "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("union")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" name "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" mobile "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("union")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" name "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" yearbonus "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+------------+------+---------------+---------------+---------+-------+--------+----------+-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v("           "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+------------+------+---------------+---------------+---------+-------+--------+----------+-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_photo     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("577859")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.00")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UNION")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_mobile    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("577859")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.00")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UNION")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_yearbonus "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_yearbonus "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" const "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("288929")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100.00")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+------------+------+---------------+---------------+---------+-------+--------+----------+-------------+")]),s._v("\n")])])]),r("p",[s._v("索引使用注意："),r("font",{attrs:{color:"red"}},[s._v("1. 字符串字段索引值不加引号会失效")])],1),s._v(" "),r("p",[s._v("当前的所建立的索引实际上并不是特别的好因为会引起回表，为了与更好的效果因此先重新定义索引，根据三条SQL创建对应的SQL")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("drop")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_photo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("drop")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_mobile"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("drop")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_yearbonus_name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 1")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_moblie_name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mobile"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 2")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_name_photo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("photo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("        "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 3")]),s._v("\n")])])]),r("p",[s._v("如上1,2创建的索引问题不大,3相信很多的疑问，因为这有违背之前所讲的索引挑选的原则，就是优先选择与where 之后的字段作为索引以及最左侧的索引，但是现在选择name为最左侧；这其实在建立的时候我们需要思考当前的这个索引在建立之后可重复用的情况，实际项目操作中我们很少有单独的根据图片去查询用户的信息，更多的时候我们会选择根据用户的某一些信息来查询用户的图片所以在3建立的时候我们需要选择与name作为最左侧查询；")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[s._v("mysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" name "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" photo "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+------------+-------+---------------+----------------+---------+--------+----------+--------------------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra                    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+------------+-------+---------------+----------------+---------+--------+----------+--------------------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_name_photo "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("124")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("577859")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.00")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+------------+-------+---------------+----------------+---------+--------+----------+--------------------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n别忘了在对于做出分析\n\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" name "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" photo "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("union")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" name "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" mobile "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("union")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" name "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" yearbonus "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),r("h3",{attrs:{id:"_4-覆盖索引"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-覆盖索引"}},[s._v("#")]),s._v(" 4. 覆盖索引")]),s._v(" "),r("p",[s._v("对于上面的3SQLmysql的操作")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" name "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" photo "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" gender "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" photo "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),r("p",[s._v("a. 查询哪些索引满足where 字段的最左匹配的字段"),r("br"),s._v("\nb. 查询获取的字段是否都在某一些索引中"),r("br"),s._v("\nc. 根据b找到索引再去匹配where 中的字段是否也包含")]),s._v(" "),r("p",[s._v("辅助索引:子节点 => 主键id, 它自己的索引值, 联合索引的其他字段值")]),s._v(" "),r("h3",{attrs:{id:"_5-区间分组统计查询"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5-区间分组统计查询"}},[s._v("#")]),s._v(" 5. 区间分组统计查询")]),s._v(" "),r("p",[s._v("这个地方需要使用elt,interval,在查询中有些时候我们是需要进行区间分组")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[s._v("先用一个小表演示一下操作\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("class"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AUTO_INCREMENT")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("score"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AUTO_INCREMENT")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CHARSET")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8\n")])])]),r("p",[s._v("数据自己添加，统计个分数区间数据"),r("br"),s._v("\n比如现在统计<50,<50、50-60、60-70、70-80、80-90、90-100、>=100分数区间的人数"),r("br"),s._v("\n利用 INTERVAL 划出7个区间；再利用 elt 函数将7个区间分别返回一个列名，如下SQL：")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" elt"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTERVAL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("score"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("70")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'<50'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'50-60'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'60-70'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'70-80'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'80-90'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'90-100'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'>=100'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" score_level"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" counts\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" class\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" elt"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTERVAL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("score"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("70")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'<50'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'50-60'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'60-70'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'70-80'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'80-90'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'90-100'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'>=100'")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-------------+--------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" score_level "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" counts "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-------------+--------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("70")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("70")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-------------+--------+")]),s._v("\n\n自定义排序：\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" elt"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTERVAL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("score"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("70")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1/<50'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2/50-60'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3/60-70'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'4/70-80'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'5/80-90'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'6/90-100'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'7/>=100'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" score_level"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" counts\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" class\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" elt"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTERVAL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("score"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("70")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1/<50'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2/50-60'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3/60-70'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'4/70-80'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'5/80-90'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'6/90-100'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'7/>=100'")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),r("h3",{attrs:{id:"_6-不同年龄段-0到100岁之间-每10岁为一个年龄段-的客户平均年收入"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_6-不同年龄段-0到100岁之间-每10岁为一个年龄段-的客户平均年收入"}},[s._v("#")]),s._v(" 6. 不同年龄段(0到100岁之间，每10岁为一个年龄段)的客户平均年收入")]),s._v(" "),r("blockquote",[r("p",[s._v("创建索引从上可以得知我们可以通过给birthdate, monthsalary, yearbonus 这三个字段定义索引就可以起到很好地效果，但是如何定义，索引字段顺序如何选择？")])]),s._v(" "),r("p",[s._v("通常来说对于联合索引的选择最好是要选择与区分度比较高的作为索引的第一例，不过这并不一定是最好的选择只能说是大部分很实用；在实际中你还需要根据查询的频繁度去考虑这个前后的关系；"),r("strong",[s._v("当不需要考虑排序和分组时，讲选择性最高的列放在前面通常是很好的")]),s._v(" 这时候索引作用只是用于优化where条件的查询。在这种情况下，这样设计的索引确实能够最快地过滤出需要的行，对于在WHERE子句中只使用了索引部分前缀列的查询来说选择性也更高。然而，性能不只是依赖于所有索引列的选择性（整体基数），也和查询条件的具体值有关，也就是和值的分布有关。")]),s._v(" "),r("p",[s._v("如上的SQL可通过按经验法则来做，因为经验法则考虑的是全局基数和选择性，而不是某个具体查询：查找方式主要是统计数据对于总数据量的分布范围，选择与常作为条件并且分布相对多的字段")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("distinct")]),s._v(" yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" year_select"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("distinct")]),s._v(" monthsalary"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" mon_select"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("distinct")]),s._v(" TIMESTAMPDIFF"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("YEAR")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" birthdate"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" CURDATE"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" bir_select"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" counts\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customers1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-------------+------------+------------+--------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" year_select "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" mon_select "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" bir_select "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" counts "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-------------+------------+------------+--------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0167")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.7515")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0002")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("600000")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-------------+------------+------------+--------+")]),s._v("\n\nmonthsalary的选择性更高，索引答案是将其作为索引列的第一列因此索引的建立就是\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_monthsalary_yearbonus_birthdate"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("monthsalary"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("birthdate"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n\t\telt"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interval")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TIMESTAMPDIFF"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("YEAR")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" birthdate"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" CURDATE"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("70")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0-10'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'10-20'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'20-30'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'30-40'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'40-50'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'50-60'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'60-70'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'70-80'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'80-90'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'90-100'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'100>'")]),s._v("\n\t\t"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" age_level"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("avg")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("monthsalary "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" income\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customers1\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v("\n\telt"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interval")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TIMESTAMPDIFF"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("YEAR")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" birthdate"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" CURDATE"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("70")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0-10'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'10-20'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'20-30'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'30-40'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'40-50'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'50-60'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'60-70'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'70-80'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'80-90'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'90-100'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'100>'")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \\G"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n           id: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  select_type: "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(": customers1\n   partitions: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n         "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v("\npossible_keys: idx_monthsalary_yearbonus_birthdate\n          "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(": idx_monthsalary_yearbonus_birthdate\n      key_len: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("\n          ref: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n         "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("577859")]),s._v("\n     filtered: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100.00")]),s._v("\n        Extra: "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("temporary")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" filesort\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n可以看到使用了索引\n")])])]),r("h3",{attrs:{id:"_7-mysql5-7函数索引"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_7-mysql5-7函数索引"}},[s._v("#")]),s._v(" 7. mysql5.7函数索引")]),s._v(" "),r("p",[s._v("测试")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INDEX")]),s._v(" birthdate"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("birthdate"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" TIMESTAMPDIFF"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("YEAR")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" birthdate"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" CURDATE"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),r("p",[s._v("MySQL5.7 函数索引 https://dev.mysql.com/doc/refman/5.7/en/create-table-generated-columns.html")]),s._v(" "),r("p",[s._v("函数索引：MySQL所谓的函数索引其实在本质上解释还是btree索引，实现的方式主要是通过在数据表中新增一个字段用来存放函数字段列，然后对这个字段定义一个索引。")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[s._v("创建函数索引\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、添加一个虚拟的字段\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" class "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("column")]),s._v(" scorce_generated "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v("  generated always "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("ROUND")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("score"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、添加索引\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" class "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" idx_scorce_generated"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("scorce_generated"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nmysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" class"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-------+------------+----------------------+--------------+------------------+-----------+-------------+------------+---------+---------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Table")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Non_unique "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Key_name             "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Seq_in_index "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Column_name      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Collation "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Cardinality "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Index_type "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Comment")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Index_comment "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-------+------------+----------------------+--------------+------------------+-----------+-------------+------------+---------+---------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" class "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v("              "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id               "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("               "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" class "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_scorce_generated "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" scorce_generated "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("               "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-------+------------+----------------------+--------------+------------------+-----------+-------------+------------+---------+---------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n官方例子 直接在创建数据表的时候添加这个操作\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" triangle "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  sidea "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DOUBLE")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  sideb "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DOUBLE")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  sidec "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DOUBLE")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SQRT"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sidea "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" sidea "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" sideb "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" sideb"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" triangle "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sidea"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sideb"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n如下是语法\ncol_name data_type "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("GENERATED ALWAYS"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("expr"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("VIRTUAL "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" STORED"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UNIQUE")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'string'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),r("h4",{attrs:{id:"_8-group问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_8-group问题"}},[s._v("#")]),s._v(" 8. group问题")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、MySQL中MAX函数与"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("By")]),s._v("一起使用的注意事项\n条件：同一个user_role\n业务：根据权限分组查询user_id最大的数据\n\nMySQL "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.5")]),s._v(" 版本\n\nmysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_role"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" role_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n如下就是我们平时的"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SQL")]),s._v("写法\n\nmysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("max")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_role "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+--------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" role_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("max")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+--------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("           "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("           "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("           "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+--------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n但是会很容易的发现实际上数据并不对比如我们查询id为"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("的数据，user_id并不是"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v("\n\nmysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_role "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" role_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n所以这里需要注意一下！！！"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SQL")]),s._v("改为如下方式：\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("user_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\t"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_role "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" a "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" role_id\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" role_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n测试id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" 数据\n\nmysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_role "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" role_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n切换为MySQL "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.7")]),s._v(" 测试 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("∑"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ﾟДﾟノ"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("ノ 然后发现又是一个坑 （"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("゜Д゜）σ凸←自爆按钮\n\nmysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("user_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_role "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" a "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" role_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n数据不对呀"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("〃＞皿＜"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n实际上MySQL "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.7")]),s._v(" 对于"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SQL")]),s._v("进行了改写\nmysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("user_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_role "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" a "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+-----------+------------+------+------+------+----------+---------------------------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra                           "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+-----------+------------+------+------+------+----------+---------------------------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" user_role "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100.00")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("temporary")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" filesort "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+-----------+------------+------+------+------+----------+---------------------------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("warnings")]),s._v(" \\G"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Level")]),s._v(": Note\n   Code: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1003")]),s._v("\nMessage: "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* select#1 */")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user_role"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user_role"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user_role"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user_role"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user_role"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nERROR:\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("No")]),s._v(" query specified\n\n官方的解释：https:"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//bugs.mysql.com/bug.php?id=80131")]),s._v("\n\n那么可实行的方法：\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" u"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("u"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("u"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_role u"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("max")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" max_user_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("role_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_role "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" role_id "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" a "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" u"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("role_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" u"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("role_id\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" role_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n\tu"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("u"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("u"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v("\n\tuser_role u "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("left")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),s._v(" user_role a "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" u"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("role_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("role_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" u"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("\n\ta"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("is")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n推介"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("把容易理解，相对来说效率高一些\n\n关于MySQL5"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" 与 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" 问题 还有解决方法就是\n\nmysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("user_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_role "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" a "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" role_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n必须要加上"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),s._v(" 才可以\n")])])])])}),[],!1,null,null,null);t.default=e.exports},754:function(s,t,a){s.exports=a.p+"assets/img/1222.e3f6aec3.png"}}]);
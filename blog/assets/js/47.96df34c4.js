(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{1238:function(s,t,a){"use strict";a.r(t);var r=a(19),e=Object(r.a)({},(function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[r("h1",{attrs:{id:"join-初步"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#join-初步"}},[s._v("#")]),s._v(" join 初步")]),s._v(" "),r("h3",{attrs:{id:"_0-课程内容"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_0-课程内容"}},[s._v("#")]),s._v(" 0. 课程内容")]),s._v(" "),r("ol",[r("li",[s._v("课程回顾(省略)")]),s._v(" "),r("li",[s._v("第五题")]),s._v(" "),r("li",[s._v("5.5与5.7版本之间子查询的区别")]),s._v(" "),r("li",[s._v("问题解答环境")]),s._v(" "),r("li",[s._v("join算法")]),s._v(" "),r("li",[s._v("连接驱动表选择")])]),s._v(" "),r("h3",{attrs:{id:"_1-第五题-列出每个城市的年收入最高和最低的男性和女性的姓名和年收入"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-第五题-列出每个城市的年收入最高和最低的男性和女性的姓名和年收入"}},[s._v("#")]),s._v(" 1. 第五题（列出每个城市的年收入最高和最低的男性和女性的姓名和年收入）")]),s._v(" "),r("p",[s._v("还是强调一下关于 MySQL5.7 group 的问题ψ(*｀ー´)ψ")]),s._v(" "),r("p",[s._v("1、MySQL中MAX函数与Group By一起使用的注意事项"),r("br"),s._v("\n条件：同一个user_role"),r("br"),s._v("\n业务：根据权限分组查询user_id最大的数据")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[s._v("MySQL "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.5")]),s._v(" 版本\nmysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_role"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" role_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n如下就是我们平时的"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SQL")]),s._v("写法\n\nmysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("max")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_role "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+--------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" role_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("max")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+--------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("           "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("           "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("           "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+--------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),r("p",[s._v("但是会很容易的发现实际上数据并不对比如我们查询id为11的数据，user_id并不是31")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[s._v("mysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_role "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" role_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n所以这里需要注意一下！！！"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SQL")]),s._v("改为如下方式：\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("user_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_role "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" a "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" role_id\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" role_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n测试id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" 数据\n\nmysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_role "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" role_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),r("p",[s._v("切换为MySQL 5.7 测试 !!!∑(ﾟДﾟノ)ノ 然后发现又是一个坑 （*゜Д゜）σ凸←自爆按钮")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[s._v("mysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("user_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_role "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" a "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" role_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n数据不对呀"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("〃＞皿＜"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n实际上MySQL "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.7")]),s._v(" 对于"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SQL")]),s._v("进行了改写\nmysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("user_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_role "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" a "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+-----------+------------+------+------+------+----------+---------------------------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra                           "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+-----------+------------+------+------+------+----------+---------------------------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" user_role "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100.00")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("temporary")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" filesort "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+-----------+------------+------+------+------+----------+---------------------------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("warnings")]),s._v(" \\G"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Level")]),s._v(": Note\n   Code: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1003")]),s._v("\nMessage: "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* select#1 */")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user_role"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user_role"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user_role"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user_role"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user_role"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),r("p",[s._v("官方的解释：https://bugs.mysql.com/bug.php?id=80131")]),s._v(" "),r("p",[s._v("那么可实行的方法：")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" u"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("u"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("u"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_role u"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("max")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" max_user_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("role_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_role "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" role_id "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" a "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" u"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("role_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" u"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("role_id\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" role_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n    u"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("u"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("u"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v("\n    user_role u "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("left")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),s._v(" user_role a "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" u"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("role_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("role_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" u"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("\n    a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("is")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n推介"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("把容易理解，相对来说效率高一些\n\n关于MySQL5"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" 与 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" 问题 还有解决方法就是\n\nmysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("user_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_role "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" a "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" role_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+---------+---------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n必须要加上"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),s._v(" 才可以\n")])])]),r("p",[s._v("回到题目中，根据题目的意思实际上我们需要分为两条SQL 通过 union all 和在一起(这是简单版本的)")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n    a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("income\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n    customers1 a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n            city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("gender"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("min")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("monthsalary "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" income\n         "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v("\n            customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ignore")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("idx_gender_city_monthsalary"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n         "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("gender\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" b\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("\n    a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("city "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("city "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v("\n    a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gender "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gender "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("monthsalary "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("income\n\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n      a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("income\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n    customers1 a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n            city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("gender"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("max")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("monthsalary "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" income\n         "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v("\n            customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ignore")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("idx_gender_city_monthsalary"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n         "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("gender\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" b\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("\n    a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("city "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("city "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v("\n    a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gender "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gender "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("monthsalary "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("income\n\n优化的方式很简单可以在之前创建如下索引\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_gender_city_name_monthsalary_yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gender"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" monthsalary"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_gender_city_monthsalary_yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gender"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" monthsalary"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),r("p",[s._v("当然有同学可能就会疑惑(*•ω•)，就是这优化就是对于对应的SQL语句然后创建联合索引嘛？")]),s._v(" "),r("p",[s._v("如果从一定要把这条SQL优化来说是那么回事，但是最主要的其实还是我们应该怎么去建立这个索引，这是我们所需要关注的；在整个优化的过程中我们实际上主要都是尽量使用覆盖索引去帮助我们优化SQL;")]),s._v(" "),r("p",[s._v("实际上索引的建立最主要的几个点从我们的案例中诠释的：...等等我还是先再重新声明一下关于MySQL对于索引的选择 ლ(⁰⊖⁰ლ)最近有学员还是不懂呀 ：mysql对于索引的选择主要是看where条件上的字段，它并不会优先考虑你需要获取的是那些字段列")]),s._v(" "),r("p",[s._v("比如：")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customers1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------------+------------+---------------------------------------+--------------+-------------+-----------+-------------+------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Table")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Non_unique "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Key_name                              "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Seq_in_index "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Column_name "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Collation "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Cardinality "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Index_type "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------------+------------+---------------------------------------+--------------+-------------+-----------+-------------+------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v("                               "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id          "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("577859")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_monthsalary_yearbonus_birthdate   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" monthsalary "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("450702")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_monthsalary_yearbonus_birthdate   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" yearbonus   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("555676")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_monthsalary_yearbonus_birthdate   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" birthdate   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("577859")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_gender_city_monthsalary_yearbonus "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" gender      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("           "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_gender_city_monthsalary_yearbonus "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" city        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_gender_city_monthsalary_yearbonus "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" monthsalary "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("577859")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_gender_city_monthsalary_yearbonus "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" yearbonus   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("577859")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------------+------------+---------------------------------------+--------------+-------------+-----------+-------------+------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.01")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("monthsalary"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customers1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+------------+-------+-------------------------------------+---------+--------+----------+-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v("                                 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+------------+-------+-------------------------------------+---------+--------+----------+-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_monthsalary_yearbonus_birthdate "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("577859")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100.00")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+------------+-------+-------------------------------------+---------+--------+----------+-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("monthsalary"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" photo "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+------------+------------+------+---------------+------+---------+------+--------+----------+-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+------------+------------+------+---------------+------+---------+------+--------+----------+-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("577859")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.00")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+------------+------------+------+---------------+------+---------+------+--------+----------+-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),r("p",[s._v("如上的两条SQL，会发现第一条SQL使用到了idx_monthsalary_yearbonus_birthdate索引，但是第二个确没有使用到这个索引仅仅只是加了where条件，因为对于MySQL来说索引的最大作用是用来涮选数据，count(monthsalary) 是需要获取的数据，第二个没有使用到是因为MySQL需要过滤一部分数据就需要根据where过滤，而idx_monthsalary_yearbonus_birthdate中并不包含这个字段所以不能使用")]),s._v(" "),r("p",[s._v("**注意！！！**关于使用idx_gender_city_monthsalary_yearbonus之后的情况")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n  a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("income\n "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n  customers1 a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n     "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n        city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("gender"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("min")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("monthsalary "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" income\n     "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v("\n        customers1\n     "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" gender"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("city\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" b\n "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("\n  a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gender "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gender "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v("\n  a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("city "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("city "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v("\n   "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("monthsalary "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("income\\G"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n          id: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n select_type: "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v("\n       "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(": a\n  partitions: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v("\npossible_keys: idx_gender_city_monthsalary_yearbonus\n         "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n     key_len: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n         ref: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("577859")]),s._v("\n    filtered: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100.00")]),s._v("\n       Extra: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n          id: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n select_type: "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v("\n       "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("derived2"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  partitions: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(": ref\npossible_keys: "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("auto_key0"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n         "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("auto_key0"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n     key_len: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v("\n         ref: mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gender"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("func\n        "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n    filtered: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100.00")]),s._v("\n       Extra: "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n          id: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n select_type: DERIVED\n       "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(": customers1\n  partitions: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v("\npossible_keys: idx_gender_city_monthsalary_yearbonus\n         "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(": idx_gender_city_monthsalary_yearbonus\n     key_len: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("43")]),s._v("\n         ref: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("577859")]),s._v("\n    filtered: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100.00")]),s._v("\n       Extra: "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.04")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),r("p",[s._v("我们会发现MySQL仅仅只是使用了一次idx_gender_city_monthsalary_yearbonus，但是在外部连接中实际上where上是存在着索引中的这些字段，那应该用的到索引呀？∑(´△｀)？！")]),s._v(" "),r("p",[s._v("注意：这里并不是因为与最后的(a.monthsalary * 12 + a.yearbonus) = b.income 这部分的计算而是另外的原因， 我们可以通过show warnings \\G;查看一下MySQL对于我们执行的SQL语句进行分析")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("warnings")]),s._v(" \\G"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Level")]),s._v(": Note\n   Code: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1003")]),s._v("\nMessage: "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* select#1 */")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("income"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("income"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("customers1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* select#2 */")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("customers1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("c\nity"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("customers1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gender"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gender"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("min")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("customers1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("monthsalary"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("customers1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("income"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("customers1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("customers1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gender"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("customers1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gender"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gen\nder"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("monthsalary"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("income"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.01")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nERROR:\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("No")]),s._v(" query specified\n\n美化一下ヾ"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("･ω･"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("o\n\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("income"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("income"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("customers1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("JOIN")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("customers1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("customers1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gender"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gender"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("min")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("customers1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("monthsalary"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("customers1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("income"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("customers1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("customers1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gender"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("customers1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gender"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gender"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("monthsalary"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("yearbonus"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("income"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("\n")])])]),r("p",[s._v("从上可以看出MySQL对于我们的SQL重写之后，把原本的条件顺序置换了成了一个独立列字段，在MySQL中对于独立字段是不会使用索引的如下例子：")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" gender "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+------------+------------+------+---------------+------+---------+------+--------+----------+-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+------------+------------+------+---------------+------+---------+------+--------+----------+-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("577859")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100.00")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+------------+------------+------+---------------+------+---------+------+--------+----------+-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" gender "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+------------+------+---------------------------------------+---------------------------------------+---------+-------+--------+----------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys                         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v("                                   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+------------+------------+------+---------------------------------------+---------------------------------------+---------+-------+--------+----------+-")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" customers1 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_gender_city_monthsalary_yearbonus "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_gender_city_monthsalary_yearbonus "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" const "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("288929")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100.00")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+------------+------+---------------------------------------+---------------------------------------+---------+-------+--------+----------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),r("p",[s._v("所以就出现了如上的问题,对于子查询的查询，这是MySQL版本变革之后的处理")]),s._v(" "),r("h3",{attrs:{id:"_2-5-5与5-7版本之间子查询的区别"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-5与5-7版本之间子查询的区别"}},[s._v("#")]),s._v(" 2. 5.5与5.7版本之间子查询的区别")]),s._v(" "),r("p",[s._v("在MySQL的5.6/5.7的版本中对于子查询做出了相应的优化处理，在MySQL5.5及之前的版本中对于子查询仅仅只是一个功能而已，性能差在开发中尽可能的避免。")]),s._v(" "),r("p",[s._v("因为在5.5之前对于子查询的查询方式是先查询的外层的数据表，然后再去查询内表也就是通过外部表驱动内表，而在5.6以后对于子查询进行了优化MySQL内部的优化器把子查询改写成关联查询。")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[s._v("测试表\nyd_admin_user 数据量 "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("49")]),s._v("条\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v(" yd_admin_user"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-----------+--------------+------+-----+---------+----------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Field     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Type")]),s._v("         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("Null")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Key")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Default")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra          "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-----------+--------------+------+-----+---------+----------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" user_id   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("smallint")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("NO")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" PRI "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("auto_increment")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" user_name "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("NO")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" password  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("NO")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" role_id   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("smallint")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" YES  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" real_name "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" YES  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" mobile    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" YES  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" email     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" YES  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-----------+--------------+------+-----+---------+----------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nrole数据量"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("条\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v(" role"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----------------+--------------+------+-----+---------+----------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Field          "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Type")]),s._v("         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("Null")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Key")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Default")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra          "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----------------+--------------+------+-----+---------+----------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id             "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("smallint")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("NO")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" PRI "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("auto_increment")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" name           "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" YES  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" department_ids "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" YES  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" action_list    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("text")]),s._v("         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" YES  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" do_list        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("text")]),s._v("         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" YES  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" add_time       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" YES  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----------------+--------------+------+-----+---------+----------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n不用salary以及customers是因为数据量太多了，导出导入太麻烦"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ﾟДﾟ"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("ﾉ\n")])])]),r("p",[s._v("业务就对于两个表进行联查通过子查询的方式找出有权限的数据")]),s._v(" "),r("p",[s._v("可能查询方面不和理论(ー`´ー)，将就一下；但是还是可以说明问题的(・ω<) ﾃﾍﾍﾟﾛ")]),s._v(" "),r("p",[s._v("在MySQL5.5版本中")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" yd_admin_user "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" role "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+--------------------+---------------+-------+---------------+---------+---------+-------+------+-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v("         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+--------------------+---------------+-------+---------------+---------+---------+-------+------+-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v("            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" yd_admin_user "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("          "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("49")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" DEPENDENT SUBQUERY "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" role          "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" const "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("id    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" const "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+--------------------+---------------+-------+---------------+---------+---------+-------+------+-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.07")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),r("p",[s._v("MySQL5.7版本")]),s._v(" "),r("div",{staticClass:"language-sql extra-class"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" yd_admin_user "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" user_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" role "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+---------------+-------+---------------+---------+---------+-------+------+----------+-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v("         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v("     "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref   "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+---------------+-------+---------------+---------+---------+-------+------+----------+-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" yd_admin_user "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" const "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" const "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100.00")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" role          "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" const "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("id    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" const "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100.00")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----+-------------+---------------+-------+---------------+---------+---------+-------+------+----------+-------------+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("warnings")]),s._v(" \\G"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Level")]),s._v(": Note\n   Code: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1003")]),s._v("\nMessage: "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* select#1 */")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'admin'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user_name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'14e1b600b1fd579f47433b88e8d85291'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("password"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("role_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'9'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("d_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1515330851'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("last_login"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'127.0.0.1'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("last_ip"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Admin'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("real_name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("add_time"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("is_disable"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'13632483323'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mobile"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("email"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'超级管理员'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("job"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("is_responsible"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("role"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("mysql12"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("yd_admin_user"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),r("p",[s._v("最主要的是你可以看看，在查询的时候MySQL通过explain分析之不同版本对于数据表的查询情况。")]),s._v(" "),r("p",[r("img",{attrs:{src:a(745),alt:"img"}})]),s._v(" "),r("p",[s._v("在官方网站中有如上内容对于join的解释：我们根据前面的两条SQL也做一个解释")]),s._v(" "),r("p",[s._v("5.5 版本：")]),s._v(" "),r("table",[r("thead",[r("tr",[r("th",[s._v("table")]),s._v(" "),r("th",[s._v("type")])])]),s._v(" "),r("tbody",[r("tr",[r("td",[s._v("yd_admin_user")]),s._v(" "),r("td",[s._v("All")])]),s._v(" "),r("tr",[r("td",[s._v("role")]),s._v(" "),r("td",[s._v("const")])])])]),s._v(" "),r("div",{staticClass:"language-c++ extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[s._v("for each row in yd_admin_user{ 循环yd_admin_user\n  for each row in role matching const { 循环 role 根据 const 匹配\n    if row satisfies join conditions and where id 满足 join条件和where就返回\n  }\n}\nsend to client\n")])])]),r("p",[s._v("5.7 版本：")]),s._v(" "),r("table",[r("thead",[r("tr",[r("th",[s._v("table")]),s._v(" "),r("th",[s._v("type")])])]),s._v(" "),r("tbody",[r("tr",[r("td",[s._v("yd_admin_user")]),s._v(" "),r("td",[s._v("const")])]),s._v(" "),r("tr",[r("td",[s._v("role")]),s._v(" "),r("td",[s._v("const")])])])]),s._v(" "),r("div",{staticClass:"language-c++ extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[s._v("role_data\n先循环role 获取到where的结果\nfor each row in role matching const {\n  role_data = if row satisfies where id, send to client\n}\n再去根据结果通过join条件查询yd_admin_user的数据\nfor each in role_data{\n  for each row in yd_admin_user matching const{\n    if row satisfies join conditions , send to client\n  }\n}\n")])])]),r("h3",{attrs:{id:"_3-问题解答环境"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-问题解答环境"}},[s._v("#")]),s._v(" 3. 问题解答环境")]),s._v(" "),r("p",[s._v("过....")]),s._v(" "),r("p",[s._v("show warnings 这是MySQL5.7的小操作可以查看explain执行之后优化器重新的SQL")]),s._v(" "),r("h3",{attrs:{id:"_4-join算法"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-join算法"}},[s._v("#")]),s._v(" 4. join算法")]),s._v(" "),r("p",[s._v("SQL中对于join的实现主要是通过Nest额的 Loop join算法处理的，其他数据库可能是使用hash join以及sort merge join。NLJ实际上就是通过驱动表的结构及作为循环基础数据，然后讲该结果集中的数据作为过滤条件一条条第到下一个表中查询数据，最后合并结构。如果还有第三个表参与join，则把前面两个表的join结果集作为循环基础数据，再一次通过循环查询条件到第三个表中查询数据，以此往下推")]),s._v(" "),r("p",[s._v("优化的思路：尽可能减少 Join 语句中的 Nested Loop 的循环总次数； 如何减少 Nested Loop 的循环总次数？最有效的办法只有一个，那就是让驱动表的结果集尽可能的小，这也正是在本章第二节中的优化基本原则之一“永远用小结果集驱动大的结果集”。")]),s._v(" "),r("ol",[r("li",[s._v("优先优化 Nested Loop 的内层循环；")]),s._v(" "),r("li",[s._v("保证 Join 语句中被驱动表上 Join 条件字段已经被索引；")]),s._v(" "),r("li",[s._v("当无法保证被驱动表的 Join 条件字段被索引且内存资源充足的前提下，不要太吝惜 JoinBuffer 的设置；")])]),s._v(" "),r("h4",{attrs:{id:"_1-1-nested-loop-join算法解释"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-nested-loop-join算法解释"}},[s._v("#")]),s._v(" 1.1 Nested-Loop Join算法解释")]),s._v(" "),r("p",[s._v("官网join算法 https://www.docs4dev.com/docs/zh/mysql/5.7/reference/nested-loop-joins.html")]),s._v(" "),r("blockquote",[r("ol",[r("li",[s._v("Simple Nested-Loop Join")])])]),s._v(" "),r("p",[s._v("如下图，r为驱动表，s为匹配表，可以看到从r中分别取出r1、r2、......、rn去匹配s表的左右列，然后再合并数据，对s表进行了rn次访问，对数据库开销大")]),s._v(" "),r("p",[r("img",{attrs:{src:a(746),alt:"img"}})]),s._v(" "),r("blockquote",[r("ol",[r("li",[s._v("Index Nested-Loop Join（索引嵌套）：")])])]),s._v(" "),r("p",[s._v("这个要求非驱动表（匹配表s）上有索引，可以通过索引来减少比较，加速查询。 在查询时，驱动表（r）会根据关联字段的索引进行查找，挡在索引上找到符合的值，再回表进行查询，也就是只有当匹配到索引以后才会进行回表查询。 如果非驱动表（s）的关联健是主键的话，性能会非常高，如果不是主键，要进行多次回表查询，先关联索引，然后根据二级索引的主键ID进行回表操作，性能上比索引是主键要慢。")]),s._v(" "),r("p",[r("img",{attrs:{src:a(747),alt:"img"}})]),s._v(" "),r("blockquote",[r("ol",[r("li",[s._v("Block Nested-Loop Join：")])])]),s._v(" "),r("p",[s._v("如果有索引，会选取第二种方式进行join，但如果join列没有索引，就会采用Block Nested-Loop Join。可以看到中间有个join buffer缓冲区，是将驱动表的所有join相关的列都先缓存到join buffer中，然后批量与匹配表进行匹配，将第一种多次比较合并为一次，降低了非驱动表（s）的访问频率。默认情况下join_buffer_size=256K，在查找的时候MySQL会将所有的需要的列缓存到join buffer当中，包括select的列，而不是仅仅只缓存关联列。在一个有N个JOIN关联的SQL当中会在执行时候分配N-1个join buffer。")]),s._v(" "),r("p",[r("img",{attrs:{src:a(748),alt:"img"}})]),s._v(" "),r("p",[s._v("join_buffer_size 官方解释：https://www.docs4dev.com/docs/zh/mysql/5.7/reference/server-system-variables.html")]),s._v(" "),r("h3",{attrs:{id:"_5-连接驱动表选择"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5-连接驱动表选择"}},[s._v("#")]),s._v(" 5. 连接驱动表选择")]),s._v(" "),r("p",[s._v("通过来说就是explain分析之后结果的第一个表就是驱动表")]),s._v(" "),r("p",[s._v("选择方式：")]),s._v(" "),r("ol",[r("li",[s._v("MySQL会先获取数据表的结构根据结构进行排序小的在为驱动表")]),s._v(" "),r("li",[s._v("然后看连接的顺序")]),s._v(" "),r("li",[s._v("根据where进行判断，看where上是否含有某一个表中的字段")])])])}),[],!1,null,null,null);t.default=e.exports},745:function(s,t,a){s.exports=a.p+"assets/img/markdown-img-paste-20190618140549137.3567a482.png"},746:function(s,t,a){s.exports=a.p+"assets/img/simple_nested-loop_join.c873a5b0.png"},747:function(s,t,a){s.exports=a.p+"assets/img/index-nested-loop-join.f5478ef5.png"},748:function(s,t,a){s.exports=a.p+"assets/img/block-nested-loop-join.7e48cfe0.png"}}]);
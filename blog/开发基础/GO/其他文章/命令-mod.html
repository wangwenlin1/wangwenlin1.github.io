<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>命令-mod | 一名GO+PHP工程师</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/blog/assets/css/0.styles.b3aba94c.css" as="style"><link rel="preload" href="/blog/assets/js/app.3a2a0635.js" as="script"><link rel="preload" href="/blog/assets/js/3.21e2e031.js" as="script"><link rel="preload" href="/blog/assets/js/108.a5880443.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.d053698b.js"><link rel="prefetch" href="/blog/assets/js/100.d5cb88cb.js"><link rel="prefetch" href="/blog/assets/js/101.6bbce255.js"><link rel="prefetch" href="/blog/assets/js/102.968ea43c.js"><link rel="prefetch" href="/blog/assets/js/103.c5c5130e.js"><link rel="prefetch" href="/blog/assets/js/104.161b590d.js"><link rel="prefetch" href="/blog/assets/js/105.eaae1ece.js"><link rel="prefetch" href="/blog/assets/js/106.8bdfd9bf.js"><link rel="prefetch" href="/blog/assets/js/107.c9b230ac.js"><link rel="prefetch" href="/blog/assets/js/109.bab44539.js"><link rel="prefetch" href="/blog/assets/js/11.bc7d0bf1.js"><link rel="prefetch" href="/blog/assets/js/110.7ba602f1.js"><link rel="prefetch" href="/blog/assets/js/111.a11c7d35.js"><link rel="prefetch" href="/blog/assets/js/112.bb76db96.js"><link rel="prefetch" href="/blog/assets/js/113.9b314292.js"><link rel="prefetch" href="/blog/assets/js/114.f28a4d47.js"><link rel="prefetch" href="/blog/assets/js/115.6a21a21a.js"><link rel="prefetch" href="/blog/assets/js/116.1fd8cdf3.js"><link rel="prefetch" href="/blog/assets/js/117.193b54e8.js"><link rel="prefetch" href="/blog/assets/js/118.d91f7ec2.js"><link rel="prefetch" href="/blog/assets/js/119.857d484f.js"><link rel="prefetch" href="/blog/assets/js/12.2003a6c5.js"><link rel="prefetch" href="/blog/assets/js/120.c2fc1bab.js"><link rel="prefetch" href="/blog/assets/js/121.e93dfc27.js"><link rel="prefetch" href="/blog/assets/js/122.0ea0246a.js"><link rel="prefetch" href="/blog/assets/js/123.31436cd9.js"><link rel="prefetch" href="/blog/assets/js/124.6b522c49.js"><link rel="prefetch" href="/blog/assets/js/125.7be39e4f.js"><link rel="prefetch" href="/blog/assets/js/126.8b8a9b2d.js"><link rel="prefetch" href="/blog/assets/js/127.7d06eb7f.js"><link rel="prefetch" href="/blog/assets/js/128.3498b329.js"><link rel="prefetch" href="/blog/assets/js/129.b4fdbe4d.js"><link rel="prefetch" href="/blog/assets/js/13.d2837ebd.js"><link rel="prefetch" href="/blog/assets/js/130.4acdc8e4.js"><link rel="prefetch" href="/blog/assets/js/131.ef9fa33c.js"><link rel="prefetch" href="/blog/assets/js/132.1f9b4bbb.js"><link rel="prefetch" href="/blog/assets/js/133.a417b118.js"><link rel="prefetch" href="/blog/assets/js/134.6a6cf86d.js"><link rel="prefetch" href="/blog/assets/js/135.313b60a3.js"><link rel="prefetch" href="/blog/assets/js/136.2c3aff88.js"><link rel="prefetch" href="/blog/assets/js/137.50106a44.js"><link rel="prefetch" href="/blog/assets/js/138.87124965.js"><link rel="prefetch" href="/blog/assets/js/139.cb5c4cb6.js"><link rel="prefetch" href="/blog/assets/js/14.48fb5c32.js"><link rel="prefetch" href="/blog/assets/js/140.9719663d.js"><link rel="prefetch" href="/blog/assets/js/141.b0090c83.js"><link rel="prefetch" href="/blog/assets/js/142.e385a422.js"><link rel="prefetch" href="/blog/assets/js/143.9d960553.js"><link rel="prefetch" href="/blog/assets/js/144.e3ef5a71.js"><link rel="prefetch" href="/blog/assets/js/145.95b58ec4.js"><link rel="prefetch" href="/blog/assets/js/146.92cd1d56.js"><link rel="prefetch" href="/blog/assets/js/147.1aad7186.js"><link rel="prefetch" href="/blog/assets/js/148.b0a6ba25.js"><link rel="prefetch" href="/blog/assets/js/149.cf51c7a4.js"><link rel="prefetch" href="/blog/assets/js/15.977c5e43.js"><link rel="prefetch" href="/blog/assets/js/150.8961d634.js"><link rel="prefetch" href="/blog/assets/js/151.d4337140.js"><link rel="prefetch" href="/blog/assets/js/152.d4fcbdac.js"><link rel="prefetch" href="/blog/assets/js/153.8f0df288.js"><link rel="prefetch" href="/blog/assets/js/154.3108e3fe.js"><link rel="prefetch" href="/blog/assets/js/155.1c76998b.js"><link rel="prefetch" href="/blog/assets/js/156.14a1e6f8.js"><link rel="prefetch" href="/blog/assets/js/157.2a90db8a.js"><link rel="prefetch" href="/blog/assets/js/158.f649eaa4.js"><link rel="prefetch" href="/blog/assets/js/159.bde474db.js"><link rel="prefetch" href="/blog/assets/js/16.cc3bb18b.js"><link rel="prefetch" href="/blog/assets/js/160.da7deb2a.js"><link rel="prefetch" href="/blog/assets/js/161.5124a074.js"><link rel="prefetch" href="/blog/assets/js/162.7f4358a0.js"><link rel="prefetch" href="/blog/assets/js/163.76da1c99.js"><link rel="prefetch" href="/blog/assets/js/164.ebc9b6a7.js"><link rel="prefetch" href="/blog/assets/js/165.f7cbff8f.js"><link rel="prefetch" href="/blog/assets/js/166.5bcaa3dd.js"><link rel="prefetch" href="/blog/assets/js/167.b4296d08.js"><link rel="prefetch" href="/blog/assets/js/168.27dc81ce.js"><link rel="prefetch" href="/blog/assets/js/169.4614ac4e.js"><link rel="prefetch" href="/blog/assets/js/17.180fd8e8.js"><link rel="prefetch" href="/blog/assets/js/170.e41001f5.js"><link rel="prefetch" href="/blog/assets/js/171.0724bbd4.js"><link rel="prefetch" href="/blog/assets/js/172.2d5b541f.js"><link rel="prefetch" href="/blog/assets/js/173.f03b20a0.js"><link rel="prefetch" href="/blog/assets/js/174.092074fb.js"><link rel="prefetch" href="/blog/assets/js/175.bbae3a5c.js"><link rel="prefetch" href="/blog/assets/js/176.2380b0cf.js"><link rel="prefetch" href="/blog/assets/js/177.67fa30a9.js"><link rel="prefetch" href="/blog/assets/js/178.7f4bf5e6.js"><link rel="prefetch" href="/blog/assets/js/18.fa5bec70.js"><link rel="prefetch" href="/blog/assets/js/19.82d0b6cb.js"><link rel="prefetch" href="/blog/assets/js/2.cf693890.js"><link rel="prefetch" href="/blog/assets/js/20.8d88eb5f.js"><link rel="prefetch" href="/blog/assets/js/21.04aa936c.js"><link rel="prefetch" href="/blog/assets/js/22.6f38dceb.js"><link rel="prefetch" href="/blog/assets/js/23.00b0c454.js"><link rel="prefetch" href="/blog/assets/js/24.4949647c.js"><link rel="prefetch" href="/blog/assets/js/25.f090d9de.js"><link rel="prefetch" href="/blog/assets/js/26.64e9b11e.js"><link rel="prefetch" href="/blog/assets/js/27.f6f1b280.js"><link rel="prefetch" href="/blog/assets/js/28.ba46dc32.js"><link rel="prefetch" href="/blog/assets/js/29.08dd160e.js"><link rel="prefetch" href="/blog/assets/js/30.1f6b9a8b.js"><link rel="prefetch" href="/blog/assets/js/31.edcef4fa.js"><link rel="prefetch" href="/blog/assets/js/32.763b7b98.js"><link rel="prefetch" href="/blog/assets/js/33.10fa82ac.js"><link rel="prefetch" href="/blog/assets/js/34.783e6db1.js"><link rel="prefetch" href="/blog/assets/js/35.86d13f87.js"><link rel="prefetch" href="/blog/assets/js/36.c81ca450.js"><link rel="prefetch" href="/blog/assets/js/37.6c8b6e4d.js"><link rel="prefetch" href="/blog/assets/js/38.fed1555d.js"><link rel="prefetch" href="/blog/assets/js/39.d8367356.js"><link rel="prefetch" href="/blog/assets/js/4.33e3eeff.js"><link rel="prefetch" href="/blog/assets/js/40.890bdfe6.js"><link rel="prefetch" href="/blog/assets/js/41.351a2bb7.js"><link rel="prefetch" href="/blog/assets/js/42.7dc0997f.js"><link rel="prefetch" href="/blog/assets/js/43.b1eb7b31.js"><link rel="prefetch" href="/blog/assets/js/44.96773f8a.js"><link rel="prefetch" href="/blog/assets/js/45.14984c3f.js"><link rel="prefetch" href="/blog/assets/js/46.360c94b5.js"><link rel="prefetch" href="/blog/assets/js/47.6ba6e036.js"><link rel="prefetch" href="/blog/assets/js/48.7e30092c.js"><link rel="prefetch" href="/blog/assets/js/49.cffe09bd.js"><link rel="prefetch" href="/blog/assets/js/5.93c02369.js"><link rel="prefetch" href="/blog/assets/js/50.10849ea7.js"><link rel="prefetch" href="/blog/assets/js/51.29fb5c68.js"><link rel="prefetch" href="/blog/assets/js/52.c183fd4d.js"><link rel="prefetch" href="/blog/assets/js/53.2102d53f.js"><link rel="prefetch" href="/blog/assets/js/54.a7def65b.js"><link rel="prefetch" href="/blog/assets/js/55.e1462b05.js"><link rel="prefetch" href="/blog/assets/js/56.d35a7dec.js"><link rel="prefetch" href="/blog/assets/js/57.f908b76a.js"><link rel="prefetch" href="/blog/assets/js/58.8c699c1a.js"><link rel="prefetch" href="/blog/assets/js/59.013048e6.js"><link rel="prefetch" href="/blog/assets/js/6.bf46d9ef.js"><link rel="prefetch" href="/blog/assets/js/60.96011719.js"><link rel="prefetch" href="/blog/assets/js/61.c57dc954.js"><link rel="prefetch" href="/blog/assets/js/62.24bf6999.js"><link rel="prefetch" href="/blog/assets/js/63.2f87f55d.js"><link rel="prefetch" href="/blog/assets/js/64.68cd3b45.js"><link rel="prefetch" href="/blog/assets/js/65.d1a0e0c0.js"><link rel="prefetch" href="/blog/assets/js/66.d694b5d5.js"><link rel="prefetch" href="/blog/assets/js/67.1d93ad03.js"><link rel="prefetch" href="/blog/assets/js/68.7a922734.js"><link rel="prefetch" href="/blog/assets/js/69.e8dc5f21.js"><link rel="prefetch" href="/blog/assets/js/7.965a7048.js"><link rel="prefetch" href="/blog/assets/js/70.0ab39b68.js"><link rel="prefetch" href="/blog/assets/js/71.32fb9ba8.js"><link rel="prefetch" href="/blog/assets/js/72.d7621fb4.js"><link rel="prefetch" href="/blog/assets/js/73.f0b18643.js"><link rel="prefetch" href="/blog/assets/js/74.f4b27305.js"><link rel="prefetch" href="/blog/assets/js/75.d52134dd.js"><link rel="prefetch" href="/blog/assets/js/76.af8a1eb5.js"><link rel="prefetch" href="/blog/assets/js/77.be15b0d2.js"><link rel="prefetch" href="/blog/assets/js/78.d456dcce.js"><link rel="prefetch" href="/blog/assets/js/79.12735350.js"><link rel="prefetch" href="/blog/assets/js/8.78eeb959.js"><link rel="prefetch" href="/blog/assets/js/80.2120e0e9.js"><link rel="prefetch" href="/blog/assets/js/81.04f50a1e.js"><link rel="prefetch" href="/blog/assets/js/82.db879ca5.js"><link rel="prefetch" href="/blog/assets/js/83.e89b8863.js"><link rel="prefetch" href="/blog/assets/js/84.07410b58.js"><link rel="prefetch" href="/blog/assets/js/85.d3e35fad.js"><link rel="prefetch" href="/blog/assets/js/86.f855e246.js"><link rel="prefetch" href="/blog/assets/js/87.bf22bce7.js"><link rel="prefetch" href="/blog/assets/js/88.6ed1a43d.js"><link rel="prefetch" href="/blog/assets/js/89.50e298db.js"><link rel="prefetch" href="/blog/assets/js/9.009d1183.js"><link rel="prefetch" href="/blog/assets/js/90.391f76ed.js"><link rel="prefetch" href="/blog/assets/js/91.d1662d38.js"><link rel="prefetch" href="/blog/assets/js/92.a65aa479.js"><link rel="prefetch" href="/blog/assets/js/93.bc850b53.js"><link rel="prefetch" href="/blog/assets/js/94.7dc858d7.js"><link rel="prefetch" href="/blog/assets/js/95.fce3d2c0.js"><link rel="prefetch" href="/blog/assets/js/96.7e3abf55.js"><link rel="prefetch" href="/blog/assets/js/97.64d3b035.js"><link rel="prefetch" href="/blog/assets/js/98.fdb7d67a.js"><link rel="prefetch" href="/blog/assets/js/99.9a416d3b.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.b3aba94c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">一名GO+PHP工程师</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://gitee.com/ColinWWL/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://gitee.com/ColinWWL/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/GO/Go类型系统/1Go类型系统概述" class="sidebar-heading clickable"><span>Go类型系统</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/GO/Go类型系统/1Go类型系统概述.html" class="sidebar-link">Go类型系统概述</a></li><li><a href="/blog/开发基础/GO/Go类型系统/2指针.html" class="sidebar-link">指针</a></li><li><a href="/blog/开发基础/GO/Go类型系统/3结构体.html" class="sidebar-link">结构体</a></li><li><a href="/blog/开发基础/GO/Go类型系统/4值部.html" class="sidebar-link">值部</a></li><li><a href="/blog/开发基础/GO/Go类型系统/5数组、切片和映射.html" class="sidebar-link">数组、切片和映射</a></li><li><a href="/blog/开发基础/GO/Go类型系统/6通道.html" class="sidebar-link">通道</a></li><li><a href="/blog/开发基础/GO/Go类型系统/7方法.html" class="sidebar-link">方法</a></li><li><a href="/blog/开发基础/GO/Go类型系统/8接口.html" class="sidebar-link">接口</a></li><li><a href="/blog/开发基础/GO/Go类型系统/9类型内嵌.html" class="sidebar-link">类型内嵌</a></li><li><a href="/blog/开发基础/GO/Go类型系统/10非类型安全指针.html" class="sidebar-link">非类型安全指针</a></li><li><a href="/blog/开发基础/GO/Go类型系统/11泛型.html" class="sidebar-link">泛型</a></li><li><a href="/blog/开发基础/GO/Go类型系统/12反射.html" class="sidebar-link">反射</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/GO/Go编程入门/1程序源代码基本元素介绍" class="sidebar-heading clickable"><span>Go编程入门</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/GO/Go编程入门/1程序源代码基本元素介绍.html" class="sidebar-link">程序源代码基本元素介绍</a></li><li><a href="/blog/开发基础/GO/Go编程入门/2关键字和标识符.html" class="sidebar-link">关键字和标识符</a></li><li><a href="/blog/开发基础/GO/Go编程入门/3基本类型和它们的字面量表示.html" class="sidebar-link">基本类型和它们的字面量表示</a></li><li><a href="/blog/开发基础/GO/Go编程入门/4常量和变量.html" class="sidebar-link">常量和变量</a></li><li><a href="/blog/开发基础/GO/Go编程入门/5运算操作符.html" class="sidebar-link">运算操作符</a></li><li><a href="/blog/开发基础/GO/Go编程入门/6函数声明和调用.html" class="sidebar-link">函数声明和调用</a></li><li><a href="/blog/开发基础/GO/Go编程入门/7代码包和包引入.html" class="sidebar-link">代码包和包引入</a></li><li><a href="/blog/开发基础/GO/Go编程入门/8表达式、语句和简单语句.html" class="sidebar-link">表达式、语句和简单语句</a></li><li><a href="/blog/开发基础/GO/Go编程入门/9基本流程控制语法.html" class="sidebar-link">基本流程控制语法</a></li><li><a href="/blog/开发基础/GO/Go编程入门/10协程、延迟函数调用、以及恐慌和恢复.html" class="sidebar-link">协程、延迟函数调用、以及恐慌和恢复</a></li><li><a href="/blog/开发基础/GO/Go编程入门/GO官方链接工具.html" class="sidebar-link">GO官方链接工具</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/GO/其他文章/Go技巧" class="sidebar-heading clickable open"><span>其他文章</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/GO/其他文章/Go技巧.html" class="sidebar-link">Go技巧</a></li><li><a href="/blog/开发基础/GO/其他文章/Go细节.html" class="sidebar-link">Go细节</a></li><li><a href="/blog/开发基础/GO/其他文章/Go问答.html" class="sidebar-link">Go问答</a></li><li><a href="/blog/开发基础/GO/其他文章/命令-mod.html" class="active sidebar-link">命令-mod</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/其他文章/命令-mod.html#使用go-path问题" class="sidebar-link">使用go path问题</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/其他文章/命令-mod.html#govendor" class="sidebar-link">govendor</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/其他文章/命令-mod.html#go-mod介绍" class="sidebar-link">go mod介绍</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/其他文章/命令-mod.html#如何使用go-mod" class="sidebar-link">如何使用go mod</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/其他文章/命令-mod.html#go111module" class="sidebar-link">GO111MODULE</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/其他文章/命令-mod.html#go-mod命令" class="sidebar-link">go mod命令</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/其他文章/命令-mod.html#使用go-mod管理一个新项目" class="sidebar-link">使用go mod管理一个新项目</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/其他文章/命令-mod.html#_1-初始化项目" class="sidebar-link">1. 初始化项目</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/其他文章/命令-mod.html#_2-添加依赖" class="sidebar-link">2. 添加依赖</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/其他文章/命令-mod.html#go-get升级" class="sidebar-link">go get升级</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/其他文章/命令-mod.html#使用replace替换无法直接获取的package" class="sidebar-link">使用replace替换无法直接获取的package</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/其他文章/命令-mod.html#go-mod发布和使用" class="sidebar-link">go mod发布和使用</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/其他文章/命令-mod.html#creating-a-module" class="sidebar-link">Creating a Module</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/其他文章/命令-mod.html#module-versioning" class="sidebar-link">module versioning</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/其他文章/命令-mod.html#making-a-release" class="sidebar-link">making a release</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/其他文章/命令-mod.html#use-our-module" class="sidebar-link">use our module</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/其他文章/命令-mod.html#making-a-bugfix-release" class="sidebar-link">Making a bugfix release</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/其他文章/命令-mod.html#updating-modules" class="sidebar-link">Updating modules</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/其他文章/命令-mod.html#major-versions" class="sidebar-link">Major versions</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/其他文章/命令-mod.html#updating-to-a-major-version" class="sidebar-link">Updating to a major version</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/其他文章/命令-mod.html#vendoring" class="sidebar-link">Vendoring</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/其他文章/命令-mod.html#idea下开发go" class="sidebar-link">IDEA下开发GO</a></li></ul></li><li><a href="/blog/开发基础/GO/其他文章/基础-Golang的time.NewTimer单次定时器使用案例.html" class="sidebar-link">基础-Golang的time. NewTimer单次定时器使用案例</a></li><li><a href="/blog/开发基础/GO/其他文章/基础-Go中的nil.html" class="sidebar-link">Go中的 nil</a></li><li><a href="/blog/开发基础/GO/其他文章/基础-Go代码断行规则.html" class="sidebar-link">Go代码断行规则</a></li><li><a href="/blog/开发基础/GO/其他文章/基础-表达式估值顺序规则.html" class="sidebar-link">表达式估值顺序规则</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/GO/学习资料" class="sidebar-heading clickable"><span>GO</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/GO/学习资料.html" class="sidebar-link">教学书籍</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/GO/并发编程/1并发同步概述" class="sidebar-heading clickable"><span>并发编程</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/GO/并发编程/1并发同步概述.html" class="sidebar-link">并发同步概述</a></li><li><a href="/blog/开发基础/GO/并发编程/2通道用例大全.html" class="sidebar-link">通道用例大全</a></li><li><a href="/blog/开发基础/GO/并发编程/3如何优雅地关闭通道.html" class="sidebar-link">如何优雅地关闭通道</a></li><li><a href="/blog/开发基础/GO/并发编程/4其它并发同步技术.html" class="sidebar-link">sync 标准库包中提供的并发同步技术</a></li><li><a href="/blog/开发基础/GO/并发编程/5原子操作 .html" class="sidebar-link">sync/atomic 标准库包中提供的原子操作</a></li><li><a href="/blog/开发基础/GO/并发编程/6Go中的内存顺序保证.html" class="sidebar-link">Go中的内存顺序保证</a></li><li><a href="/blog/开发基础/GO/并发编程/7一些常见并发编程错误.html" class="sidebar-link">一些常见并发编程错误</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/GO/开发环境搭建/Docker和VS Code的Go开发环境" class="sidebar-heading clickable"><span>开发环境搭建</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/GO/开发环境搭建/Docker和VS Code的Go开发环境.html" class="sidebar-link">Docker和VS Code的Go开发环境</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="命令-mod"><a href="#命令-mod" class="header-anchor">#</a> 命令-mod</h1> <p>我个人觉得，一个包管理工具应该有以下功能：<br>
基本功能</p> <ol><li>依赖管理</li> <li>依赖包版本控制</li> <li>对应的包管理平台</li> <li>可以私有化部署</li></ol> <p>加分：</p> <ol><li>代码包是否可以复用</li> <li>构建，测试,打包</li> <li>发布上线</li></ol> <p>对比上面几点：<br>
目前做的最好的也就 maven了，gradle没有使用过，不知道。</p> <p>今天主角是go mod，先来谈谈没有使用go mod之前的问题。</p> <h2 id="使用go-path问题"><a href="#使用go-path问题" class="header-anchor">#</a> 使用go path问题</h2> <ol><li>代码开发必须在go path src目录下，不然，就有问题。</li> <li>依赖手动管理</li> <li>依赖包没有版本可言</li></ol> <p>从这个看， go path不算包管理工具</p> <h2 id="govendor"><a href="#govendor" class="header-anchor">#</a> govendor</h2> <ol><li>解决了包依赖，一个配置文件就管理</li> <li>依赖包全都下载到项目vendor下，每个项目都把有一份。拉取项目时,开始怀疑人生。</li></ol> <h2 id="go-mod介绍"><a href="#go-mod介绍" class="header-anchor">#</a> go mod介绍</h2> <p>go modules 是 golang 1.11 新加的特性。现在1.12 已经发布了，是时候用起来了。Modules官方定义为：</p> <blockquote><p>模块是相关Go包的集合。modules是源代码交换和版本控制的单元。 go命令直接支持使用modules，包括记录和解析对其他模块的依赖性。modules替换旧的基于GOPATH的方法来指定在给定构建中使用哪些源文件。</p></blockquote> <h2 id="如何使用go-mod"><a href="#如何使用go-mod" class="header-anchor">#</a> 如何使用go mod</h2> <p>首先，必须升级go到1.11, 目前版本是1.14<br>
下面我以我自己升级演示：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>
<span class="token comment">## 卸载旧版本，删除对应文件</span>

brew uninstall -f go

<span class="token comment">## 更新一下brew</span>

brew update

<span class="token comment">## 安装go</span>

brew <span class="token function">install</span> go
</code></pre></div><p>上面升级完了，使用 <code>go version</code> 看下版本</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">go</span> version go1<span class="token punctuation">.</span><span class="token number">14.1</span> darwin<span class="token operator">/</span>amd64
</code></pre></div><p>下面设置go mod和go proxy</p> <div class="language-bash extra-class"><pre class="language-bash"><code>go <span class="token function">env</span> -w <span class="token assign-left variable">GOBIN</span><span class="token operator">=</span>/Users/youdi/go/bin
go <span class="token function">env</span> -w <span class="token assign-left variable">GO111MODULE</span><span class="token operator">=</span>on
go <span class="token function">env</span> -w <span class="token assign-left variable">GOPROXY</span><span class="token operator">=</span>https://goproxy.cn,direct // 使用七牛云的
</code></pre></div><p>注意： go env -w会将配置写到 <code>GOENV=&quot;/Users/youdi/Library/Application Support/go/env&quot;</code></p> <p>下面看下我的配置</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code>GO111MODULE<span class="token operator">=</span><span class="token string">&quot;on&quot;</span>
GOARCH<span class="token operator">=</span><span class="token string">&quot;amd64&quot;</span>
GOBIN<span class="token operator">=</span><span class="token string">&quot;/Users/youdi/go/bin&quot;</span>
GOCACHE<span class="token operator">=</span><span class="token string">&quot;/Users/youdi/Library/Caches/go-build&quot;</span>
GOENV<span class="token operator">=</span><span class="token string">&quot;/Users/youdi/Library/Application Support/go/env&quot;</span>
GOEXE<span class="token operator">=</span><span class="token string">&quot;&quot;</span>
GOFLAGS<span class="token operator">=</span><span class="token string">&quot;&quot;</span>
GOHOSTARCH<span class="token operator">=</span><span class="token string">&quot;amd64&quot;</span>
GOHOSTOS<span class="token operator">=</span><span class="token string">&quot;darwin&quot;</span>
GOINSECURE<span class="token operator">=</span><span class="token string">&quot;&quot;</span>
GONOPROXY<span class="token operator">=</span><span class="token string">&quot;&quot;</span>
GONOSUMDB<span class="token operator">=</span><span class="token string">&quot;&quot;</span>
GOOS<span class="token operator">=</span><span class="token string">&quot;darwin&quot;</span>
GOPATH<span class="token operator">=</span><span class="token string">&quot;/Users/youdi/go&quot;</span>
GOPRIVATE<span class="token operator">=</span><span class="token string">&quot;&quot;</span>
GOPROXY<span class="token operator">=</span>&quot;https<span class="token punctuation">:</span><span class="token comment">//goproxy.cn,direct&quot;</span>
GOROOT<span class="token operator">=</span><span class="token string">&quot;/usr/local/go&quot;</span>
GOSUMDB<span class="token operator">=</span><span class="token string">&quot;off&quot;</span>
GOTMPDIR<span class="token operator">=</span><span class="token string">&quot;&quot;</span>
GOTOOLDIR<span class="token operator">=</span><span class="token string">&quot;/usr/local/go/pkg/tool/darwin_amd64&quot;</span>
GCCGO<span class="token operator">=</span><span class="token string">&quot;gccgo&quot;</span>
AR<span class="token operator">=</span><span class="token string">&quot;ar&quot;</span>
CC<span class="token operator">=</span><span class="token string">&quot;clang&quot;</span>
CXX<span class="token operator">=</span><span class="token string">&quot;clang++&quot;</span>
CGO_ENABLED<span class="token operator">=</span><span class="token string">&quot;1&quot;</span>
GOMOD<span class="token operator">=</span><span class="token string">&quot;/dev/null&quot;</span>
CGO_CFLAGS<span class="token operator">=</span><span class="token string">&quot;-g -O2&quot;</span>
CGO_CPPFLAGS<span class="token operator">=</span><span class="token string">&quot;&quot;</span>
CGO_CXXFLAGS<span class="token operator">=</span><span class="token string">&quot;-g -O2&quot;</span>
CGO_FFLAGS<span class="token operator">=</span><span class="token string">&quot;-g -O2&quot;</span>
CGO_LDFLAGS<span class="token operator">=</span><span class="token string">&quot;-g -O2&quot;</span>
PKG_CONFIG<span class="token operator">=</span><span class="token string">&quot;pkg-config&quot;</span>
GOGCCFLAGS<span class="token operator">=</span><span class="token string">&quot;-fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=/var/folders/8m/v_1j4dgs7rzgqq4p_4_8k_nr0000gn/T/go-build221113671=/tmp/go-build -gno-record-gcc-switches -fno-common&quot;</span>
</code></pre></div><p>我们看一下，我修改的内容</p> <p>cat /Users/youdi/Library/Application Support/go/env</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">GO111MODULE</span><span class="token operator">=</span>on
<span class="token assign-left variable">GOBIN</span><span class="token operator">=</span>/Users/youdi/go/bin
<span class="token assign-left variable">GOPROXY</span><span class="token operator">=</span>https://goproxy.cn,direct
<span class="token assign-left variable">GOSUMDB</span><span class="token operator">=</span>off
</code></pre></div><h2 id="go111module"><a href="#go111module" class="header-anchor">#</a> GO111MODULE</h2> <p>GO111MODULE 有三个值：off, on和auto（默认值）。</p> <p>GO111MODULE=off，go命令行将不会支持module功能，寻找依赖包的方式将会沿用旧版本那种通过vendor目录或者GOPATH模式来查找。<br>
GO111MODULE=on，go命令行会使用modules，而一点也不会去GOPATH目录下查找。<br>
GO111MODULE=auto，默认值，go命令行将会根据当前目录来决定是否启用module功能。这种情况下可以分为两种情形：</p> <div class="language-go extra-class"><pre class="language-go"><code>当前目录在GOPATH<span class="token operator">/</span>src之外且该目录包含<span class="token keyword">go</span><span class="token punctuation">.</span>mod文件
当前文件在包含<span class="token keyword">go</span><span class="token punctuation">.</span>mod文件的目录下面。
</code></pre></div><p>当modules功能启用时，依赖包的存放位置变更为$GOPATH/pkg，允许同一个package多个版本并存，且多个项目可以共享缓存的 module</p> <p>我们看下目录：</p> <p>cd /Users/youdi/go/pkg</p> <div class="language-css extra-class"><pre class="language-css"><code>├── darwin_amd64 │ ├── github.com │ ├── go.etcd.io │ ├── golang │ ├── golang.org │ ├── gopkg.in │ ├── quickstart │ └── uc.a ├── mod │ ├── cache │ ├── github.com │ ├── golang.org │ ├── google.golang.org │ └── gopkg.in └── sumdb └── sum.golang.org
</code></pre></div><h2 id="go-mod命令"><a href="#go-mod命令" class="header-anchor">#</a> go mod命令</h2> <p>golang 提供了 <code>go mod</code> 命令来管理包。</p> <p>go help mod</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Go mod provides access to operations on modules.

Note that support <span class="token keyword">for</span> modules is built into all the go commands,
not just <span class="token string">'go mod'</span><span class="token builtin class-name">.</span> For example, day-to-day adding, removing, upgrading,
and downgrading of dependencies should be <span class="token keyword">done</span> using <span class="token string">'go get'</span><span class="token builtin class-name">.</span>
See <span class="token string">'go help modules'</span> <span class="token keyword">for</span> an overview of module functionality.

Usage:

    go mod <span class="token operator">&lt;</span>command<span class="token operator">&gt;</span> <span class="token punctuation">[</span>arguments<span class="token punctuation">]</span>

The commands are:

    download    download modules to <span class="token builtin class-name">local</span> cache
    edit        edit go.mod from tools or scripts
    graph       print module requirement graph
    init        initialize new module <span class="token keyword">in</span> current directory
    tidy        <span class="token function">add</span> missing and remove unused modules
    vendor      <span class="token function">make</span> vendored copy of dependencies
    verify      verify dependencies have expected content
    why         explain why packages or modules are needed

Use <span class="token string">&quot;go help mod &lt;command&gt;&quot;</span> <span class="token keyword">for</span> <span class="token function">more</span> information about a command.
</code></pre></div><p>go mod 有以下命令：</p> <table><thead><tr><th>命令</th> <th>说明</th></tr></thead> <tbody><tr><td>download</td> <td>download modules to local cache(下载依赖包)</td></tr> <tr><td>edit</td> <td>edit go.mod from tools or scripts（编辑go.mod)</td></tr> <tr><td>graph</td> <td>print module requirement graph (打印模块依赖图)</td></tr> <tr><td>verify</td> <td>initialize new module in current directory（在当前目录初始化mod）</td></tr> <tr><td>tidy</td> <td>add missing and remove unused modules(拉取缺少的模块，移除不用的模块)</td></tr> <tr><td>vendor</td> <td>make vendored copy of dependencies(将依赖复制到vendor下)</td></tr> <tr><td>verify</td> <td>verify dependencies have expected content (验证依赖是否正确）</td></tr> <tr><td>why</td> <td>explain why packages or modules are needed(解释为什么需要依赖)</td></tr></tbody></table> <p>比较常用的是 <code>init</code> , <code>tidy</code> , <code>edit</code></p> <h2 id="使用go-mod管理一个新项目"><a href="#使用go-mod管理一个新项目" class="header-anchor">#</a> 使用go mod管理一个新项目</h2> <h3 id="_1-初始化项目"><a href="#_1-初始化项目" class="header-anchor">#</a> 1. 初始化项目</h3> <p>可以随便找一个目录创建项目，我使用习惯用IDEA进行创建</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">mkdir</span> Gone
<span class="token builtin class-name">cd</span> Gone
go mod init Gone
</code></pre></div><p>查看一下 go.mod文件</p> <div class="language-go extra-class"><pre class="language-go"><code>module Gone

<span class="token keyword">go</span> <span class="token number">1.14</span>
</code></pre></div><p>go.mod文件一旦创建后，它的内容将会被go toolchain全面掌控。go toolchain会在各类命令执行时，比如go get、go build、go mod等修改和维护go.mod文件。</p> <p>go.mod 提供了module, require、replace和exclude 四个命令</p> <ul><li><code>module</code> 语句指定包的名字（路径）</li> <li><code>require</code> 语句指定的依赖项模块</li> <li><code>replace</code> 语句可以替换依赖项模块</li> <li><code>exclude</code> 语句可以忽略依赖项模块</li></ul> <h3 id="_2-添加依赖"><a href="#_2-添加依赖" class="header-anchor">#</a> 2. 添加依赖</h3> <p>创建 main.go文件</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;github.com/gin-gonic/gin&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    r <span class="token operator">:=</span> gin<span class="token punctuation">.</span><span class="token function">Default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    r<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/ping&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> gin<span class="token punctuation">.</span>H<span class="token punctuation">{</span>
            <span class="token string">&quot;message&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;pong&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    r<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// listen and serve on 0.0.0.0:8080 (for windows &quot;localhost:8080&quot;)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>执行 go run main.go 运行代码会发现 go mod 会自动查找依赖自动下载<br>
再查看 <code>go.mod</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code>module Gone

go <span class="token number">1.14</span>

require github.com/gin-gonic/gin v1.6.3
</code></pre></div><p>go module 安装 package 的原則是先拉最新的 release tag，若无tag则拉最新的commit</p> <p>go 会自动生成一个 go.sum 文件来记录 dependency tree</p> <p><img src="https:////upload-images.jianshu.io/upload_images/1293367-6d16a0d961653490.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p> <p>再次执行脚本 go run main.go发现跳过了检查并安装依赖的步骤。</p> <p>可以使用命令 go list -m -u all 来检查可以升级的package，使用go get -u need-upgrade-package 升级后会将新的依赖版本更新到go.mod * 也可以使用 go get -u 升级所有依赖</p> <p>去mod包缓存下看看</p> <div class="language-bash extra-class"><pre class="language-bash"><code>/Users/youdi/go/pkg/mod/github.com/gin-gonic/gin@v1.6.3
</code></pre></div><h2 id="go-get升级"><a href="#go-get升级" class="header-anchor">#</a> go get升级</h2> <ul><li>运行 go get -u 将会升级到最新的次要版本或者修订版本(x.y.z, z是修订版本号， y是次要版本号)</li> <li>运行 go get -u=patch 将会升级到最新的修订版本</li> <li>运行 go get package@version 将会升级到指定的版本号version</li> <li>运行go get如果有版本的更改，那么go.mod文件也会更改</li></ul> <h2 id="使用replace替换无法直接获取的package"><a href="#使用replace替换无法直接获取的package" class="header-anchor">#</a> 使用replace替换无法直接获取的package</h2> <p>由于某些已知的原因，并不是所有的package都能成功下载，比如：golang.org下的包。</p> <p>modules 可以通过在 go.mod 文件中使用 replace 指令替换成github上对应的库，比如：</p> <div class="language-go extra-class"><pre class="language-go"><code>replace <span class="token punctuation">(</span>
    golang<span class="token punctuation">.</span>org<span class="token operator">/</span>x<span class="token operator">/</span>crypto v0<span class="token punctuation">.</span><span class="token number">0.0</span><span class="token operator">-</span><span class="token number">20190313024323</span><span class="token operator">-</span>a1f597ede03a <span class="token operator">=</span><span class="token operator">&gt;</span> github<span class="token punctuation">.</span>com<span class="token operator">/</span>golang<span class="token operator">/</span>crypto v0<span class="token punctuation">.</span><span class="token number">0.0</span><span class="token operator">-</span><span class="token number">20190313024323</span><span class="token operator">-</span>a1f597ede03a
<span class="token punctuation">)</span>
</code></pre></div><h2 id="go-mod发布和使用"><a href="#go-mod发布和使用" class="header-anchor">#</a> go mod发布和使用</h2> <p>参考Roberto Selbach写的go mod入门文章，文末，我给出链接</p> <h2 id="creating-a-module"><a href="#creating-a-module" class="header-anchor">#</a> Creating a Module</h2> <p>如果你设置好go mod了，那你就可以在任何目录下随便创建</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">$mkdir</span> gomodone
<span class="token variable">$cd</span> gomodone
</code></pre></div><p>在这个目录下创建一个文件 <code>say.go</code></p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> gomodone

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span> 

<span class="token comment">// say Hi to someone</span>
<span class="token keyword">func</span> <span class="token function">SayHi</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;Hi, %s&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>初始化一个 <code>go.mod</code> 文件</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ go mod init github.com/jacksonyoudi/gomodone
go: creating new go.mod: module github.com/jacksonyoudi/gomodone
</code></pre></div><p>查看 go.mod内容如下：</p> <div class="language-go extra-class"><pre class="language-go"><code>github<span class="token punctuation">.</span>com<span class="token operator">/</span>jacksonyoudi<span class="token operator">/</span>gomodone
<span class="token keyword">go</span> <span class="token number">1.14</span>
</code></pre></div><p>下面我们要将这个module发布到github上，然后在另外一个程序使用</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">$git</span> init
<span class="token variable">$vim</span> .gitiiignore
<span class="token variable">$git</span> commit -am <span class="token string">&quot;init&quot;</span>
// github创建对应的repo
<span class="token variable">$git</span> remote <span class="token function">add</span> origin git@github.com:jacksonyoudi/gomodone.git
<span class="token variable">$git</span> push -u origin master
</code></pre></div><p>执行完，上面我们就相当于发布完了。</p> <p>如果有人需要使用，就可以使用</p> <div class="language-bash extra-class"><pre class="language-bash"><code>go get github.com/jacksonyoudi/gomodone
</code></pre></div><p>这个时候没有加tag，所以，没有版本的控制。默认是v0.0.0后面接上时间和commitid。如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>gomodone@v0.0.0-20200517004046-ee882713fd1e
</code></pre></div><p>官方不建议这样做，没有进行版本控制管理。</p> <h2 id="module-versioning"><a href="#module-versioning" class="header-anchor">#</a> module versioning</h2> <p>使用tag，进行版本控制</p> <h3 id="making-a-release"><a href="#making-a-release" class="header-anchor">#</a> making a release</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> tag v1.0.0
<span class="token function">git</span> push --tags
</code></pre></div><p>操作完，我们的module就发布了一个v1.0.0的版本了。</p> <p>推荐在这个状态下，再切出一个分支，用于后续v1.0.0的修复推送, 不要直接在master分支修复</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">$git</span> checkout -b v1
<span class="token variable">$git</span> push -u origin v1
</code></pre></div><h2 id="use-our-module"><a href="#use-our-module" class="header-anchor">#</a> use our module</h2> <p>上面已经发布了一个v1.0.0的版本，我们可以在另一个项目中使用，创建一个go的项目</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">$mkdir</span> Gone
<span class="token variable">$cd</span> Gone
<span class="token variable">$vim</span> main.go
</code></pre></div><div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;github.com/jacksonyoudi/gomodone&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>gomodone<span class="token punctuation">.</span><span class="token function">SayHi</span><span class="token punctuation">(</span><span class="token string">&quot;Roberto&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>代码写好了，我们生成 go mod文件</p> <div class="language-bash extra-class"><pre class="language-bash"><code>go mod init Gone
</code></pre></div><p>上面命令执行完，会生成 go mod文件<br>
看下mod文件：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>module Gone

go <span class="token number">1.14</span>

require <span class="token punctuation">(</span>
    github.com/jacksonyoudi/gomodone v1.0.0
<span class="token punctuation">)</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">$go</span> mod tidy
go: finding module <span class="token keyword">for</span> package github.com/jacksonyoudi/gomodone
go: found github.com/jacksonyoudi/gomodone <span class="token keyword">in</span> github.com/jacksonyoudi/gomodone v1.0.0
</code></pre></div><p>同时还生成了go.sum, 其中包含软件包的哈希值，以确保我们具有正确的版本和文件。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>github.com/jacksonyoudi/gomodone v1.0.1 h1:jFd+qZlAB0R3zqrC9kwO8IgPrAdayMUS0rSHMDc/uG8<span class="token operator">=</span>
github.com/jacksonyoudi/gomodone v1.0.1/go.mod h1:XWi+BLbuiuC2YM8Qz4yQzTSPtHt3T3hrlNN2pNlyA94<span class="token operator">=</span>
github.com/jacksonyoudi/gomodone/v2 v2.0.0 h1:GpzGeXCx/Xv2ueiZJ8hEhFwLu7xjxLBjkOYSmg8Ya/w<span class="token operator">=</span>
github.com/jacksonyoudi/gomodone/v2 v2.0.0/go.mod h1:L8uFPSZNHoAhpaePWUfKmGinjufYdw9c2i70xtBorSw<span class="token operator">=</span>
</code></pre></div><p>这个内容是下面的，需要操作执行的结果</p> <p>go run main.go就可以运行了</p> <h2 id="making-a-bugfix-release"><a href="#making-a-bugfix-release" class="header-anchor">#</a> Making a bugfix release</h2> <p>假如fix一个bug, 我们在v1版本上进行修复</p> <p>修改代码如下：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// say Hi to someone</span>
<span class="token keyword">func</span> <span class="token function">SayHi</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>

<span class="token operator">*</span>       <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;Hi, %s&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
<span class="token operator">*</span>       <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;Hi, %s!&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><p>修复好，我们开始push</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> commit -m <span class="token string">&quot;Emphasize our friendliness&quot;</span> say.go
$ <span class="token function">git</span> tag v1.0.1
$ <span class="token function">git</span> push --tags origin v1
</code></pre></div><h3 id="updating-modules"><a href="#updating-modules" class="header-anchor">#</a> Updating modules</h3> <p>刚才fix bug，所以要在我们使用项目中更新</p> <p>这个需要我们手动执行更新module操作</p> <p>我们通过使用我们的好朋友来做到这一点go get：</p> <ul><li>运行  <code>go get -u</code> 以使用最新的  minor  版本或修补程序版本（即它将从1.0.0更新到例如1.0.1，或者，如果可用，则更新为1.1.0）</li> <li>运行  go get -u=patch 以使用最新的  修补程序  版本（即，将更新为1.0.1但不更新  为1.1.0）</li> <li>运行go get package@version 以更新到特定版本（例如<a href="https://links.jianshu.com/go?to=http%3A%2F%2Fgithub.com%2Fjacksonyoudi%2Fgomodone%40v1.0.1" target="_blank" rel="noopener noreferrer">github.com/jacksonyoudi/gomodone@v1.0.1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）</li></ul> <p>目前module最新的也是v1.0.1</p> <div class="language-bash extra-class"><pre class="language-bash"><code>// 更新最新
<span class="token variable">$go</span> get -u
<span class="token variable">$go</span> get -u<span class="token operator">=</span>patch
//指定包，指定版本
<span class="token variable">$go</span> get github.com/jacksonyoudi/gomodone@v1.0.1
</code></pre></div><p>操作完，go.mod文件会修改如下:</p> <div class="language-go extra-class"><pre class="language-go"><code>module Gone

<span class="token keyword">go</span> <span class="token number">1.14</span>

require <span class="token punctuation">(</span>
    github<span class="token punctuation">.</span>com<span class="token operator">/</span>jacksonyoudi<span class="token operator">/</span>gomodone v1<span class="token punctuation">.</span><span class="token number">0.1</span>
<span class="token punctuation">)</span>
</code></pre></div><h3 id="major-versions"><a href="#major-versions" class="header-anchor">#</a> Major versions</h3> <p>根据语义版本语义，主要版本与次要版本  不同。主要版本可能会破坏向后兼容性。从Go模块的角度来看，主要版本是  完全不同的软件包。乍一看这听起来很奇怪，但这是有道理的：两个不兼容的库版本是两个不同的库。<br>
比如下面修改，完全破坏了兼容性。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> gomodone

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;errors&quot;</span>
    <span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">// Hi returns a friendly greeting</span>
<span class="token comment">// Hi returns a friendly greeting in language lang</span>
<span class="token keyword">func</span> <span class="token function">SayHi</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> lang <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> lang <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;en&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;Hi, %s!&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
    <span class="token keyword">case</span> <span class="token string">&quot;pt&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;Oi, %s!&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
    <span class="token keyword">case</span> <span class="token string">&quot;es&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;¡Hola, %s!&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
    <span class="token keyword">case</span> <span class="token string">&quot;fr&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;Bonjour, %s!&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;unknown language&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如上，我们需要不同的大版本，这种情况下</p> <p>修改 go.mod如下</p> <div class="language-go extra-class"><pre class="language-go"><code>module github<span class="token punctuation">.</span>com<span class="token operator">/</span>jacksonyoudi<span class="token operator">/</span>gomodone<span class="token operator">/</span>v2

<span class="token keyword">go</span> <span class="token number">1.14</span>
</code></pre></div><p>然后，重新tag，push</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> commit say.go -m <span class="token string">&quot;Change Hi to allow multilang&quot;</span>
$ <span class="token function">git</span> checkout -b v2 <span class="token comment"># 用于v2版本，后续修复v2</span>
$ <span class="token function">git</span> commit go.mod -m <span class="token string">&quot;Bump version to v2&quot;</span>
$ <span class="token function">git</span> tag v2.0.0
$ <span class="token function">git</span> push --tags origin v2 
</code></pre></div><h2 id="updating-to-a-major-version"><a href="#updating-to-a-major-version" class="header-anchor">#</a> Updating to a major version</h2> <p>即使发布了库的新不兼容版本，现有软件 也不会中断，因为它将继续使用现有版本1.0.1。go get -u 将不会获得版本2.0.0。<br>
如果想使用v2.0.0, 代码改成如下：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;github.com/jacksonyoudi/gomodone/v2&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    g<span class="token punctuation">,</span> err <span class="token operator">:=</span> gomodone<span class="token punctuation">.</span><span class="token function">SayHi</span><span class="token punctuation">(</span><span class="token string">&quot;Roberto&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pt&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>执行 go mod tidy</p> <div class="language-bash extra-class"><pre class="language-bash"><code>go: finding module <span class="token keyword">for</span> package github.com/jacksonyoudi/gomodone/v2
go: downloading github.com/jacksonyoudi/gomodone/v2 v2.0.0
go: found github.com/jacksonyoudi/gomodone/v2 <span class="token keyword">in</span> github.com/jacksonyoudi/gomodone/v2 v2.0.0
</code></pre></div><p>当然，两个版本都可以同时使用, 使用别名<br>
如下：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;github.com/jacksonyoudi/gomodone&quot;</span>
    mv2 <span class="token string">&quot;github.com/jacksonyoudi/gomodone/v2&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    g<span class="token punctuation">,</span> err <span class="token operator">:=</span> mv2<span class="token punctuation">.</span><span class="token function">SayHi</span><span class="token punctuation">(</span><span class="token string">&quot;Roberto&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pt&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>gomodone<span class="token punctuation">.</span><span class="token function">SayHi</span><span class="token punctuation">(</span><span class="token string">&quot;Roberto&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>执行一下 <code>go mod tidy</code></p> <h2 id="vendoring"><a href="#vendoring" class="header-anchor">#</a> Vendoring</h2> <p>默认是忽略vendor的，如果想在项目目录下有vendor可以执行下面命令</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">$go</span> vendor
</code></pre></div><p>当然，如果构建程序的时候，希望使用vendor中的依赖，</p> <div class="language-go extra-class"><pre class="language-go"><code>$ <span class="token keyword">go</span> build <span class="token operator">-</span>mod vendor
</code></pre></div><h2 id="idea下开发go"><a href="#idea下开发go" class="header-anchor">#</a> IDEA下开发GO</h2> <ol><li>创建go项目</li></ol> <p><img src="https:////upload-images.jianshu.io/upload_images/1293367-81ebb7e55f2858e8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p> <ol><li><p>创建完项目，会自动生成go mod文件</p> <p>如果需要修改，可以手动修改，加入git等操作</p></li> <li><p>写业务逻辑代码</p></li></ol> <p><img src="https:////upload-images.jianshu.io/upload_images/1293367-059fa1b8f421c9d7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p> <ol start="3"><li>解决依赖，更新go.mod</li></ol> <p><img src="https:////upload-images.jianshu.io/upload_images/1293367-69ee0eb8eb9024cc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p> <ol><li>go build</li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/21/2021, 1:25:38 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/开发基础/GO/其他文章/Go问答.html" class="prev">
        Go问答
      </a></span> <span class="next"><a href="/blog/开发基础/GO/其他文章/基础-Golang的time.NewTimer单次定时器使用案例.html">
        基础-Golang的time. NewTimer单次定时器使用案例
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.3a2a0635.js" defer></script><script src="/blog/assets/js/3.21e2e031.js" defer></script><script src="/blog/assets/js/108.a5880443.js" defer></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>值部 | 一名GO+PHP工程师</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/blog/assets/css/0.styles.b3aba94c.css" as="style"><link rel="preload" href="/blog/assets/js/app.3a2a0635.js" as="script"><link rel="preload" href="/blog/assets/js/3.21e2e031.js" as="script"><link rel="preload" href="/blog/assets/js/49.cffe09bd.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.d053698b.js"><link rel="prefetch" href="/blog/assets/js/100.d5cb88cb.js"><link rel="prefetch" href="/blog/assets/js/101.6bbce255.js"><link rel="prefetch" href="/blog/assets/js/102.968ea43c.js"><link rel="prefetch" href="/blog/assets/js/103.c5c5130e.js"><link rel="prefetch" href="/blog/assets/js/104.161b590d.js"><link rel="prefetch" href="/blog/assets/js/105.eaae1ece.js"><link rel="prefetch" href="/blog/assets/js/106.8bdfd9bf.js"><link rel="prefetch" href="/blog/assets/js/107.c9b230ac.js"><link rel="prefetch" href="/blog/assets/js/108.a5880443.js"><link rel="prefetch" href="/blog/assets/js/109.bab44539.js"><link rel="prefetch" href="/blog/assets/js/11.bc7d0bf1.js"><link rel="prefetch" href="/blog/assets/js/110.7ba602f1.js"><link rel="prefetch" href="/blog/assets/js/111.a11c7d35.js"><link rel="prefetch" href="/blog/assets/js/112.bb76db96.js"><link rel="prefetch" href="/blog/assets/js/113.9b314292.js"><link rel="prefetch" href="/blog/assets/js/114.f28a4d47.js"><link rel="prefetch" href="/blog/assets/js/115.6a21a21a.js"><link rel="prefetch" href="/blog/assets/js/116.1fd8cdf3.js"><link rel="prefetch" href="/blog/assets/js/117.193b54e8.js"><link rel="prefetch" href="/blog/assets/js/118.d91f7ec2.js"><link rel="prefetch" href="/blog/assets/js/119.857d484f.js"><link rel="prefetch" href="/blog/assets/js/12.2003a6c5.js"><link rel="prefetch" href="/blog/assets/js/120.c2fc1bab.js"><link rel="prefetch" href="/blog/assets/js/121.e93dfc27.js"><link rel="prefetch" href="/blog/assets/js/122.0ea0246a.js"><link rel="prefetch" href="/blog/assets/js/123.31436cd9.js"><link rel="prefetch" href="/blog/assets/js/124.6b522c49.js"><link rel="prefetch" href="/blog/assets/js/125.7be39e4f.js"><link rel="prefetch" href="/blog/assets/js/126.8b8a9b2d.js"><link rel="prefetch" href="/blog/assets/js/127.7d06eb7f.js"><link rel="prefetch" href="/blog/assets/js/128.3498b329.js"><link rel="prefetch" href="/blog/assets/js/129.b4fdbe4d.js"><link rel="prefetch" href="/blog/assets/js/13.d2837ebd.js"><link rel="prefetch" href="/blog/assets/js/130.4acdc8e4.js"><link rel="prefetch" href="/blog/assets/js/131.ef9fa33c.js"><link rel="prefetch" href="/blog/assets/js/132.1f9b4bbb.js"><link rel="prefetch" href="/blog/assets/js/133.a417b118.js"><link rel="prefetch" href="/blog/assets/js/134.6a6cf86d.js"><link rel="prefetch" href="/blog/assets/js/135.313b60a3.js"><link rel="prefetch" href="/blog/assets/js/136.2c3aff88.js"><link rel="prefetch" href="/blog/assets/js/137.50106a44.js"><link rel="prefetch" href="/blog/assets/js/138.87124965.js"><link rel="prefetch" href="/blog/assets/js/139.cb5c4cb6.js"><link rel="prefetch" href="/blog/assets/js/14.48fb5c32.js"><link rel="prefetch" href="/blog/assets/js/140.9719663d.js"><link rel="prefetch" href="/blog/assets/js/141.b0090c83.js"><link rel="prefetch" href="/blog/assets/js/142.e385a422.js"><link rel="prefetch" href="/blog/assets/js/143.9d960553.js"><link rel="prefetch" href="/blog/assets/js/144.e3ef5a71.js"><link rel="prefetch" href="/blog/assets/js/145.95b58ec4.js"><link rel="prefetch" href="/blog/assets/js/146.92cd1d56.js"><link rel="prefetch" href="/blog/assets/js/147.1aad7186.js"><link rel="prefetch" href="/blog/assets/js/148.b0a6ba25.js"><link rel="prefetch" href="/blog/assets/js/149.cf51c7a4.js"><link rel="prefetch" href="/blog/assets/js/15.977c5e43.js"><link rel="prefetch" href="/blog/assets/js/150.8961d634.js"><link rel="prefetch" href="/blog/assets/js/151.d4337140.js"><link rel="prefetch" href="/blog/assets/js/152.d4fcbdac.js"><link rel="prefetch" href="/blog/assets/js/153.8f0df288.js"><link rel="prefetch" href="/blog/assets/js/154.3108e3fe.js"><link rel="prefetch" href="/blog/assets/js/155.1c76998b.js"><link rel="prefetch" href="/blog/assets/js/156.14a1e6f8.js"><link rel="prefetch" href="/blog/assets/js/157.2a90db8a.js"><link rel="prefetch" href="/blog/assets/js/158.f649eaa4.js"><link rel="prefetch" href="/blog/assets/js/159.bde474db.js"><link rel="prefetch" href="/blog/assets/js/16.cc3bb18b.js"><link rel="prefetch" href="/blog/assets/js/160.da7deb2a.js"><link rel="prefetch" href="/blog/assets/js/161.5124a074.js"><link rel="prefetch" href="/blog/assets/js/162.7f4358a0.js"><link rel="prefetch" href="/blog/assets/js/163.76da1c99.js"><link rel="prefetch" href="/blog/assets/js/164.ebc9b6a7.js"><link rel="prefetch" href="/blog/assets/js/165.f7cbff8f.js"><link rel="prefetch" href="/blog/assets/js/166.5bcaa3dd.js"><link rel="prefetch" href="/blog/assets/js/167.b4296d08.js"><link rel="prefetch" href="/blog/assets/js/168.27dc81ce.js"><link rel="prefetch" href="/blog/assets/js/169.4614ac4e.js"><link rel="prefetch" href="/blog/assets/js/17.180fd8e8.js"><link rel="prefetch" href="/blog/assets/js/170.e41001f5.js"><link rel="prefetch" href="/blog/assets/js/171.0724bbd4.js"><link rel="prefetch" href="/blog/assets/js/172.2d5b541f.js"><link rel="prefetch" href="/blog/assets/js/173.f03b20a0.js"><link rel="prefetch" href="/blog/assets/js/174.092074fb.js"><link rel="prefetch" href="/blog/assets/js/175.bbae3a5c.js"><link rel="prefetch" href="/blog/assets/js/176.2380b0cf.js"><link rel="prefetch" href="/blog/assets/js/177.67fa30a9.js"><link rel="prefetch" href="/blog/assets/js/178.7f4bf5e6.js"><link rel="prefetch" href="/blog/assets/js/18.fa5bec70.js"><link rel="prefetch" href="/blog/assets/js/19.82d0b6cb.js"><link rel="prefetch" href="/blog/assets/js/2.cf693890.js"><link rel="prefetch" href="/blog/assets/js/20.8d88eb5f.js"><link rel="prefetch" href="/blog/assets/js/21.04aa936c.js"><link rel="prefetch" href="/blog/assets/js/22.6f38dceb.js"><link rel="prefetch" href="/blog/assets/js/23.00b0c454.js"><link rel="prefetch" href="/blog/assets/js/24.4949647c.js"><link rel="prefetch" href="/blog/assets/js/25.f090d9de.js"><link rel="prefetch" href="/blog/assets/js/26.64e9b11e.js"><link rel="prefetch" href="/blog/assets/js/27.f6f1b280.js"><link rel="prefetch" href="/blog/assets/js/28.ba46dc32.js"><link rel="prefetch" href="/blog/assets/js/29.08dd160e.js"><link rel="prefetch" href="/blog/assets/js/30.1f6b9a8b.js"><link rel="prefetch" href="/blog/assets/js/31.edcef4fa.js"><link rel="prefetch" href="/blog/assets/js/32.763b7b98.js"><link rel="prefetch" href="/blog/assets/js/33.10fa82ac.js"><link rel="prefetch" href="/blog/assets/js/34.783e6db1.js"><link rel="prefetch" href="/blog/assets/js/35.86d13f87.js"><link rel="prefetch" href="/blog/assets/js/36.c81ca450.js"><link rel="prefetch" href="/blog/assets/js/37.6c8b6e4d.js"><link rel="prefetch" href="/blog/assets/js/38.fed1555d.js"><link rel="prefetch" href="/blog/assets/js/39.d8367356.js"><link rel="prefetch" href="/blog/assets/js/4.33e3eeff.js"><link rel="prefetch" href="/blog/assets/js/40.890bdfe6.js"><link rel="prefetch" href="/blog/assets/js/41.351a2bb7.js"><link rel="prefetch" href="/blog/assets/js/42.7dc0997f.js"><link rel="prefetch" href="/blog/assets/js/43.b1eb7b31.js"><link rel="prefetch" href="/blog/assets/js/44.96773f8a.js"><link rel="prefetch" href="/blog/assets/js/45.14984c3f.js"><link rel="prefetch" href="/blog/assets/js/46.360c94b5.js"><link rel="prefetch" href="/blog/assets/js/47.6ba6e036.js"><link rel="prefetch" href="/blog/assets/js/48.7e30092c.js"><link rel="prefetch" href="/blog/assets/js/5.93c02369.js"><link rel="prefetch" href="/blog/assets/js/50.10849ea7.js"><link rel="prefetch" href="/blog/assets/js/51.29fb5c68.js"><link rel="prefetch" href="/blog/assets/js/52.c183fd4d.js"><link rel="prefetch" href="/blog/assets/js/53.2102d53f.js"><link rel="prefetch" href="/blog/assets/js/54.a7def65b.js"><link rel="prefetch" href="/blog/assets/js/55.e1462b05.js"><link rel="prefetch" href="/blog/assets/js/56.d35a7dec.js"><link rel="prefetch" href="/blog/assets/js/57.f908b76a.js"><link rel="prefetch" href="/blog/assets/js/58.8c699c1a.js"><link rel="prefetch" href="/blog/assets/js/59.013048e6.js"><link rel="prefetch" href="/blog/assets/js/6.bf46d9ef.js"><link rel="prefetch" href="/blog/assets/js/60.96011719.js"><link rel="prefetch" href="/blog/assets/js/61.c57dc954.js"><link rel="prefetch" href="/blog/assets/js/62.24bf6999.js"><link rel="prefetch" href="/blog/assets/js/63.2f87f55d.js"><link rel="prefetch" href="/blog/assets/js/64.68cd3b45.js"><link rel="prefetch" href="/blog/assets/js/65.d1a0e0c0.js"><link rel="prefetch" href="/blog/assets/js/66.d694b5d5.js"><link rel="prefetch" href="/blog/assets/js/67.1d93ad03.js"><link rel="prefetch" href="/blog/assets/js/68.7a922734.js"><link rel="prefetch" href="/blog/assets/js/69.e8dc5f21.js"><link rel="prefetch" href="/blog/assets/js/7.965a7048.js"><link rel="prefetch" href="/blog/assets/js/70.0ab39b68.js"><link rel="prefetch" href="/blog/assets/js/71.32fb9ba8.js"><link rel="prefetch" href="/blog/assets/js/72.d7621fb4.js"><link rel="prefetch" href="/blog/assets/js/73.f0b18643.js"><link rel="prefetch" href="/blog/assets/js/74.f4b27305.js"><link rel="prefetch" href="/blog/assets/js/75.d52134dd.js"><link rel="prefetch" href="/blog/assets/js/76.af8a1eb5.js"><link rel="prefetch" href="/blog/assets/js/77.be15b0d2.js"><link rel="prefetch" href="/blog/assets/js/78.d456dcce.js"><link rel="prefetch" href="/blog/assets/js/79.12735350.js"><link rel="prefetch" href="/blog/assets/js/8.78eeb959.js"><link rel="prefetch" href="/blog/assets/js/80.2120e0e9.js"><link rel="prefetch" href="/blog/assets/js/81.04f50a1e.js"><link rel="prefetch" href="/blog/assets/js/82.db879ca5.js"><link rel="prefetch" href="/blog/assets/js/83.e89b8863.js"><link rel="prefetch" href="/blog/assets/js/84.07410b58.js"><link rel="prefetch" href="/blog/assets/js/85.d3e35fad.js"><link rel="prefetch" href="/blog/assets/js/86.f855e246.js"><link rel="prefetch" href="/blog/assets/js/87.bf22bce7.js"><link rel="prefetch" href="/blog/assets/js/88.6ed1a43d.js"><link rel="prefetch" href="/blog/assets/js/89.50e298db.js"><link rel="prefetch" href="/blog/assets/js/9.009d1183.js"><link rel="prefetch" href="/blog/assets/js/90.391f76ed.js"><link rel="prefetch" href="/blog/assets/js/91.d1662d38.js"><link rel="prefetch" href="/blog/assets/js/92.a65aa479.js"><link rel="prefetch" href="/blog/assets/js/93.bc850b53.js"><link rel="prefetch" href="/blog/assets/js/94.7dc858d7.js"><link rel="prefetch" href="/blog/assets/js/95.fce3d2c0.js"><link rel="prefetch" href="/blog/assets/js/96.7e3abf55.js"><link rel="prefetch" href="/blog/assets/js/97.64d3b035.js"><link rel="prefetch" href="/blog/assets/js/98.fdb7d67a.js"><link rel="prefetch" href="/blog/assets/js/99.9a416d3b.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.b3aba94c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">一名GO+PHP工程师</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://gitee.com/ColinWWL/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://gitee.com/ColinWWL/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/GO/Go类型系统/1Go类型系统概述" class="sidebar-heading clickable open"><span>Go类型系统</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/GO/Go类型系统/1Go类型系统概述.html" class="sidebar-link">Go类型系统概述</a></li><li><a href="/blog/开发基础/GO/Go类型系统/2指针.html" class="sidebar-link">指针</a></li><li><a href="/blog/开发基础/GO/Go类型系统/3结构体.html" class="sidebar-link">结构体</a></li><li><a href="/blog/开发基础/GO/Go类型系统/4值部.html" class="active sidebar-link">值部</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/Go类型系统/4值部.html#go类型分为两大类别-category" class="sidebar-link">Go类型分为两大类别（category）</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/Go类型系统/4值部.html#go中的两种指针类型" class="sidebar-link">Go中的两种指针类型</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/Go类型系统/4值部.html#第二个分类中的类型的-可能的-内部实现结构定义" class="sidebar-link">第二个分类中的类型的（可能的）内部实现结构定义</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/Go类型系统/4值部.html#映射、通道和函数类型的内部定义" class="sidebar-link">映射、通道和函数类型的内部定义</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/Go类型系统/4值部.html#切片类型的内部定义" class="sidebar-link">切片类型的内部定义</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/Go类型系统/4值部.html#字符串类型的内部结构" class="sidebar-link">字符串类型的内部结构</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/Go类型系统/4值部.html#接口类型的内部定义" class="sidebar-link">接口类型的内部定义</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/Go类型系统/4值部.html#在赋值中-底层间接值部将不会被复制" class="sidebar-link">在赋值中，底层间接值部将不会被复制</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/GO/Go类型系统/4值部.html#关于术语-引用类型-和-引用值" class="sidebar-link">关于术语“引用类型”和“引用值”</a></li></ul></li><li><a href="/blog/开发基础/GO/Go类型系统/5数组、切片和映射.html" class="sidebar-link">数组、切片和映射</a></li><li><a href="/blog/开发基础/GO/Go类型系统/6通道.html" class="sidebar-link">通道</a></li><li><a href="/blog/开发基础/GO/Go类型系统/7方法.html" class="sidebar-link">方法</a></li><li><a href="/blog/开发基础/GO/Go类型系统/8接口.html" class="sidebar-link">接口</a></li><li><a href="/blog/开发基础/GO/Go类型系统/9类型内嵌.html" class="sidebar-link">类型内嵌</a></li><li><a href="/blog/开发基础/GO/Go类型系统/10非类型安全指针.html" class="sidebar-link">非类型安全指针</a></li><li><a href="/blog/开发基础/GO/Go类型系统/11泛型.html" class="sidebar-link">泛型</a></li><li><a href="/blog/开发基础/GO/Go类型系统/12反射.html" class="sidebar-link">反射</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/GO/Go编程入门/1程序源代码基本元素介绍" class="sidebar-heading clickable"><span>Go编程入门</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/GO/Go编程入门/1程序源代码基本元素介绍.html" class="sidebar-link">程序源代码基本元素介绍</a></li><li><a href="/blog/开发基础/GO/Go编程入门/2关键字和标识符.html" class="sidebar-link">关键字和标识符</a></li><li><a href="/blog/开发基础/GO/Go编程入门/3基本类型和它们的字面量表示.html" class="sidebar-link">基本类型和它们的字面量表示</a></li><li><a href="/blog/开发基础/GO/Go编程入门/4常量和变量.html" class="sidebar-link">常量和变量</a></li><li><a href="/blog/开发基础/GO/Go编程入门/5运算操作符.html" class="sidebar-link">运算操作符</a></li><li><a href="/blog/开发基础/GO/Go编程入门/6函数声明和调用.html" class="sidebar-link">函数声明和调用</a></li><li><a href="/blog/开发基础/GO/Go编程入门/7代码包和包引入.html" class="sidebar-link">代码包和包引入</a></li><li><a href="/blog/开发基础/GO/Go编程入门/8表达式、语句和简单语句.html" class="sidebar-link">表达式、语句和简单语句</a></li><li><a href="/blog/开发基础/GO/Go编程入门/9基本流程控制语法.html" class="sidebar-link">基本流程控制语法</a></li><li><a href="/blog/开发基础/GO/Go编程入门/10协程、延迟函数调用、以及恐慌和恢复.html" class="sidebar-link">协程、延迟函数调用、以及恐慌和恢复</a></li><li><a href="/blog/开发基础/GO/Go编程入门/GO官方链接工具.html" class="sidebar-link">GO官方链接工具</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/GO/其他文章/Go技巧" class="sidebar-heading clickable"><span>其他文章</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/GO/其他文章/Go技巧.html" class="sidebar-link">Go技巧</a></li><li><a href="/blog/开发基础/GO/其他文章/Go细节.html" class="sidebar-link">Go细节</a></li><li><a href="/blog/开发基础/GO/其他文章/Go问答.html" class="sidebar-link">Go问答</a></li><li><a href="/blog/开发基础/GO/其他文章/命令-mod.html" class="sidebar-link">命令-mod</a></li><li><a href="/blog/开发基础/GO/其他文章/基础-Golang的time.NewTimer单次定时器使用案例.html" class="sidebar-link">基础-Golang的time. NewTimer单次定时器使用案例</a></li><li><a href="/blog/开发基础/GO/其他文章/基础-Go中的nil.html" class="sidebar-link">Go中的 nil</a></li><li><a href="/blog/开发基础/GO/其他文章/基础-Go代码断行规则.html" class="sidebar-link">Go代码断行规则</a></li><li><a href="/blog/开发基础/GO/其他文章/基础-表达式估值顺序规则.html" class="sidebar-link">表达式估值顺序规则</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/GO/学习资料" class="sidebar-heading clickable"><span>GO</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/GO/学习资料.html" class="sidebar-link">教学书籍</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/GO/并发编程/1并发同步概述" class="sidebar-heading clickable"><span>并发编程</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/GO/并发编程/1并发同步概述.html" class="sidebar-link">并发同步概述</a></li><li><a href="/blog/开发基础/GO/并发编程/2通道用例大全.html" class="sidebar-link">通道用例大全</a></li><li><a href="/blog/开发基础/GO/并发编程/3如何优雅地关闭通道.html" class="sidebar-link">如何优雅地关闭通道</a></li><li><a href="/blog/开发基础/GO/并发编程/4其它并发同步技术.html" class="sidebar-link">sync 标准库包中提供的并发同步技术</a></li><li><a href="/blog/开发基础/GO/并发编程/5原子操作 .html" class="sidebar-link">sync/atomic 标准库包中提供的原子操作</a></li><li><a href="/blog/开发基础/GO/并发编程/6Go中的内存顺序保证.html" class="sidebar-link">Go中的内存顺序保证</a></li><li><a href="/blog/开发基础/GO/并发编程/7一些常见并发编程错误.html" class="sidebar-link">一些常见并发编程错误</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/GO/开发环境搭建/Docker和VS Code的Go开发环境" class="sidebar-heading clickable"><span>开发环境搭建</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/GO/开发环境搭建/Docker和VS Code的Go开发环境.html" class="sidebar-link">Docker和VS Code的Go开发环境</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="值部"><a href="#值部" class="header-anchor">#</a> 值部</h1> <p>此篇文章后续的若干文章将介绍Go中更多的类型。为了更容易和更深刻地理解那些类型，最好先阅读一下本文。</p> <h2 id="go类型分为两大类别-category"><a href="#go类型分为两大类别-category" class="header-anchor">#</a> Go类型分为两大类别（category）</h2> <p>Go可以被看作是一门C语言血统的语言，这可以通过此前的<a href="https://gfw.go101.org/article/pointer.html" target="_blank" rel="noopener noreferrer">指针<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和<a href="https://gfw.go101.org/article/struct.html" target="_blank" rel="noopener noreferrer">结构体<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>两篇文章得以验证。 Go中的指针和结构体类型的内存结构和C语言很类似。</p> <p>另一方面，Go也可以被看作是C语言的一个扩展框架。这可以从C中的值的内存结构都是很透明的，但Go中一些种类的类型的值的内存结构却不是很透明这一事实体现出来。 在C中，每个值在内存中只占据一个<a href="https://gfw.go101.org/article/memory-block.html" target="_blank" rel="noopener noreferrer">内存块<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（一段连续内存）。但是，一些Go类型的值可能占据多个内存块。</p> <p>以后，我们称一个Go值分布在不同内存块上的部分为此值的各个值部（value part）。 一个分布在多个内存块上的值含有一个直接值部和若干被此直接值部<a href="https://gfw.go101.org/article/pointer.html#references" target="_blank" rel="noopener noreferrer">引用着<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的间接值部。</p> <p>上面的段落描述了两个类别的Go类型。下表将列出这两个类别（category）中的类型（type）种类（kind）：</p> <table><thead><tr><th style="text-align:center;">每个值在内存中只分布在一个内存块上的类型</th> <th style="text-align:center;">每个值在内存中会分布在多个内存块上的类型</th></tr></thead> <tbody><tr><td style="text-align:center;"></td> <td style="text-align:center;"></td></tr></tbody></table> <p><img src="data:image/png;base64,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" alt="单值部">   | <img src="data:image/png;base64,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" alt="多值部"></p> <p>|<br>
| 布尔类型 各种数值类型 指针类型 非类型安全指针类型 结构体类型 数组类型 |  切片类型 映射类型 通道类型 函数类型 接口类型 字符串类型   |</p> <p>表中列出的很多类型将在后续文章中逐一详细讲解。本文的目的就是为了给后续的讲解做一个铺垫。</p> <p>注意：</p> <ul><li>接口类型和字符串类型值是否包含间接部分取决于具体编译器实现。 如果不使用今后将介绍的非类型安全途径，我们无法从这两类类型的值的外在表现来判定它们的值是否含有间接部分。 在《Go语言101》中，我们认为这两类类型的值是可能包含间接值部的。</li> <li>同样地，函数类型的值是否包含间接部分几乎也是不可能验证的。 在《Go语言101》中，我们认为函数值是可能包含间接值部的。</li></ul> <p>通过封装了很多具体的实现细节，第二个类别中的类型给Go编程带来了很大的便利。 不同的编译器实现会采用不同的内部结构来实现这些类型，但是这些类型的值的外在表现必须满足Go白皮书中的要求。 此分类中的类型对于编程来说并非是很基础的类型。 我们可以使用第一个分类中的类型来实现此分类中的类型。 但是，通过将一些常用或者很独特的功能封装到此第二个分类中的类型里，使用Go编程的效率将得到大大提升，体验将得到大大增强。</p> <p>另一方面，这些封装同时也隐藏了这些类型的值的内部结构，使得Go程序员不能对这些类型有一个更全局更深刻的认识。有时候这会对更好地理解Go带来了一些障碍。</p> <p>为了帮助Go程序员更好的理解第二个分类中的类型和它们的值，本文余下的内容将对这些类型的内在实现做一个简单介绍。 这些实现的细节将不会在本文中谈及。本文的介绍主要基于（但并不完全符合）官方标准编译器的实现。</p> <h2 id="go中的两种指针类型"><a href="#go中的两种指针类型" class="header-anchor">#</a> Go中的两种指针类型</h2> <p>在继续下面的内容之前，我们先了解一下Go中的两种指针类型并明确一下“引用”这个词的含义。</p> <p>我们已经在<a href="https://gfw.go101.org/article/pointer.html" target="_blank" rel="noopener noreferrer">上上篇文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中了解了Go中的指针。 那篇文章中所介绍的指针属于类型安全的指针。事实上，Go还支持另一种称为<a href="https://gfw.go101.org/article/unsafe.html" target="_blank" rel="noopener noreferrer">非类型安全的指针类型<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。 非类型安全的指针类型提供在 <code>unsafe</code> 标准库包中。 非类型安全指针类型通常使用 <code>unsafe. Pointer</code> 来表示。 <code>unsafe. Pointer</code> 类似于C语言中的 <code>void*</code> 。</p> <p>在《Go语言101》中的大多数文章中，如果没有特别说明，当一个指针类型被谈及，它表示一个类型安全指针。 但是在本文的余下内容中，当一个指针被谈及，它可能表示一个类型安全指针，也可能表示一个非类型安全指针。</p> <p>一个指针值存储着另一个值的地址，除非此指针值是一个nil空指针。 我们可以说此指针<a href="https://gfw.go101.org/article/pointer.html#references" target="_blank" rel="noopener noreferrer">引用着<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>另外一个值，或者说另外一个值正被此指针所引用。 一个值可能被间接引用，比如</p> <ul><li>如果一个结构体值<code>a</code>含有一个指针字段<code>b</code>并且这个指针字段<code>b</code>引用着另外一个值<code>c</code>，那么我们可以说结构体值<code>a</code>也引用着值<code>c</code>。</li> <li>如果一个值<code>x</code>（直接或者间接地）引用着另一个值<code>y</code>，并且值<code>y</code>（直接或者间接地）引用着第三个值<code>z</code>，则我们可以说值<code>x</code>间接地引用着值<code>z</code>。</li></ul> <p>以后，我们将一个含有（直接或者间接）指针字段的结构体类型称为一个<strong>指针包裹类型</strong>，将一个含有（直接或者间接）指针的类型称为<strong>指针持有者类型</strong>。 指针类型和指针包裹类型都属于指针持有者类型。元素类型为指针持有者类型的数组类型也是指针持有者类型（数组将在下一篇文章中介绍）。</p> <h2 id="第二个分类中的类型的-可能的-内部实现结构定义"><a href="#第二个分类中的类型的-可能的-内部实现结构定义" class="header-anchor">#</a> 第二个分类中的类型的（可能的）内部实现结构定义</h2> <p>为了更好地理解第二个分类中的类型的值的运行时刻行为，我们可以认为这些类型在内部是使用第一个分类中的类型来定义的（如下所示）。 如果你以前并没有很多使用过Go中各种类型的经验，目前你不必深刻地理解这些定义。 对这些定义拥有一个粗糙的印象足够对理解后续文章中将要讲解的类型有所帮助。 你可以在今后有了更多的Go编程经验之后再重读一下本文。</p> <h3 id="映射、通道和函数类型的内部定义"><a href="#映射、通道和函数类型的内部定义" class="header-anchor">#</a> 映射、通道和函数类型的内部定义</h3> <p>映射、通道和函数类型的内部定义很相似：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 映射类型</span>
<span class="token keyword">type</span> _map <span class="token operator">*</span>hashtableImpl <span class="token comment">// 目前，官方标准编译器是使用</span>
                         <span class="token comment">// 哈希表来实现映射的。</span>

<span class="token comment">// 通道类型</span>
<span class="token keyword">type</span> _channel <span class="token operator">*</span>channelImpl

<span class="token comment">// 函数类型</span>
<span class="token keyword">type</span> _function <span class="token operator">*</span>functionImpl
</code></pre></div><p>从这些定义，我们可以看出来，这三个种类的类型的内部结构其实是一个指针类型。 或者说，这些类型的值的直接部分在内部是一个指针。 这些类型的每个值的直接部分引用着它的具体实现的底层间接部分。</p> <h3 id="切片类型的内部定义"><a href="#切片类型的内部定义" class="header-anchor">#</a> 切片类型的内部定义</h3> <p>切片类型的内部定义：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> _slice <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	elements unsafe<span class="token punctuation">.</span>Pointer <span class="token comment">// 引用着底层的元素</span>
	<span class="token builtin">len</span>      <span class="token builtin">int</span>            <span class="token comment">// 当前的元素个数</span>
	<span class="token builtin">cap</span>      <span class="token builtin">int</span>            <span class="token comment">// 切片的容量</span>
<span class="token punctuation">}</span>
</code></pre></div><p>从这个定义可以看出来，一个切片类型在内部可以看作是一个指针包裹类型。 每个非零切片值包含着一个底层间接部分用来存储此切片的元素。 一个切片值的底层元素序列（间接部分）被此切片值的 <code>elements</code> 字段所引用。</p> <h3 id="字符串类型的内部结构"><a href="#字符串类型的内部结构" class="header-anchor">#</a> 字符串类型的内部结构</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> _string <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	elements <span class="token operator">*</span><span class="token builtin">byte</span> <span class="token comment">// 引用着底层的byte元素</span>
	<span class="token builtin">len</span>      <span class="token builtin">int</span>   <span class="token comment">// 字符串的长度</span>
<span class="token punctuation">}</span>
</code></pre></div><p>从此定义可以看出，每个字符串类型在内部也可以看作是一个指针包裹类型。 每个非零字符串值含有一个指针字段 <code>elements</code> 。 这个指针字段引用着此字符串值的底层字节元素序列。</p> <h3 id="接口类型的内部定义"><a href="#接口类型的内部定义" class="header-anchor">#</a> 接口类型的内部定义</h3> <p>我们可以认为接口类型在内部是如下定义的：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> _interface <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	dynamicType  <span class="token operator">*</span>_type         <span class="token comment">// 引用着接口值的动态类型</span>
	dynamicValue unsafe<span class="token punctuation">.</span>Pointer <span class="token comment">// 引用着接口值的动态值</span>
<span class="token punctuation">}</span>
</code></pre></div><p>从这个定义来看，接口类型也可以看作是一个指针包裹类型。一个接口类型含有两个指针字段。 每个非零接口值的（两个）间接部分分别存储着此接口值的动态类型和动态值。 这两个间接部分被此接口值的直接字段 <code>dynamicType</code> 和 <code>dynamicValue</code> 所引用。</p> <p>事实上，上面这个内部定义只用于表示空接口类型的值。空接口类型没有指定任何方法。 后面的<a href="https://gfw.go101.org/article/interface.html" target="_blank" rel="noopener noreferrer">接口<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>一文详细解释了接口类型和值。 非空接口类型的内部定义如下：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> _interface <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	dynamicTypeInfo <span class="token operator">*</span><span class="token keyword">struct</span> <span class="token punctuation">{</span>
		dynamicType <span class="token operator">*</span>_type       <span class="token comment">// 引用着接口值的动态类型</span>
		methods     <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>_function <span class="token comment">// 引用着动态类型的对应方法列表</span>
	<span class="token punctuation">}</span>
	dynamicValue unsafe<span class="token punctuation">.</span>Pointer <span class="token comment">// 引用着动态值</span>
<span class="token punctuation">}</span>
</code></pre></div><p>一个非空接口类型的值的 <code>dynamicTypeInfo</code> 字段的 <code>methods</code> 字段引用着一个方法列表。 此列表中的每一项为此接口值的动态类型上定义的一个方法，此方法对应着此接口类型所指定的一个的同原型的方法。</p> <h2 id="在赋值中-底层间接值部将不会被复制"><a href="#在赋值中-底层间接值部将不会被复制" class="header-anchor">#</a> 在赋值中，底层间接值部将不会被复制</h2> <p>现在我们了解了第二个分类中的类型的内部结构是一个指针持有（指针或者指针包裹）类型。 这对于我们理解Go中的值复制行为有很大帮助。</p> <p>在Go中，每个赋值操作（包括函数调用传参等）都是一个值的浅复制过程（假设源值和目标值的类型相同）。 换句话说，在一个赋值操作中，只有源值的直接部分被复制给了目标值。 如果源值含有间接部分，则在此赋值操作完成之后，目标值和源值的直接部分将引用着相同的间接部分。 换句话说，两个值将共享底层的间接值部，如下图所示：</p> <p><img src="/blog/assets/img/value-parts-copy.af395416.png" alt="值复制"></p> <p>事实上，对于字符串值和接口值的赋值，上述描述在理论上并非百分百正确。 <a href="https://golang.google.cn/doc/faq#pass_by_value" target="_blank" rel="noopener noreferrer">官方FAQ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>明确说明了在一个接口值的赋值中，接口的底层动态值将被复制到目标值。 但是，因为一个接口值的动态值是只读的，所以在接口值的赋值中，官方标准编译器并没有复制底层的动态值。这可以被视为是一个编译器优化。 对于字符串值的赋值，道理是一样的。所以对于官方标准编译器来说，上一段的描述是100%正确的。</p> <p>因为一个间接值部可能并不专属于任何一个值，所以在使用 <code>unsafe. Sizeof</code> 函数计算一个值的尺寸的时候，此值的间接部分所占内存空间未被计算在内。</p> <h2 id="关于术语-引用类型-和-引用值"><a href="#关于术语-引用类型-和-引用值" class="header-anchor">#</a> 关于术语“引用类型”和“引用值”</h2> <p>“引用”这个术语在Go社区中使用得有些混乱。很多Go程序员在Go编程中可能由此产生了一些困惑。 一些文档或者网络文章，包括一些<a href="https://golang.google.cn/doc/faq#references" target="_blank" rel="noopener noreferrer">官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，把“引用”（reference）看作是“值”（value）的一个对立面。 《Go语言101》强烈不推荐这种定义。在这一点上，本人不想争论什么。这里仅仅列出一些肯定错误地使用了“引用”这个术语的例子：</p> <ul><li>在Go中，只有切片、映射、通道和函数类型属于*<strong>引用类型*</strong>。 （如果我们确实需要***引用类型***这个术语，那么我们不应把其它指针持有者类型排除在引用类型之外。）</li> <li>一些函数调用的参数是通过引用来传递的。 （对不起，在Go中，所有的函数调用的参数都是通过值复制<strong>直接值部</strong>的方式来传递的。）</li></ul> <p>我并不是想说***引用类型*<strong>这个术语在Go中是完全没有价值的， 我只是想表达这个术语是完全没有必要的，并且它常常在Go的使用中导致一些困惑。我推荐使用指针持有者类型来代替这个术语。 另外，我个人的观点是最好将</strong>*引用***这个词限定到只表示值之间的关系，把它当作一个动词或者名词来使用，永远不要把它当作一个形容词来使用。 这样将在使用Go的过程中避免很多困惑。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/21/2021, 1:25:38 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/开发基础/GO/Go类型系统/3结构体.html" class="prev">
        结构体
      </a></span> <span class="next"><a href="/blog/开发基础/GO/Go类型系统/5数组、切片和映射.html">
        数组、切片和映射
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.3a2a0635.js" defer></script><script src="/blog/assets/js/3.21e2e031.js" defer></script><script src="/blog/assets/js/49.cffe09bd.js" defer></script>
  </body>
</html>
